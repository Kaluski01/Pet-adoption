(()=>{"use strict";var e={4285:(e,t,r)=>{function n(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function i(){return"npm"}r.d(t,{S:()=>i,n:()=>n})},7392:(e,t,r)=>{r.d(t,{KV:()=>i,l$:()=>o});var n=r(4285);function i(){return!(0,n.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function o(e,t){return e.require(t)}e=r.hmd(e)},7790:(e,t,r)=>{r.d(t,{ph:()=>l,yW:()=>u});var n=r(7392),i=r(63);e=r.hmd(e);const o=(0,i.Rf)(),s={nowSeconds:()=>Date.now()/1e3},a=(0,n.KV)()?function(){try{return(0,n.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=o;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===a?s:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},u=s.nowSeconds.bind(s),l=c.nowSeconds.bind(c);let d;(()=>{const{performance:e}=o;if(!e||!e.now)return void(d="none");const t=36e5,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,s=i<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+r-n):t;s||c<t?i<=c?(d="timeOrigin",e.timeOrigin):d="navigationStart":d="dateNow"})()},63:(e,t,r)=>{function n(e){return e&&e.Math==Math?e:void 0}r.d(t,{Rf:()=>o,YO:()=>s,n2:()=>i});const i="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof r.g&&n(r.g)||function(){return this}()||{};function o(){return i}function s(e,t,r){const n=r||i,o=n.__SENTRY__=n.__SENTRY__||{};return o[e]||(o[e]=t())}},7111:(e,t,r)=>{var n=r(6733),i=r(9821),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a function")}},7988:(e,t,r)=>{var n=r(2359),i=r(9821),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a constructor")}},8505:(e,t,r)=>{var n=r(6733),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw new o("Can't set "+i(e)+" as a prototype")}},9736:(e,t,r)=>{var n=r(95),i=r(2391),o=r(1787).f,s=n("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},6637:(e,t,r)=>{var n=r(966).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},7728:(e,t,r)=>{var n=r(1321),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},1176:(e,t,r)=>{var n=r(5052),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not an object")}},2460:(e,t,r)=>{var n=r(4229);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},6570:(e,t,r)=>{var n=r(9996).forEach,i=r(6038)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},9540:(e,t,r)=>{var n=r(905),i=r(3231),o=r(9646),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c),l=i(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},9996:(e,t,r)=>{var n=r(7636),i=r(5968),o=r(9337),s=r(2991),a=r(9646),c=r(7501),u=i([].push),l=function(e){var t=1===e,r=2===e,i=3===e,l=4===e,d=6===e,h=7===e,p=5===e||d;return function(f,g,m,v){for(var y,E,_=s(f),S=o(_),I=n(g,m),A=a(S),O=0,C=v||c,b=t?C(f,A):r||h?C(f,0):void 0;A>O;O++)if((p||O in S)&&(E=I(y=S[O],O,_),e))if(t)b[O]=E;else if(E)switch(e){case 3:return!0;case 5:return y;case 6:return O;case 2:u(b,y)}else switch(e){case 4:return!1;case 7:u(b,y)}return d?-1:i||l?l:b}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},6038:(e,t,r)=>{var n=r(4229);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},3143:(e,t,r)=>{var n=r(7111),i=r(2991),o=r(9337),s=r(9646),a=TypeError,c=function(e){return function(t,r,c,u){n(r);var l=i(t),d=o(l),h=s(l),p=e?h-1:0,f=e?-1:1;if(c<2)for(;;){if(p in d){u=d[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw new a("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in d&&(u=r(u,d[p],p,l));return u}};e.exports={left:c(!1),right:c(!0)}},9794:(e,t,r)=>{var n=r(3231),i=r(9646),o=r(2324),s=Array,a=Math.max;e.exports=function(e,t,r){for(var c=i(e),u=n(t,c),l=n(void 0===r?c:r,c),d=s(a(l-u,0)),h=0;u<l;u++,h++)o(d,h,e[u]);return d.length=h,d}},8760:(e,t,r)=>{var n=r(3718),i=r(2359),o=r(5052),s=r(95)("species"),a=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===a||n(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},7501:(e,t,r)=>{var n=r(8760);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},4575:(e,t,r)=>{var n=r(95)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(e){return!1}var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},7079:(e,t,r)=>{var n=r(5968),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},1589:(e,t,r)=>{var n=r(1601),i=r(6733),o=r(7079),s=r(95)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?o(t):"Object"===(n=o(t))&&i(t.callee)?"Arguments":n}},3370:(e,t,r)=>{var n=r(5968),i=r(8312),o=r(5926).getWeakData,s=r(7728),a=r(1176),c=r(9650),u=r(5052),l=r(9003),d=r(9996),h=r(8270),p=r(6407),f=p.set,g=p.getterFor,m=d.find,v=d.findIndex,y=n([].splice),E=0,_=function(e){return e.frozen||(e.frozen=new S)},S=function(){this.entries=[]},I=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};S.prototype={get:function(e){var t=I(this,e);if(t)return t[1]},has:function(e){return!!I(this,e)},set:function(e,t){var r=I(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&y(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var d=e((function(e,i){s(e,p),f(e,{type:t,id:E++,frozen:void 0}),c(i)||l(i,e[n],{that:e,AS_ENTRIES:r})})),p=d.prototype,m=g(t),v=function(e,t,r){var n=m(e),i=o(a(t),!0);return!0===i?_(n).set(t,r):i[n.id]=r,e};return i(p,{delete:function(e){var t=m(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).delete(e):r&&h(r,t.id)&&delete r[t.id]},has:function(e){var t=m(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).has(e):r&&h(r,t.id)}}),i(p,r?{get:function(e){var t=m(this);if(u(e)){var r=o(e);return!0===r?_(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),d}}},9789:(e,t,r)=>{var n=r(3103),i=r(9859),o=r(5968),s=r(6541),a=r(4768),c=r(5926),u=r(9003),l=r(7728),d=r(6733),h=r(9650),p=r(5052),f=r(4229),g=r(4575),m=r(4555),v=r(835);e.exports=function(e,t,r){var y=-1!==e.indexOf("Map"),E=-1!==e.indexOf("Weak"),_=y?"set":"add",S=i[e],I=S&&S.prototype,A=S,O={},C=function(e){var t=o(I[e]);a(I,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return E&&!p(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(s(e,!d(S)||!(E||I.forEach&&!f((function(){(new S).entries().next()})))))A=r.getConstructor(t,e,y,_),c.enable();else if(s(e,!0)){var b=new A,T=b[_](E?{}:-0,1)!==b,w=f((function(){b.has(1)})),R=g((function(e){new S(e)})),P=!E&&f((function(){for(var e=new S,t=5;t--;)e[_](t,t);return!e.has(-0)}));R||((A=t((function(e,t){l(e,I);var r=v(new S,e,A);return h(t)||u(t,r[_],{that:r,AS_ENTRIES:y}),r}))).prototype=I,I.constructor=A),(w||P)&&(C("delete"),C("has"),y&&C("get")),(P||T)&&C(_),E&&I.clear&&delete I.clear}return O[e]=A,n({global:!0,constructor:!0,forced:A!==S},O),m(A,e),E||r.setStrong(A,e,y),A}},7081:(e,t,r)=>{var n=r(8270),i=r(4826),o=r(7933),s=r(1787);e.exports=function(e,t,r){for(var a=i(t),c=s.f,u=o.f,l=0;l<a.length;l++){var d=a[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},8127:(e,t,r)=>{var n=r(95)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},7528:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3684:e=>{e.exports=function(e,t){return{value:e,done:t}}},5762:(e,t,r)=>{var n=r(7400),i=r(1787),o=r(5358);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},5358:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2324:(e,t,r)=>{var n=r(9310),i=r(1787),o=r(5358);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},6616:(e,t,r)=>{var n=r(6039),i=r(1787);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},4768:(e,t,r)=>{var n=r(6733),i=r(1787),o=r(6039),s=r(8400);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&o(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},8312:(e,t,r)=>{var n=r(4768);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},8400:(e,t,r)=>{var n=r(9859),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},7400:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3777:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},2635:(e,t,r)=>{var n=r(9859),i=r(5052),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},5694:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8865:(e,t,r)=>{var n=r(2635)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},8801:(e,t,r)=>{var n=r(9859),i=r(7079);e.exports="process"===i(n.process)},598:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},6358:(e,t,r)=>{var n,i,o=r(9859),s=r(598),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,t,r)=>{var n=r(9859),i=r(7933).f,o=r(5762),s=r(4768),a=r(8400),c=r(7081),u=r(6541);e.exports=function(e,t){var r,l,d,h,p,f=e.target,g=e.global,m=e.stat;if(r=g?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(l in t){if(h=t[l],d=e.dontCallGetSet?(p=i(r,l))&&p.value:r[l],!u(g?l:f+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(r,l,h,e)}}},4229:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4954:(e,t,r)=>{r(7950);var n=r(4745),i=r(4768),o=r(3466),s=r(4229),a=r(95),c=r(5762),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),f=p&&!s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!p||!f||r){var g=n(/./[h]),m=t(h,""[e],(function(e,t,r,i,s){var a=n(e),c=t.exec;return c===o||c===l.exec?p&&!s?{done:!0,value:g(t,r,i)}:{done:!0,value:a(r,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(l,h,m[1])}d&&c(l[h],"sham",!0)}},8476:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},3171:(e,t,r)=>{var n=r(7188),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},7636:(e,t,r)=>{var n=r(4745),i=r(7111),o=r(7188),s=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},7188:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},266:(e,t,r)=>{var n=r(7188),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},1805:(e,t,r)=>{var n=r(7400),i=r(8270),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},3411:(e,t,r)=>{var n=r(5968),i=r(7111);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},4745:(e,t,r)=>{var n=r(7079),i=r(5968);e.exports=function(e){if("Function"===n(e))return i(e)}},5968:(e,t,r)=>{var n=r(7188),i=Function.prototype,o=i.call,s=n&&i.bind.bind(o,o);e.exports=n?s:function(e){return function(){return o.apply(e,arguments)}}},1333:(e,t,r)=>{var n=r(9859),i=r(6733);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},8830:(e,t,r)=>{var n=r(1589),i=r(5300),o=r(9650),s=r(5495),a=r(95)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[n(e)]}},8403:(e,t,r)=>{var n=r(266),i=r(7111),o=r(1176),s=r(9821),a=r(8830),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(i(r))return o(n(r,e));throw new c(s(e)+" is not iterable")}},5300:(e,t,r)=>{var n=r(7111),i=r(9650);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},17:(e,t,r)=>{var n=r(5968),i=r(2991),o=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,h){var p=r+e.length,f=n.length,g=l;return void 0!==d&&(d=i(d),g=u),a(h,g,(function(i,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,p);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return i;if(l>f){var h=o(l/10);return 0===h?i:h<=f?void 0===n[h-1]?s(a,1):n[h-1]+s(a,1):i}u=n[l-1]}return void 0===u?"":u}))}},9859:function(e,t,r){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},8270:(e,t,r)=>{var n=r(5968),i=r(2991),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5977:e=>{e.exports={}},8385:(e,t,r)=>{var n=r(1333);e.exports=n("document","documentElement")},4394:(e,t,r)=>{var n=r(7400),i=r(4229),o=r(2635);e.exports=!n&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},9337:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(7079),s=Object,a=n("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?a(e,""):s(e)}:s},835:(e,t,r)=>{var n=r(6733),i=r(5052),o=r(6540);e.exports=function(e,t,r){var s,a;return o&&n(s=t.constructor)&&s!==r&&i(a=s.prototype)&&a!==r.prototype&&o(e,a),e}},8511:(e,t,r)=>{var n=r(5968),i=r(6733),o=r(5353),s=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},5926:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(5977),s=r(5052),a=r(8270),c=r(1787).f,u=r(8151),l=r(166),d=r(5343),h=r(1441),p=r(8476),f=!1,g=h("meta"),m=0,v=function(e){c(e,g,{value:{objectID:"O"+m++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},f=!0;var e=u.f,t=i([].splice),r={};r[g]=1,e(r).length&&(u.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===g){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,g)){if(!d(e))return"F";if(!t)return"E";v(e)}return e[g].objectID},getWeakData:function(e,t){if(!a(e,g)){if(!d(e))return!0;if(!t)return!1;v(e)}return e[g].weakData},onFreeze:function(e){return p&&f&&d(e)&&!a(e,g)&&v(e),e}};o[g]=!0},6407:(e,t,r)=>{var n,i,o,s=r(1180),a=r(9859),c=r(5052),u=r(5762),l=r(8270),d=r(5353),h=r(4399),p=r(5977),f="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||d.state){var v=d.state||(d.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw new g(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,n=function(e,t){if(l(e,y))throw new g(f);return t.facade=e,u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return r}}}},1943:(e,t,r)=>{var n=r(95),i=r(5495),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},3718:(e,t,r)=>{var n=r(7079);e.exports=Array.isArray||function(e){return"Array"===n(e)}},6733:(e,t,r)=>{var n=r(3777),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},2359:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(6733),s=r(1589),a=r(1333),c=r(8511),u=function(){},l=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.test(u),g=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},6541:(e,t,r)=>{var n=r(4229),i=r(6733),o=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r===l||r!==u&&(i(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},9650:e=>{e.exports=function(e){return null==e}},5052:(e,t,r)=>{var n=r(6733),i=r(3777),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===o}:function(e){return"object"==typeof e?null!==e:n(e)}},4231:e=>{e.exports=!1},8311:(e,t,r)=>{var n=r(5052),i=r(7079),o=r(95)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"===i(e))}},9395:(e,t,r)=>{var n=r(1333),i=r(6733),o=r(1321),s=r(6969),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,a(e))}},9003:(e,t,r)=>{var n=r(7636),i=r(266),o=r(1176),s=r(9821),a=r(1943),c=r(9646),u=r(1321),l=r(8403),d=r(8830),h=r(7281),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,r){var m,v,y,E,_,S,I,A=r&&r.that,O=!(!r||!r.AS_ENTRIES),C=!(!r||!r.IS_RECORD),b=!(!r||!r.IS_ITERATOR),T=!(!r||!r.INTERRUPTED),w=n(t,A),R=function(e){return m&&h(m,"normal",e),new f(!0,e)},P=function(e){return O?(o(e),T?w(e[0],e[1],R):w(e[0],e[1])):T?w(e,R):w(e)};if(C)m=e.iterator;else if(b)m=e;else{if(!(v=d(e)))throw new p(s(e)+" is not iterable");if(a(v)){for(y=0,E=c(e);E>y;y++)if((_=P(e[y]))&&u(g,_))return _;return new f(!1)}m=l(e,v)}for(S=C?e.next:m.next;!(I=i(S,m)).done;){try{_=P(I.value)}catch(e){h(m,"throw",e)}if("object"==typeof _&&_&&u(g,_))return _}return new f(!1)}},7281:(e,t,r)=>{var n=r(266),i=r(1176),o=r(5300);e.exports=function(e,t,r){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return i(s),r}},2247:(e,t,r)=>{var n=r(693).IteratorPrototype,i=r(2391),o=r(5358),s=r(4555),a=r(5495),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),s(e,l,!1,!0),a[l]=c,e}},2707:(e,t,r)=>{var n=r(3103),i=r(266),o=r(4231),s=r(1805),a=r(6733),c=r(2247),u=r(7567),l=r(6540),d=r(4555),h=r(5762),p=r(4768),f=r(95),g=r(5495),m=r(693),v=s.PROPER,y=s.CONFIGURABLE,E=m.IteratorPrototype,_=m.BUGGY_SAFARI_ITERATORS,S=f("iterator"),I="keys",A="values",O="entries",C=function(){return this};e.exports=function(e,t,r,s,f,m,b){c(r,t,s);var T,w,R,P=function(e){if(e===f&&k)return k;if(!_&&e&&e in L)return L[e];switch(e){case I:case A:case O:return function(){return new r(this,e)}}return function(){return new r(this)}},N=t+" Iterator",D=!1,L=e.prototype,x=L[S]||L["@@iterator"]||f&&L[f],k=!_&&x||P(f),M="Array"===t&&L.entries||x;if(M&&(T=u(M.call(new e)))!==Object.prototype&&T.next&&(o||u(T)===E||(l?l(T,E):a(T[S])||p(T,S,C)),d(T,N,!0,!0),o&&(g[N]=C)),v&&f===A&&x&&x.name!==A&&(!o&&y?h(L,"name",A):(D=!0,k=function(){return i(x,this)})),f)if(w={values:P(A),keys:m?k:P(I),entries:P(O)},b)for(R in w)(_||D||!(R in L))&&p(L,R,w[R]);else n({target:t,proto:!0,forced:_||D},w);return o&&!b||L[S]===k||p(L,S,k,{name:f}),g[t]=k,w}},693:(e,t,r)=>{var n,i,o,s=r(4229),a=r(6733),c=r(5052),u=r(2391),l=r(7567),d=r(4768),h=r(95),p=r(4231),f=h("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):g=!0),!c(n)||s((function(){var e={};return n[f].call(e)!==e}))?n={}:p&&(n=u(n)),a(n[f])||d(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},5495:e=>{e.exports={}},9646:(e,t,r)=>{var n=r(4237);e.exports=function(e){return n(e.length)}},6039:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(6733),s=r(8270),a=r(7400),c=r(1805).CONFIGURABLE,u=r(8511),l=r(6407),d=l.enforce,h=l.get,p=String,f=Object.defineProperty,g=n("".slice),m=n("".replace),v=n([].join),y=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),E=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===g(p(t),0,7)&&(t="["+m(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&s(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=v(E,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&h(this).source||u(this)}),"toString")},917:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},7272:(e,t,r)=>{var n=r(8311),i=TypeError;e.exports=function(e){if(n(e))throw new i("The method doesn't accept regular expressions");return e}},5496:(e,t,r)=>{var n=r(9859),i=r(4229),o=r(5968),s=r(3326),a=r(1017).trim,c=r(1647),u=o("".charAt),l=n.parseFloat,d=n.Symbol,h=d&&d.iterator,p=1/l(c+"-0")!=-1/0||h&&!i((function(){l(Object(h))}));e.exports=p?function(e){var t=a(s(e)),r=l(t);return 0===r&&"-"===u(t,0)?-0:r}:l},47:(e,t,r)=>{var n=r(7400),i=r(5968),o=r(266),s=r(4229),a=r(5632),c=r(894),u=r(9195),l=r(2991),d=r(9337),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||s((function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!==h({},e)[r]||a(h({},t)).join("")!==i}))?function(e,t){for(var r=l(e),i=arguments.length,s=1,h=c.f,p=u.f;i>s;)for(var g,m=d(arguments[s++]),v=h?f(a(m),h(m)):a(m),y=v.length,E=0;y>E;)g=v[E++],n&&!o(p,m,g)||(r[g]=m[g]);return r}:h},2391:(e,t,r)=>{var n,i=r(1176),o=r(219),s=r(3837),a=r(5977),c=r(8385),u=r(2635),l=r(4399),d="prototype",h="script",p=l("IE_PROTO"),f=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;v="undefined"!=typeof document?document.domain&&n?m(n):(t=u("iframe"),r="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):m(n);for(var i=s.length;i--;)delete v[d][s[i]];return v()};a[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=i(e),r=new f,f[d]=null,r[p]=e):r=v(),void 0===t?r:o.f(r,t)}},219:(e,t,r)=>{var n=r(7400),i=r(7137),o=r(1787),s=r(1176),a=r(905),c=r(5632);t.f=n&&!i?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,r=i[l++],n[r]);return e}},1787:(e,t,r)=>{var n=r(7400),i=r(4394),o=r(7137),s=r(1176),a=r(9310),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=n?o?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&p in r&&!r[p]){var n=l(e,t);n&&n[p]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7933:(e,t,r)=>{var n=r(7400),i=r(266),o=r(9195),s=r(5358),a=r(905),c=r(9310),u=r(8270),l=r(4394),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!i(o.f,e,t),e[t])}},166:(e,t,r)=>{var n=r(7079),i=r(905),o=r(8151).f,s=r(9794),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"===n(e)?function(e){try{return o(e)}catch(e){return s(a)}}(e):o(i(e))}},8151:(e,t,r)=>{var n=r(140),i=r(3837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},894:(e,t)=>{t.f=Object.getOwnPropertySymbols},7567:(e,t,r)=>{var n=r(8270),i=r(6733),o=r(2991),s=r(4399),a=r(7528),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},5343:(e,t,r)=>{var n=r(4229),i=r(5052),o=r(7079),s=r(2460),a=Object.isExtensible,c=n((function(){a(1)}));e.exports=c||s?function(e){return!!i(e)&&(!s||"ArrayBuffer"!==o(e))&&(!a||a(e))}:a},1321:(e,t,r)=>{var n=r(5968);e.exports=n({}.isPrototypeOf)},140:(e,t,r)=>{var n=r(5968),i=r(8270),o=r(905),s=r(9540).indexOf,a=r(5977),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);for(;t.length>u;)i(n,r=t[u++])&&(~s(l,r)||c(l,r));return l}},5632:(e,t,r)=>{var n=r(140),i=r(3837);e.exports=Object.keys||function(e){return n(e,i)}},9195:(e,t)=>{var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},6540:(e,t,r)=>{var n=r(3411),i=r(1176),o=r(8505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},7664:(e,t,r)=>{var n=r(7400),i=r(4229),o=r(5968),s=r(7567),a=r(5632),c=r(905),u=o(r(9195).f),l=o([].push),d=n&&i((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),h=function(e){return function(t){for(var r,i=c(t),o=a(i),h=d&&null===s(i),p=o.length,f=0,g=[];p>f;)r=o[f++],n&&!(h?r in i:u(i,r))||l(g,e?[r,i[r]]:i[r]);return g}};e.exports={entries:h(!0),values:h(!1)}},2914:(e,t,r)=>{var n=r(266),i=r(6733),o=r(5052),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&i(r=e.toString)&&!o(a=n(r,e)))return a;if(i(r=e.valueOf)&&!o(a=n(r,e)))return a;if("string"!==t&&i(r=e.toString)&&!o(a=n(r,e)))return a;throw new s("Can't convert object to primitive value")}},4826:(e,t,r)=>{var n=r(1333),i=r(5968),o=r(8151),s=r(894),a=r(1176),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=s.f;return r?c(t,r(e)):t}},6060:(e,t,r)=>{var n=r(1787).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},8115:(e,t,r)=>{var n=r(266),i=r(1176),o=r(6733),s=r(7079),a=r(3466),c=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===s(e))return n(a,e,t);throw new c("RegExp#exec called on incompatible receiver")}},3466:(e,t,r)=>{var n,i,o=r(266),s=r(5968),a=r(3326),c=r(895),u=r(5650),l=r(3036),d=r(2391),h=r(6407).get,p=r(2926),f=r(461),g=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,v=m,y=s("".charAt),E=s("".indexOf),_=s("".replace),S=s("".slice),I=(i=/b*/g,o(m,n=/a/,"a"),o(m,i,"a"),0!==n.lastIndex||0!==i.lastIndex),A=u.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(I||O||A||p||f)&&(v=function(e){var t,r,n,i,s,u,l,p=this,f=h(p),C=a(e),b=f.raw;if(b)return b.lastIndex=p.lastIndex,t=o(v,b,C),p.lastIndex=b.lastIndex,t;var T=f.groups,w=A&&p.sticky,R=o(c,p),P=p.source,N=0,D=C;if(w&&(R=_(R,"y",""),-1===E(R,"g")&&(R+="g"),D=S(C,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y(C,p.lastIndex-1))&&(P="(?: "+P+")",D=" "+D,N++),r=new RegExp("^(?:"+P+")",R)),O&&(r=new RegExp("^"+P+"$(?!\\s)",R)),I&&(n=p.lastIndex),i=o(m,w?r:p,D),w?i?(i.input=S(i.input,N),i[0]=S(i[0],N),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:I&&i&&(p.lastIndex=p.global?i.index+i[0].length:n),O&&i&&i.length>1&&o(g,i[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&T)for(i.groups=u=d(null),s=0;s<T.length;s++)u[(l=T[s])[0]]=i[l[1]];return i}),e.exports=v},895:(e,t,r)=>{var n=r(1176);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},3349:(e,t,r)=>{var n=r(266),i=r(8270),o=r(1321),s=r(895),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!o(a,e)?t:n(s,e)}},5650:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp,o=n((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),s=o||n((function(){return!i("a","y").sticky})),a=o||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},2926:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},461:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8885:(e,t,r)=>{var n=r(9650),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},2101:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},1832:(e,t,r)=>{var n=r(1333),i=r(6616),o=r(95),s=r(7400),a=o("species");e.exports=function(e){var t=n(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},4555:(e,t,r)=>{var n=r(1787).f,i=r(8270),o=r(95)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},4399:(e,t,r)=>{var n=r(3036),i=r(1441),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5353:(e,t,r)=>{var n=r(9859),i=r(8400),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},3036:(e,t,r)=>{var n=r(4231),i=r(5353);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.33.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7942:(e,t,r)=>{var n=r(1176),i=r(7988),o=r(9650),s=r(95)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||o(r=n(a)[s])?t:i(r)}},966:(e,t,r)=>{var n=r(5968),i=r(3329),o=r(3326),s=r(8885),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=o(s(t)),h=i(r),p=d.length;return h<0||h>=p?e?"":void 0:(n=c(d,h))<55296||n>56319||h+1===p||(l=c(d,h+1))<56320||l>57343?e?a(d,h):n:e?u(d,h,h+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},3124:(e,t,r)=>{var n=r(3329),i=r(3326),o=r(8885),s=RangeError;e.exports=function(e){var t=i(o(this)),r="",a=n(e);if(a<0||a===1/0)throw new s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},9445:(e,t,r)=>{var n=r(1805).PROPER,i=r(4229),o=r(1647);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e}))}},1017:(e,t,r)=>{var n=r(5968),i=r(8885),o=r(3326),s=r(1647),a=n("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=a(r,c,"")),2&e&&(r=a(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},4860:(e,t,r)=>{var n=r(6358),i=r(4229),o=r(9859).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},143:(e,t,r)=>{var n=r(5968);e.exports=n(1..valueOf)},3231:(e,t,r)=>{var n=r(3329),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},905:(e,t,r)=>{var n=r(9337),i=r(8885);e.exports=function(e){return n(i(e))}},3329:(e,t,r)=>{var n=r(917);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},4237:(e,t,r)=>{var n=r(3329),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},2991:(e,t,r)=>{var n=r(8885),i=Object;e.exports=function(e){return i(n(e))}},2066:(e,t,r)=>{var n=r(266),i=r(5052),o=r(9395),s=r(5300),a=r(2914),c=r(95),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},9310:(e,t,r)=>{var n=r(2066),i=r(9395);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},1601:(e,t,r)=>{var n={};n[r(95)("toStringTag")]="z",e.exports="[object z]"===String(n)},3326:(e,t,r)=>{var n=r(1589),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},9821:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},1441:(e,t,r)=>{var n=r(5968),i=0,o=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},6969:(e,t,r)=>{var n=r(4860);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7137:(e,t,r)=>{var n=r(7400),i=r(4229);e.exports=n&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1180:(e,t,r)=>{var n=r(9859),i=r(6733),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},95:(e,t,r)=>{var n=r(9859),i=r(3036),o=r(8270),s=r(1441),a=r(4860),c=r(6969),u=n.Symbol,l=i("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return o(l,e)||(l[e]=a&&o(u,e)?u[e]:d("Symbol."+e)),l[e]}},1647:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9529:(e,t,r)=>{var n=r(3103),i=r(9540).includes,o=r(4229),s=r(9736);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},5735:(e,t,r)=>{var n=r(905),i=r(9736),o=r(5495),s=r(6407),a=r(1787).f,c=r(2707),u=r(3684),l=r(4231),d=r(7400),h="Array Iterator",p=s.set,f=s.getterFor(h);e.exports=c(Array,"Array",(function(e,t){p(this,{type:h,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;if(!t||n>=t.length)return e.target=void 0,u(void 0,!0);switch(r){case"keys":return u(n,!1);case"values":return u(t[n],!1)}return u([n,t[n]],!1)}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(e){}},3108:(e,t,r)=>{var n=r(3103),i=r(3143).left,o=r(6038),s=r(6358);n({target:"Array",proto:!0,forced:!r(8801)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},8836:(e,t,r)=>{var n=r(3103),i=r(5496);n({target:"Number",stat:!0,forced:Number.parseFloat!==i},{parseFloat:i})},3944:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(3329),s=r(143),a=r(3124),c=r(4229),u=RangeError,l=String,d=Math.floor,h=i(a),p=i("".slice),f=i(1..toFixed),g=function(e,t,r){return 0===t?r:t%2==1?g(e,t-1,r*e):g(e*e,t/2,r)},m=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=d(i/1e7)},v=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=d(n/t),n=n%t*1e7},y=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=l(e[t]);r=""===r?n:r+h("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,n,i,a=s(this),c=o(e),d=[0,0,0,0,0,0],f="",E="0";if(c<0||c>20)throw new u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(f="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),r*=4503599627370496,(t=52-t)>0){for(m(d,0,r),n=c;n>=7;)m(d,1e7,0),n-=7;for(m(d,g(10,n,1),0),n=t-1;n>=23;)v(d,1<<23),n-=23;v(d,1<<n),m(d,1,1),v(d,2),E=y(d)}else m(d,0,r),m(d,1<<-t,0),E=y(d)+h("0",c);return c>0?f+((i=E.length)<=c?"0."+h("0",c-i)+E:p(E,0,i-c)+"."+p(E,i-c)):f+E}})},3105:(e,t,r)=>{var n=r(3103),i=r(47);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},5883:(e,t,r)=>{var n=r(3103),i=r(7664).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},1804:(e,t,r)=>{var n=r(3103),i=r(9003),o=r(2324);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},7890:(e,t,r)=>{var n=r(3103),i=r(7664).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},7368:(e,t,r)=>{var n=r(7400),i=r(9859),o=r(5968),s=r(6541),a=r(835),c=r(5762),u=r(8151).f,l=r(1321),d=r(8311),h=r(3326),p=r(3349),f=r(5650),g=r(6060),m=r(4768),v=r(4229),y=r(8270),E=r(6407).enforce,_=r(1832),S=r(95),I=r(2926),A=r(461),O=S("match"),C=i.RegExp,b=C.prototype,T=i.SyntaxError,w=o(b.exec),R=o("".charAt),P=o("".replace),N=o("".indexOf),D=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,k=/a/g,M=new C(x)!==x,U=f.MISSED_STICKY,j=f.UNSUPPORTED_Y;if(s("RegExp",n&&(!M||U||I||A||v((function(){return k[O]=!1,C(x)!==x||C(k)===k||"/a/i"!==String(C(x,"i"))}))))){for(var H=function(e,t){var r,n,i,o,s,u,f=l(b,this),g=d(e),m=void 0===t,v=[],_=e;if(!f&&g&&m&&e.constructor===H)return e;if((g||l(b,e))&&(e=e.source,m&&(t=p(_))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),_=e,I&&"dotAll"in x&&(n=!!t&&N(t,"s")>-1)&&(t=P(t,/s/g,"")),r=t,U&&"sticky"in x&&(i=!!t&&N(t,"y")>-1)&&j&&(t=P(t,/y/g,"")),A&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],s={},a=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=R(e,n)))t+=R(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:w(L,D(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||y(s,l))throw new T("Invalid capture group name");s[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],v=o[1]),s=a(C(e,t),f?this:b,H),(n||i||v.length)&&(u=E(s),n&&(u.dotAll=!0,u.raw=H(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=R(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+R(e,++n);return i}(e),r)),i&&(u.sticky=!0),v.length&&(u.groups=v)),e!==_)try{c(s,"source",""===_?"(?:)":_)}catch(e){}return s},B=u(C),F=0;B.length>F;)g(H,C,B[F++]);b.constructor=H,H.prototype=b,m(i,"RegExp",H,{constructor:!0})}_("RegExp")},7950:(e,t,r)=>{var n=r(3103),i=r(3466);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},8233:(e,t,r)=>{var n=r(1805).PROPER,i=r(4768),o=r(1176),s=r(3326),a=r(4229),c=r(3349),u="toString",l=RegExp.prototype[u],d=a((function(){return"/a/b"!==l.call({source:"a",flags:"b"})})),h=n&&l.name!==u;(d||h)&&i(RegExp.prototype,u,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},6708:(e,t,r)=>{var n,i=r(3103),o=r(4745),s=r(7933).f,a=r(4237),c=r(3326),u=r(7272),l=r(8885),d=r(8127),h=r(4231),p=o("".endsWith),f=o("".slice),g=Math.min,m=d("endsWith");i({target:"String",proto:!0,forced:!(!h&&!m&&(n=s(String.prototype,"endsWith"),n&&!n.writable)||m)},{endsWith:function(e){var t=c(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:g(a(r),n),o=c(e);return p?p(t,o,i):f(t,i-o.length,i)===o}})},1235:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(7272),s=r(8885),a=r(3326),c=r(8127),u=i("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},4069:(e,t,r)=>{var n=r(266),i=r(4954),o=r(1176),s=r(9650),a=r(4237),c=r(3326),u=r(8885),l=r(5300),d=r(6637),h=r(8115);i("match",(function(e,t,r){return[function(t){var r=u(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](c(r))},function(e){var n=o(this),i=c(e),s=r(t,n,i);if(s.done)return s.value;if(!n.global)return h(n,i);var u=n.unicode;n.lastIndex=0;for(var l,p=[],f=0;null!==(l=h(n,i));){var g=c(l[0]);p[f]=g,""===g&&(n.lastIndex=d(i,a(n.lastIndex),u)),f++}return 0===f?null:p}]}))},5940:(e,t,r)=>{var n=r(3171),i=r(266),o=r(5968),s=r(4954),a=r(4229),c=r(1176),u=r(6733),l=r(9650),d=r(3329),h=r(4237),p=r(3326),f=r(8885),g=r(6637),m=r(5300),v=r(17),y=r(8115),E=r(95)("replace"),_=Math.max,S=Math.min,I=o([].concat),A=o([].push),O=o("".indexOf),C=o("".slice),b="$0"==="a".replace(/./,"$0"),T=!!/./[E]&&""===/./[E]("a","$0");s("replace",(function(e,t,r){var o=T?"$":"$0";return[function(e,r){var n=f(this),o=l(e)?void 0:m(e,E);return o?i(o,e,n,r):i(t,p(n),e,r)},function(e,i){var s=c(this),a=p(e);if("string"==typeof i&&-1===O(i,o)&&-1===O(i,"$<")){var l=r(t,s,a,i);if(l.done)return l.value}var f=u(i);f||(i=p(i));var m,E=s.global;E&&(m=s.unicode,s.lastIndex=0);for(var b,T=[];null!==(b=y(s,a))&&(A(T,b),E);)""===p(b[0])&&(s.lastIndex=g(a,h(s.lastIndex),m));for(var w,R="",P=0,N=0;N<T.length;N++){for(var D,L=p((b=T[N])[0]),x=_(S(d(b.index),a.length),0),k=[],M=1;M<b.length;M++)A(k,void 0===(w=b[M])?w:String(w));var U=b.groups;if(f){var j=I([L],k,x,a);void 0!==U&&A(j,U),D=p(n(i,void 0,j))}else D=v(L,a,x,k,U,i);x>=P&&(R+=C(a,P,x)+D,P=x+L.length)}return R+C(a,P)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!b||T)},4908:(e,t,r)=>{var n=r(266),i=r(4954),o=r(1176),s=r(9650),a=r(8885),c=r(2101),u=r(3326),l=r(5300),d=r(8115);i("search",(function(e,t,r){return[function(t){var r=a(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](u(r))},function(e){var n=o(this),i=u(e),s=r(t,n,i);if(s.done)return s.value;var a=n.lastIndex;c(a,0)||(n.lastIndex=0);var l=d(n,i);return c(n.lastIndex,a)||(n.lastIndex=a),null===l?-1:l.index}]}))},8319:(e,t,r)=>{var n=r(3171),i=r(266),o=r(5968),s=r(4954),a=r(1176),c=r(9650),u=r(8311),l=r(8885),d=r(7942),h=r(6637),p=r(4237),f=r(3326),g=r(5300),m=r(9794),v=r(8115),y=r(3466),E=r(5650),_=r(4229),S=E.UNSUPPORTED_Y,I=4294967295,A=Math.min,O=[].push,C=o(/./.exec),b=o(O),T=o("".slice);s("split",(function(e,t,r){var o;return o="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=f(l(this)),s=void 0===r?I:r>>>0;if(0===s)return[];if(void 0===e)return[o];if(!u(e))return i(t,o,e,s);for(var a,c,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,p+"g");(a=i(y,v,o))&&!((c=v.lastIndex)>g&&(b(h,T(o,g,a.index)),a.length>1&&a.index<o.length&&n(O,h,m(a,1)),d=a[0].length,g=c,h.length>=s));)v.lastIndex===a.index&&v.lastIndex++;return g===o.length?!d&&C(v,"")||b(h,""):b(h,T(o,g)),h.length>s?m(h,0,s):h}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=l(this),s=c(t)?void 0:g(t,e);return s?i(s,t,n,r):i(o,f(n),t,r)},function(e,n){var i=a(this),s=f(e),c=r(o,i,s,n,o!==t);if(c.done)return c.value;var u=d(i,RegExp),l=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(S?"g":"y"),m=new u(S?"^(?:"+i.source+")":i,g),y=void 0===n?I:n>>>0;if(0===y)return[];if(0===s.length)return null===v(m,s)?[s]:[];for(var E=0,_=0,O=[];_<s.length;){m.lastIndex=S?0:_;var C,w=v(m,S?T(s,_):s);if(null===w||(C=A(p(m.lastIndex+(S?_:0)),s.length))===E)_=h(s,_,l);else{if(b(O,T(s,E,_)),O.length===y)return O;for(var R=1;R<=w.length-1;R++)if(b(O,w[R]),O.length===y)return O;_=E=C}}return b(O,T(s,E)),O}]}),!!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),S)},4112:(e,t,r)=>{var n,i=r(3103),o=r(4745),s=r(7933).f,a=r(4237),c=r(3326),u=r(7272),l=r(8885),d=r(8127),h=r(4231),p=o("".startsWith),f=o("".slice),g=Math.min,m=d("startsWith");i({target:"String",proto:!0,forced:!(!h&&!m&&(n=s(String.prototype,"startsWith"),n&&!n.writable)||m)},{startsWith:function(e){var t=c(l(this));u(e);var r=a(g(arguments.length>1?arguments[1]:void 0,t.length)),n=c(e);return p?p(t,n,r):f(t,r,r+n.length)===n}})},5794:(e,t,r)=>{var n=r(3103),i=r(1017).trim;n({target:"String",proto:!0,forced:r(9445)("trim")},{trim:function(){return i(this)}})},634:(e,t,r)=>{var n=r(3103),i=r(7400),o=r(9859),s=r(5968),a=r(8270),c=r(6733),u=r(1321),l=r(3326),d=r(6616),h=r(7081),p=o.Symbol,f=p&&p.prototype;if(i&&c(p)&&(!("description"in f)||void 0!==p().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};h(m,p),m.prototype=f,f.constructor=m;var v="Symbol(description detection)"===String(p("description detection")),y=s(f.valueOf),E=s(f.toString),_=/^Symbol\((.*)\)[^)]+$/,S=s("".replace),I=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=y(this);if(a(g,e))return"";var t=E(e),r=v?I(t,7,-1):S(t,_,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:m})}},6418:(e,t,r)=>{var n,i=r(8476),o=r(9859),s=r(5968),a=r(8312),c=r(5926),u=r(9789),l=r(3370),d=r(5052),h=r(6407).enforce,p=r(4229),f=r(1180),g=Object,m=Array.isArray,v=g.isExtensible,y=g.isFrozen,E=g.isSealed,_=g.freeze,S=g.seal,I={},A={},O=!o.ActiveXObject&&"ActiveXObject"in o,C=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},b=u("WeakMap",C,l),T=b.prototype,w=s(T.set);if(f)if(O){n=l.getConstructor(C,"WeakMap",!0),c.enable();var R=s(T.delete),P=s(T.has),N=s(T.get);a(T,{delete:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),R(this,e)||t.frozen.delete(e)}return R(this,e)},has:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)||t.frozen.has(e)}return P(this,e)},get:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)?N(this,e):t.frozen.get(e)}return N(this,e)},set:function(e,t){if(d(e)&&!v(e)){var r=h(this);r.frozen||(r.frozen=new n),P(this,e)?w(this,e,t):r.frozen.set(e,t)}else w(this,e,t);return this}})}else i&&p((function(){var e=_([]);return w(new b,e,1),!y(e)}))&&a(T,{set:function(e,t){var r;return m(e)&&(y(e)?r=I:E(e)&&(r=A)),w(this,e,t),r===I&&_(e),r===A&&S(e),this}})},2356:(e,t,r)=>{r(6418)},1939:(e,t,r)=>{var n=r(9859),i=r(5694),o=r(8865),s=r(6570),a=r(5762),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},6886:(e,t,r)=>{var n=r(9859),i=r(5694),o=r(8865),s=r(5735),a=r(5762),c=r(95),u=c("iterator"),l=c("toStringTag"),d=s.values,h=function(e,t){if(e){if(e[u]!==d)try{a(e,u,d)}catch(t){e[u]=d}if(e[l]||a(e,l,t),i[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var p in i)h(n[p]&&n[p].prototype,p);h(o,"DOMTokenList")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};r.r(e),r.d(e,{FunctionToString:()=>q,InboundFilters:()=>J,LinkedErrors:()=>oe});var t={};r.r(t),r.d(t,{Breadcrumbs:()=>Mt,Dedupe:()=>Gt,GlobalHandlers:()=>nt,HttpContext:()=>Vt,LinkedErrors:()=>qt,TryCatch:()=>ut}),r(5735),r(6886),r(634),r(1939),r(7950);var n=/android/i;function i(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)&&(/iPhone/.test(t)||/iPad/.test(t))&&!/Trident/.test(t)||/AppleWebKit/.test(t)&&!(/Android/.test(t)||/Linux/.test(t)||/Trident/.test(t))&&(/Mobile/.test(t)||/iPhone/.test(t)||/iPad/.test(t))&&!/Macintosh/.test(t)&&!/Windows/.test(t))&&!(/Chrome/.test(t)||/CriOS/.test(t)||/Edg/.test(t)))}function o(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)||/AppleWebKit/.test(t))&&(/Macintosh/.test(t)||/Windows/.test(t))&&!/iPhone/.test(t)&&!/iPad/.test(t)&&!/Chrome/.test(t)&&!/Edg/.test(t)&&!/Firefox/.test(t))}var s={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var r=new URL(e),n={};return t.forEach((e=>{var t=r.searchParams.get(e);t&&(n[e]=t)})),n},isAndroid:function(){return n.test(window.navigator.userAgent)},isDesktopSafari:o,isMobileSafari:i,isSafari:function(){return i()||o()},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},redirectTo:function(e){window.location.href=e},replaceWindowState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;window.history.replaceState(null,t,e)},submitForm:function(e){e.submit()},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&(e=window.navigator.languages[0]),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};r(8233),r(5883);const a=Object.prototype.toString;function c(e){switch(a.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return v(e,Error)}}function u(e,t){return a.call(e)===`[object ${t}]`}function l(e){return u(e,"ErrorEvent")}function d(e){return u(e,"DOMError")}function h(e){return u(e,"String")}function p(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function f(e){return u(e,"Object")}function g(e){return"undefined"!=typeof Event&&v(e,Event)}function m(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function v(e,t){try{return e instanceof t}catch(e){return!1}}function y(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}var E=r(63);const _=(0,E.Rf)(),S=80;function I(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,i=[];let o=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||S;for(;r&&o++<n&&(u=A(r,l),!("html"===u||o>1&&s+i.length*c+u.length>=d));)i.push(u),s+=u.length,r=r.parentNode;return i.reverse().join(a)}catch(e){return"<unknown>"}}function A(e,t){const r=e,n=[];let i,o,s,a,c;if(!r||!r.tagName)return"";n.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&h(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)n.push(`.${o[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)s=l[c],a=r.getAttribute(s),a&&n.push(`[${s}="${a}"]`);return n.join("")}const O="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,C=["debug","info","warn","error","log","assert","trace"],b={};function T(e){if(!("console"in E.n2))return e();const t=E.n2.console,r={},n=Object.keys(b);n.forEach((e=>{const n=b[e];r[e]=t[e],t[e]=n}));try{return e()}finally{n.forEach((e=>{t[e]=r[e]}))}}const w=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return O?C.forEach((r=>{t[r]=(...t)=>{e&&T((()=>{E.n2.console[r](`Sentry Logger [${r}]:`,...t)}))}})):C.forEach((e=>{t[e]=()=>{}})),t}();function R(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function P(e,t){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const n=e[t];try{y(n)?r.push("[VueViewModel]"):r.push(String(n))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function N(e,t=[],r=!1){return t.some((t=>function(e,t,r=!1){return!!h(e)&&(u(t,"RegExp")?t.test(e):!!h(t)&&(r?e===t:e.includes(t)))}(e,t,r)))}function D(e,t,r){if(!(t in e))return;const n=e[t],i=r(n);"function"==typeof i&&x(i,n),e[t]=i}function L(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){O&&w.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function x(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,L(e,"__sentry_original__",t)}catch(e){}}function k(e){return e.__sentry_original__}function M(e){if(c(e))return{message:e.message,name:e.name,stack:e.stack,...j(e)};if(g(e)){const t={type:e.type,target:U(e.target),currentTarget:U(e.currentTarget),...j(e)};return"undefined"!=typeof CustomEvent&&v(e,CustomEvent)&&(t.detail=e.detail),t}return e}function U(e){try{return"undefined"!=typeof Element&&v(e,Element)?I(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function j(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function H(e){return B(e,new Map)}function B(e,t){if(f(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const r of Object.keys(e))void 0!==e[r]&&(n[r]=B(e[r],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach((e=>{n.push(B(e,t))})),n}return e}let F;class q{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=q.id}setupOnce(){F=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=k(this)||this;return F.apply(t,e)}}catch(e){}}}function V(){const e=E.n2,t=e.crypto||e.msCrypto;let r=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(r=()=>t.getRandomValues(new Uint8Array(1))[0])}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&r())>>e/4).toString(16)))}function G(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function z(e){const{message:t,event_id:r}=e;if(t)return t;const n=G(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function $(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function Y(e,t){const r=G(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};r.mechanism.data=e}}function W(e){if(e&&e.__sentry_captured__)return!0;try{L(e,"__sentry_captured__",!0)}catch(e){}return!1}q.__initStatic();const K="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Q=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],X=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class J{static __initStatic(){this.id="InboundFilters"}constructor(e={}){this.name=J.id,this._options=e}setupOnce(e,t){}processEvent(e,t,r){const n=r.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Q],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:X],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(this._options,n);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(K&&w.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${z(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let r;e.message&&t.push(e.message);try{r=e.exception.values[e.exception.values.length-1]}catch(e){}return r&&r.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`)),K&&0===t.length&&w.error(`Could not extract message for event ${z(e)}`),t}(e).some((e=>N(e,t)))}(e,t.ignoreErrors)?(K&&w.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${z(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const r=e.transaction;return!!r&&N(r,t)}(e,t.ignoreTransactions)?(K&&w.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${z(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const r=Z(e);return!!r&&N(r,t)}(e,t.denyUrls)?(K&&w.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${z(e)}.\nUrl: ${Z(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const r=Z(e);return!r||N(r,t)}(e,t.allowUrls)&&(K&&w.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${z(e)}.\nUrl: ${Z(e)}`),!0)}(e,i)?null:e}}function Z(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return K&&w.error(`Cannot extract url for event ${z(e)}`),null}}function ee(e,t,r=250,n,i,o,s){if(!(o.exception&&o.exception.values&&s&&v(s.originalException,Error)))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;a&&(o.exception.values=(c=te(e,t,i,s.originalException,n,o.exception.values,a,0),u=r,c.map((e=>(e.value&&(e.value=R(e.value,u)),e)))))}function te(e,t,r,n,i,o,s,a){if(o.length>=r+1)return o;let c=[...o];if(v(n[i],Error)){re(s,a);const o=e(t,n[i]),u=c.length;ne(o,i,u,a),c=te(e,t,r,n[i],i,[o,...c],o,u)}return Array.isArray(n.errors)&&n.errors.forEach(((n,o)=>{if(v(n,Error)){re(s,a);const u=e(t,n),l=c.length;ne(u,`errors[${o}]`,l,a),c=te(e,t,r,n,i,[u,...c],u,l)}})),c}function re(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function ne(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:n}}function ie(e,t){const r={type:t.name||t.constructor.name,value:t.message},n=function(e,t){return e(t.stack||"",1)}(e,t);return n.length&&(r.stacktrace={frames:n}),r}J.__initStatic();class oe{static __initStatic(){this.id="LinkedErrors"}constructor(e={}){this._key=e.key||"cause",this._limit=e.limit||5,this.name=oe.id}setupOnce(){}preprocessEvent(e,t,r){const n=r.getOptions();ee(ie,n.stackParser,n.maxValueLength,this._key,this._limit,e,t)}}oe.__initStatic();var se=r(7790);const ae="production";var ce;function ue(e){return new de((t=>{t(e)}))}function le(e){return new de(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(ce||(ce={}));class de{constructor(e){de.prototype.__init.call(this),de.prototype.__init2.call(this),de.prototype.__init3.call(this),de.prototype.__init4.call(this),this._state=ce.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new de(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new de(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}__init(){this._resolve=e=>{this._setResult(ce.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(ce.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===ce.PENDING&&(m(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===ce.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===ce.RESOLVED&&e[1](this._value),this._state===ce.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function he(){return(0,E.YO)("globalEventProcessors",(()=>[]))}function pe(e){he().push(e)}function fe(e,t,r,n=0){return new de(((i,o)=>{const s=e[n];if(null===t||"function"!=typeof s)i(t);else{const a=s({...t},r);K&&s.id&&null===a&&w.log(`Event processor "${s.id}" dropped event`),m(a)?a.then((t=>fe(e,t,r,n+1).then(i))).then(null,o):fe(e,a,r,n+1).then(i).then(null,o)}}))}function ge(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,se.ph)(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:V()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class me{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ve()}static clone(e){const t=new me;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata},t._propagationContext={...e._propagationContext}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ge(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof me?t:this}return e instanceof me?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):f(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=ve(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:(0,se.yW)(),...e},i=this._breadcrumbs;return i.push(n),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={},r){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const r=t.name;r&&(e.tags={transaction:r,...e.tags})}}this._applyFingerprint(e);const n=this._getBreadcrumbs(),i=[...e.breadcrumbs||[],...n];return e.breadcrumbs=i.length>0?i:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},fe([...r||[],...he(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){var t;e.fingerprint=e.fingerprint?(t=e.fingerprint,Array.isArray(t)?t:[t]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function ve(){return{traceId:V(),spanId:V().substring(16)}}const ye=4,Ee=100;class _e{constructor(e,t=new me,r=ye){this._version=r,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=me.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:V(),n=new Error("Sentry syntheticException");return this._withClient(((i,o)=>{i.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},o)})),r}captureMessage(e,t,r){const n=this._lastEventId=r&&r.event_id?r.event_id:V(),i=new Error(e);return this._withClient(((o,s)=>{o.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},s)})),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:V();return e.type||(this._lastEventId=r),this._withClient(((n,i)=>{n.captureEvent(e,{...t,event_id:r},i)})),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Ee}=n.getOptions&&n.getOptions()||{};if(o<=0)return;const s={timestamp:(0,se.yW)(),...e},a=i?T((()=>i(s,t))):s;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=Ie(this);try{e(this)}finally{Ie(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return K&&w.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return K&&!r&&(this.getClient()?w.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):w.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let r={};"ok"===e.status&&(r={status:"exited"}),ge(e,r)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:n,environment:i=ae}=r&&r.getOptions()||{},{userAgent:o}=E.n2.navigator||{},s=function(e){const t=(0,se.ph)(),r={sid:V(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return H({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&ge(r,e),r}({release:n,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&ge(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_withClient(e){const{scope:t,client:r}=this.getStackTop();r&&e(r,t)}_callExtensionMethod(e,...t){const r=Se().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);K&&w.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Se(){return E.n2.__SENTRY__=E.n2.__SENTRY__||{extensions:{},hub:void 0},E.n2}function Ie(e){const t=Se(),r=Oe(t);return Ce(t,e),r}function Ae(){const e=Se();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Se()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!Oe(e).isOlderThan(ye)||Ce(e,new _e),Oe(e);var t}(e)}function Oe(e){return(0,E.YO)("hub",(()=>new _e),e)}function Ce(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const be=/\(error: (.*)\)/,Te=/captureMessage|captureException/;const we="<anonymous>";function Re(e){try{return e&&"function"==typeof e&&e.name||we}catch(e){return we}}function Pe(e,t=100,r=1/0){try{return De("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ne(e,t=3,r=102400){const n=Pe(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?Ne(e,t-1,r):n;var i}function De(e,t,n=1/0,i=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){const[s,a]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==r.g&&t===r.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(y(t))return"[VueViewModel]";if(function(e){return f(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Re(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return u.replace("object ","");if(s(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return De("",d.toJSON(),l-1,i,o)}catch(e){}const h=Array.isArray(t)?[]:{};let p=0;const g=M(t);for(const e in g){if(!Object.prototype.hasOwnProperty.call(g,e))continue;if(p>=i){h[e]="[MaxProperties ~]";break}const t=g[e];h[e]=De(e,t,l-1,i,o),p++}return a(t),h}const Le=new WeakMap;const xe=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];const ke=E.n2;let Me=0;function Ue(){return Me>0}function je(e,t={},r){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(k(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);const i=n.map((e=>je(e,t)));return e.apply(this,i)}catch(e){throw Me++,setTimeout((()=>{Me--})),i=r=>{var i;r.addEventProcessor((e=>(t.mechanism&&($(e,void 0,void 0),Y(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),i=e,Ae().captureException(i,function(e){if(e)return function(e){return e instanceof me||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>xe.includes(e)))}(e)?{captureContext:e}:e}(undefined))},Ae().withScope(i),e}var i};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}x(n,e),L(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const He={},Be={};function Fe(e,t){He[e]=He[e]||[],He[e].push(t)}function qe(e,t){Be[e]||(t(),Be[e]=!0)}function Ve(e,t){const r=e&&He[e];if(r)for(const n of r)try{n(t)}catch(t){O&&w.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Re(n)}\nError:`,t)}}let Ge=null;function ze(){Ge=E.n2.onerror,E.n2.onerror=function(e,t,r,n,i){return Ve("error",{column:n,error:i,line:r,msg:e,url:t}),!(!Ge||Ge.__SENTRY_LOADER__)&&Ge.apply(this,arguments)},E.n2.onerror.__SENTRY_INSTRUMENTED__=!0}let $e=null;function Ye(){$e=E.n2.onunhandledrejection,E.n2.onunhandledrejection=function(e){return Ve("unhandledrejection",e),!($e&&!$e.__SENTRY_LOADER__)||$e.apply(this,arguments)},E.n2.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const We="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Ke(e,t){const r=Xe(e,t),n={type:t&&t.name,value:Ze(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function Qe(e,t){return{exception:{values:[Ke(e,t)]}}}function Xe(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Je.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(e){}return[]}const Je=/Minified React error #\d+;/i;function Ze(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function et(e,t,r,n,i){let o;if(l(t)&&t.error)return Qe(e,t.error);if(d(t)||u(t,"DOMException")){const i=t;if("stack"in t)o=Qe(e,t);else{const t=i.name||(d(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;o=tt(e,s,r,n),$(o,s)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return c(t)?Qe(e,t):f(t)||g(t)?(o=function(e,t,r,n){const i=Ae().getClient(),o=i&&i.getOptions().normalizeDepth,s={exception:{values:[{type:g(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:rt(t,{isUnhandledRejection:n})}]},extra:{__serialized__:Ne(t,o)}};if(r){const t=Xe(e,r);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,r,i),Y(o,{synthetic:!0}),o):(o=tt(e,t,r,n),$(o,`${t}`,void 0),Y(o,{synthetic:!0}),o)}function tt(e,t,r,n){const i={message:t};if(n&&r){const n=Xe(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}return i}function rt(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(M(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return R(r[0],t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:R(n,t)}return""}(e),n=t?"promise rejection":"exception";return l(e)?`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``:g(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}class nt{static __initStatic(){this.id="GlobalHandlers"}constructor(e){this.name=nt.id,this._options={onerror:!0,onunhandledrejection:!0,...e},this._installFunc={onerror:it,onunhandledrejection:ot}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const n=this._installFunc[r];n&&e[r]&&(t=r,We&&w.log(`Global Handler attached: ${t}`),n(),this._installFunc[r]=void 0)}var t}}function it(){!function(e){const t="error";Fe(t,(e=>{const[t,r,n]=at();if(!t.getIntegration(nt))return;const{msg:i,url:o,line:s,column:a,error:c}=e;if(Ue())return;const u=void 0===c&&h(i)?function(e,t,r,n){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=l(e)?e.message:e,s="Error";const a=o.match(i);a&&(s=a[1],o=a[2]);return st({exception:{values:[{type:s,value:o}]}},t,r,n)}(i,o,s,a):st(et(r,c||i,void 0,n,!1),o,s,a);u.level="error",t.captureEvent(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})),qe(t,ze)}()}function ot(){!function(e){const t="unhandledrejection";Fe(t,(e=>{const[t,r,n]=at();if(!t.getIntegration(nt))return;if(Ue())return!0;const i=function(e){if(p(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(e),o=p(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:et(r,i,void 0,n,!0);o.level="error",t.captureEvent(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})),qe(t,Ye)}()}function st(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,d=h(t)&&t.length>0?t:function(){try{return _.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function at(){const e=Ae(),t=e.getClient(),r=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,r.stackParser,r.attachStacktrace]}nt.__initStatic();const ct=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class ut{static __initStatic(){this.id="TryCatch"}constructor(e){this.name=ut.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&D(ke,"setTimeout",lt),this._options.setInterval&&D(ke,"setInterval",lt),this._options.requestAnimationFrame&&D(ke,"requestAnimationFrame",dt),this._options.XMLHttpRequest&&"XMLHttpRequest"in ke&&D(XMLHttpRequest.prototype,"send",ht);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:ct).forEach(pt)}}function lt(e){return function(...t){const r=t[0];return t[0]=je(r,{mechanism:{data:{function:Re(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function dt(e){return function(t){return e.apply(this,[je(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Re(e)},handled:!1,type:"instrument"}})])}}function ht(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&D(r,e,(function(t){const r={mechanism:{data:{function:e,handler:Re(t)},handled:!1,type:"instrument"}},n=k(t);return n&&(r.mechanism.data.handler=Re(n)),je(t,r)}))})),e.apply(this,t)}}function pt(e){const t=ke,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(D(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=je(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Re(n),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[r,je(n,{mechanism:{data:{function:"addEventListener",handler:Re(n),target:e},handled:!1,type:"instrument"}}),i])}})),D(r,"removeEventListener",(function(e){return function(t,r,n){const i=r;try{const r=i&&i.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(e){}return e.call(this,t,i,n)}})))}function ft(){"console"in E.n2&&C.forEach((function(e){e in E.n2.console&&D(E.n2.console,e,(function(t){return b[e]=t,function(...t){Ve("console",{args:t,level:e});const r=b[e];r&&r.apply(E.n2.console,t)}}))}))}ut.__initStatic();const gt=E.n2,mt=1e3;let vt,yt,Et;function _t(){if(!gt.document)return;const e=Ve.bind(null,"dom"),t=St(e,!0);gt.document.addEventListener("click",t,!1),gt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=gt[t]&&gt[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(D(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this,o=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},s=o[r]=o[r]||{refCount:0};if(!s.handler){const n=St(e);s.handler=n,t.call(this,r,n,i)}s.refCount++}catch(e){}return t.call(this,r,n,i)}})),D(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,i=r.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete r.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}function St(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;const n=function(e){try{return e.target}catch(e){return null}}(r);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(r.type,n))return;L(r,"_sentryCaptured",!0),n&&!n._sentryId&&L(n,"_sentryId",V());const i="keypress"===r.type?"input":r.type;(function(e){if(e.type!==yt)return!1;try{if(!e.target||e.target._sentryId!==Et)return!1}catch(e){}return!0})(r)||(e({event:r,name:i,global:t}),yt=r.type,Et=n?n._sentryId:void 0),clearTimeout(vt),vt=gt.setTimeout((()=>{Et=void 0,yt=void 0}),mt)}}const It=E.n2,At="__sentry_xhr_v3__";function Ot(){if(!It.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;D(e,"open",(function(e){return function(...t){const r=Date.now(),n=h(t[0])?t[0].toUpperCase():void 0,i=function(e){if(h(e))return e;try{return e.toString()}catch(e){}}(t[1]);if(!n||!i)return;this[At]={method:n,url:i,request_headers:{}},"POST"===n&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this[At];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Ve("xhr",{args:[n,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?D(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),D(this,"setRequestHeader",(function(e){return function(...t){const[r,n]=t,i=this[At];return i&&h(r)&&h(n)&&(i.request_headers[r.toLowerCase()]=n),e.apply(this,t)}})),e.apply(this,t)}})),D(e,"send",(function(e){return function(...t){const r=this[At];if(r)return void 0!==t[0]&&(r.body=t[0]),Ve("xhr",{args:[r.method,r.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}const Ct=(0,E.Rf)();function bt(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Tt(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Ct))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(bt(Ct.fetch))return!0;let e=!1;const t=Ct.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=bt(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){O&&w.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&D(E.n2,"fetch",(function(e){return function(...t){const{method:r,url:n}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:Rt(t),method:wt(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Rt(t),method:wt(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:r,url:n},startTimestamp:Date.now()};return Ve("fetch",{...i}),e.apply(E.n2,t).then((e=>(Ve("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Ve("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}))}function wt(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Rt(e){return"string"==typeof e?e:e?wt(e,"url")?e.url:e.toString?e.toString():"":""}const Pt=(0,E.Rf)(),Nt=E.n2;let Dt;function Lt(){if(!function(){const e=Pt.chrome,t=e&&e.app&&e.app.runtime,r="history"in Pt&&!!Pt.history.pushState&&!!Pt.history.replaceState;return!t&&r}())return;const e=Nt.onpopstate;function t(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const e=Dt,t=String(r);Dt=t,Ve("history",{from:e,to:t})}return e.apply(this,t)}}Nt.onpopstate=function(...t){const r=Nt.location.href,n=Dt;if(Dt=r,Ve("history",{from:n,to:r}),e)try{return e.apply(this,t)}catch(e){}},D(Nt.history,"pushState",t),D(Nt.history,"replaceState",t)}const xt=["fatal","error","warning","log","info","debug"];function kt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}class Mt{static __initStatic(){this.id="Breadcrumbs"}constructor(e){this.name=Mt.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){if(this.options.console&&function(e){const t="console";Fe(t,e),qe(t,ft)}(jt),this.options.dom&&(Fe("dom",(e=this.options.dom,function(t){let r,n="object"==typeof e?e.serializeAttribute:void 0,i="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;i&&i>1024&&(We&&w.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=1024),"string"==typeof n&&(n=[n]);try{const e=t.event;r=function(e){return!!e&&!!e.target}(e)?I(e.target,{keyAttrs:n,maxStringLength:i}):I(e,{keyAttrs:n,maxStringLength:i})}catch(e){r="<unknown>"}0!==r.length&&Ae().addBreadcrumb({category:`ui.${t.name}`,message:r},{event:t.event,name:t.name,global:t.global})})),qe("dom",_t)),this.options.xhr&&(Fe("xhr",Ht),qe("xhr",Ot)),this.options.fetch&&function(e){const t="fetch";Fe(t,e),qe(t,Tt)}(Bt),this.options.history&&function(e){const t="history";Fe(t,e),qe(t,Lt)}(Ft),this.options.sentry){const e=Ae().getClient();e&&e.on&&e.on("beforeSendEvent",Ut)}var e}}function Ut(e){Ae().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:z(e)},{event:e})}function jt(e){const t={category:"console",data:{arguments:e.args,logger:"console"},level:(r=e.level,"warn"===r?"warning":xt.includes(r)?r:"log"),message:P(e.args," ")};var r;if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${P(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}Ae().addBreadcrumb(t,{input:e.args,level:e.level})}function Ht(e){const{startTimestamp:t,endTimestamp:r}=e,n=e.xhr[At];if(!t||!r||!n)return;const{method:i,url:o,status_code:s,body:a}=n,c={method:i,url:o,status_code:s},u={xhr:e.xhr,input:a,startTimestamp:t,endTimestamp:r};Ae().addBreadcrumb({category:"xhr",data:c,type:"http"},u)}function Bt(e){const{startTimestamp:t,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){const n=e.fetchData,i={data:e.error,input:e.args,startTimestamp:t,endTimestamp:r};Ae().addBreadcrumb({category:"fetch",data:n,level:"error",type:"http"},i)}else{const n=e.response,i={...e.fetchData,status_code:n&&n.status},o={input:e.args,response:n,startTimestamp:t,endTimestamp:r};Ae().addBreadcrumb({category:"fetch",data:i,type:"http"},o)}}function Ft(e){let t=e.from,r=e.to;const n=kt(ke.location.href);let i=t?kt(t):void 0;const o=kt(r);i&&i.path||(i=n),n.protocol===o.protocol&&n.host===o.host&&(r=o.relative),n.protocol===i.protocol&&n.host===i.host&&(t=i.relative),Ae().addBreadcrumb({category:"navigation",data:{from:t,to:r}})}Mt.__initStatic();class qt{static __initStatic(){this.id="LinkedErrors"}constructor(e={}){this.name=qt.id,this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){}preprocessEvent(e,t,r){const n=r.getOptions();ee(Ke,n.stackParser,n.maxValueLength,this._key,this._limit,e,t)}}qt.__initStatic();class Vt{static __initStatic(){this.id="HttpContext"}constructor(){this.name=Vt.id}setupOnce(){}preprocessEvent(e){if(!ke.navigator&&!ke.location&&!ke.document)return;const t=e.request&&e.request.url||ke.location&&ke.location.href,{referrer:r}=ke.document||{},{userAgent:n}=ke.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}Vt.__initStatic();class Gt{static __initStatic(){this.id="Dedupe"}constructor(){this.name=Gt.id}setupOnce(e,t){}processEvent(e){if(e.type)return e;try{if(function(e,t){return!!t&&(!!function(e,t){const r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!$t(e,t)&&!!zt(e,t))))}(e,t)||!!function(e,t){const r=Yt(t),n=Yt(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!$t(e,t)&&!!zt(e,t)))}(e,t))}(e,this._previousEvent))return We&&w.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return this._previousEvent=e}}function zt(e,t){let r=Wt(e),n=Wt(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function $t(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function Yt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Wt(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Gt.__initStatic();let Kt={};ke.Sentry&&ke.Sentry.Integrations&&(Kt=ke.Sentry.Integrations);const Qt={...Kt,...e,...t},Xt="?";function Jt(e,t,r,n){const i={filename:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const Zt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,er=/\((\S*)(?::(\d+))(?::(\d+))\)/,tr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,rr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,nr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ir=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0)=>{const n=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=be.test(r)?r.replace(be,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){n.push(t);break}}if(n.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),Te.test(t[t.length-1].function||"")&&(t.pop(),Te.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(n)}}([30,e=>{const t=Zt.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=er.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=or(t[1]||Xt,t[2]);return Jt(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=tr.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=rr.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Xt;return[r,e]=or(r,e),Jt(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=nr.exec(e);return t?Jt(t[2],t[1]||Xt,+t[3],t[4]?+t[4]:void 0):void 0}]),or=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Xt,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class sr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const ar=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function cr(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${s}`}function ur(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function lr(e,t=[]){return[e,t]}function dr(e,t){const[r,n]=e;return[r,[...n,t]]}function hr(e,t){const r=e[1];for(const e of r)if(t(e,e[0].type))return!0;return!1}function pr(e,t){return(t||new TextEncoder).encode(e)}function fr(e,t){const[r,n]=e;let i=JSON.stringify(r);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[pr(i,t),e]:i.push("string"==typeof e?pr(e,t):e)}for(const e of n){const[t,r]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)o(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(Pe(r))}o(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(i)}function gr(e,t){const r="string"==typeof e.data?pr(e.data,t):e.data;return[H({type:"attachment",length:r.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),r]}const mr={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function vr(e){return mr[e]}function yr(e){if(!e||!e.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}const Er=6e4;const _r=30;function Sr(e,t,r=function(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return le(new sr("Not adding Promise because buffer limit was reached."));const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new de(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{ue(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}(e.bufferSize||_r)){let n={};function i(i){const o=[];if(hr(i,((t,r)=>{const i=vr(r);if(function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)){const n=Ir(t,r);e.recordDroppedEvent("ratelimit_backoff",i,n)}else o.push(t)})),0===o.length)return ue();const s=lr(i[0],o),a=t=>{hr(s,((r,n)=>{const i=Ir(r,n);e.recordDroppedEvent(t,vr(n),i)}))};return r.add((()=>t({body:fr(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&K&&w.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=function(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r&&r["x-sentry-rate-limits"],s=r&&r["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,r]=e.split(":",2),o=parseInt(t,10),s=1e3*(isNaN(o)?60:o);if(r)for(const e of r.split(";"))i[e]=n+s;else i.all=n+s}else s?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?Er:n-t}(s,n):429===t&&(i.all=n+6e4);return i}(n,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof sr)return K&&w.error("Skipped sending event because buffer is full."),a("queue_overflow"),ue();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>r.drain(e)}}function Ir(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let Ar;function Or(e,t=function(){if(Ar)return Ar;if(bt(ke.fetch))return Ar=ke.fetch.bind(ke);const e=ke.document;let t=ke.fetch;if(e&&"function"==typeof e.createElement)try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){We&&w.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Ar=t.bind(ke)}()){let r=0,n=0;return Sr(e,(function(i){const o=i.body.length;r+=o,n++;const s={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Ar=void 0,r-=o,n--,le(e)}}))}const Cr="7";function br(e,t={}){const r="string"==typeof t?t:t.tunnel,n="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r={sentry_key:e.publicKey,sentry_version:Cr,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");var r}(e,n)}`}const Tr=[];function wr(e,t,r){if(r[t.name]=t,-1===Tr.indexOf(t.name)&&(t.setupOnce(pe,Ae),Tr.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,n)=>r(t,n,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign(((t,n)=>r(t,n,e)),{id:t.name});e.addEventProcessor(n)}K&&w.log(`Integration installed: ${t.name}`)}const Rr="Not capturing exception because it's already been captured.";class Pr{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=ar.exec(e);if(!t)return void T((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[r,n,i="",o,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return ur({host:o,pass:i,path:c,projectId:u,port:s,protocol:r,publicKey:n})}(e):ur(e);if(t&&function(e){if(!O)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(w.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(w.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(w.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(w.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}(e.dsn):K&&w.warn("No DSN provided, client will not send events."),this._dsn){const t=br(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){if(W(e))return void(K&&w.log(Rr));let n=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,r))).then((e=>{n=e}))),n}captureMessage(e,t,r,n){let i=r&&r.event_id;const o=p(e)?this.eventFromMessage(String(e),t,r):this.eventFromException(e,r);return this._process(o.then((e=>this._captureEvent(e,r,n))).then((e=>{i=e}))),i}captureEvent(e,t,r){if(t&&t.originalException&&W(t.originalException))return void(K&&w.log(Rr));let n=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then((e=>{n=e}))),n}captureSession(e){"string"!=typeof e.release?K&&w.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ge(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e)))):ue(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&(this._integrations=function(e,t){const r={};return t.forEach((t=>{t&&wr(e,t,r)})),r}(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return K&&w.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){wr(this,e,this._integrations)}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=function(e,t,r,n){const i=yr(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r&&r.sdk);const s=function(e,t,r,n){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:cr(n)},...i&&{trace:H({...i})}}}(e,i,n,t);return delete e.sdkProcessingMetadata,lr(s,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=dr(r,gr(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,r,n){const i=yr(r);return lr({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&t&&{dsn:cr(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const r=`${e}:${t}`;K&&w.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let r=!1,n=!1;const i=t.exception&&t.exception.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(ge(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new de((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r){const n=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),function(e,t,r,n,i){const{normalizeDepth:o=3,normalizeMaxBreadth:s=1e3}=e,a={...t,event_id:t.event_id||r.event_id||V(),timestamp:t.timestamp||(0,se.yW)()},c=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:ae),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=R(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=R(s.value,o));const a=e.request;a&&a.url&&(a.url=R(a.url,o))}(a,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(a,c),void 0===t.type&&function(e,t){const r=E.n2._sentryDebugIds;if(!r)return;let n;const i=Le.get(t);i?n=i:(n=new Map,Le.set(t,n));const o=Object.keys(r).reduce(((e,i)=>{let o;const s=n.get(i);s?o=s:(o=t(i),n.set(i,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=r[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(a,e.stackParser);let u=n;r.captureContext&&(u=me.clone(u).update(r.captureContext)),r.mechanism&&Y(a,r.mechanism);let l=ue(a);const d=i&&i.getEventProcessors?i.getEventProcessors():[];if(u){if(u.getAttachments){const e=[...r.attachments||[],...u.getAttachments()];e.length&&(r.attachments=e)}l=u.applyToEvent(a,r,d)}else l=fe([...d,...he()],a,r);return l.then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.keys(t).forEach((e=>{r.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof o&&o>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Pe(e.data,t,r)}})))},...e.user&&{user:Pe(e.user,t,r)},...e.contexts&&{contexts:Pe(e.contexts,t,r)},...e.extra&&{extra:Pe(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=Pe(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((e=>(e.data&&(e.data=Pe(e.data,t,r)),e)))),n}(e,o,s):e)))}(n,e,t,r,this).then((e=>{if(null===e)return e;const{propagationContext:t}=e.sdkProcessingMetadata||{};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:i,parentSpanId:o,dsc:s}=t;e.contexts={trace:{trace_id:n,span_id:i,parent_span_id:o},...e.contexts};const a=s||function(e,t,r){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=r&&r.getUser()||{},s=H({environment:n.environment||ae,release:n.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",s),s}(n,this,r);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then((e=>e.event_id),(e=>{if(K){const t=e;"log"===t.logLevel?w.log(t.message):w.warn(t)}}))}_processEvent(e,t,r){const n=this.getOptions(),{sampleRate:i}=n,o=Dr(e),s=Nr(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),le(new sr(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,r).then((r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new sr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;const i=function(e,t,r){const{beforeSend:n,beforeSendTransaction:i}=e;return Nr(t)&&n?n(t,r):Dr(t)&&i?i(t,r):t}(n,r,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(m(e))return e.then((e=>{if(!f(e)&&null!==e)throw new sr(r);return e}),(e=>{throw new sr(`${t} rejected with ${e}`)}));if(!f(e)&&null!==e)throw new sr(r);return e}(i,c)})).then((n=>{if(null===n)throw this.recordDroppedEvent("before_send",u,e),new sr(`${c} returned \`null\`, will not send event.`,"log");const i=r&&r.getSession();!o&&i&&this._updateSessionFromEvent(i,n);const s=n.transaction_info;if(o&&s&&n.transaction!==e.transaction){const e="custom";n.transaction_info={...s,source:e}}return this.sendEvent(n,t),n})).then(null,(e=>{if(e instanceof sr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new sr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{K&&w.error("Error while sending event:",e)}));K&&w.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[r,n]=t.split(":");return{reason:r,category:n,quantity:e[t]}}))}}function Nr(e){return void 0===e.type}function Dr(e){return"transaction"===e.type}const Lr="7.85.0";var xr,kr=r(4285);class Mr extends Pr{constructor(e){const t=ke.SENTRY_SDK_SOURCE||(0,kr.S)();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:Lr}],version:Lr},super(e),e.sendClientReports&&ke.document&&ke.document.addEventListener("visibilitychange",(()=>{"hidden"===ke.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,r,n){const i=et(e,t,r&&r.syntheticException||void 0,n);return Y(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),ue(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=tt(e,t,n&&n.syntheticException||void 0,i);return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),ue(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(We&&w.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:r,dsn:n}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!n&&{dsn:cr(n)}},o=function(e){return[{type:"user_report"},e]}(e);return lr(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(We&&w.log("No outcomes to send"));if(!this._dsn)return void(We&&w.log("No dsn provided, will not send outcomes"));We&&w.log("Sending outcomes:",e);const t=function(e,t,r){return lr(t?{dsn:t}:{},[[{type:"client_report"},{timestamp:(0,se.yW)(),discarded_events:e}]])}(e,this._options.tunnel&&cr(this._dsn));this._sendEnvelope(t)}}!function(e){e.development="development",e.sandbox="sandbox",e.production="production",e.staging="staging",e.test="test"}(xr||(xr={}));var Ur=null!=="sandbox"?"sandbox":"development",jr={get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(Ur){case xr.production:return"squareup.com";case xr.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.PCI_CONNECT_API_HOST)},get ASSET_BASE_URL(){return function(e){switch(e){case xr.production:return"https://web.squarecdn.com";case xr.sandbox:return"https://sandbox.web.squarecdn.com";case xr.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(xr[Ur])},get ASSET_URL(){return"local"===this.VERSION?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CONNECT_API_URL(){return"https://connect.".concat(this.API_PUBLIC_HOST)},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return Ur!==xr.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe.html")},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe.html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get METRICS_ERROR_URL(){return"".concat(this.API_URL,"/payments/mtx/error")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PCI_CONNECT_API_HOST(){return"pci-connect.".concat(this.API_PUBLIC_HOST)},get SENTRY_DSN(){switch(Ur){case xr.test:case xr.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe.html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},STATIC_ASSET(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)},get VERSION(){return"1.54.4"},get ANALYTICS_CLIENT_VERSION(){return"1.1.1"},env:Ur},Hr=jr;const Br=-1;async function Fr(e,t,r=new Error("Promise timeout exceeded")){let n=Br;const i=new Promise(((e,i)=>{n=window.setTimeout((()=>{i(r)}),t)})),o=await Promise.race([i,e()]);return window.clearTimeout(n),o}const qr=(e,t)=>Math.min(200*Math.pow(2,e-1)+Math.floor(1e3*Math.random()),t);class Vr extends Error{constructor(e,t,r){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,Vr.prototype)}}class Gr extends Error{constructor(e,t,r){super(`Invalid JSON received (status=${t}; url=${e})`),this.originalErrorMessage=r,this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,Gr.prototype)}}class zr extends Error{constructor(e,t,r){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,zr.prototype)}}var $r;function Yr(e,t){return{body:e,status:t.status,statusText:t.statusText}}function Wr(e){const t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);for(const r in e){const n=e[r];void 0!==n&&t.set(r,n)}return t}async function Kr(e,t,r=1,n=Date.now()){const i=Date.now()-n,{body:o,headers:s={},credentials:a="include",mode:c="cors",timeoutMs:u=1e4,maxAttempts:l=3,maxBackoffMs:d=32e3}=t;let h=null;void 0!==window.AbortController&&null!==window.AbortController&&(h=new window.AbortController);const p={...t,body:null!=o?JSON.stringify(o):null,credentials:a,headers:Wr(s),mode:c,signal:h?h.signal:null};try{const t=await Fr(window.fetch.bind(null,e,p),u,new Vr(r,i,e));return await async function(e,t){let r={};const n=e.status;if(!(n<$r.INTERNAL_SERVER_ERROR))return Yr(r,e);{let i;try{return n!==$r.NO_CONTENT&&(r=await e.json()),Yr(r,e)}catch(r){if(r instanceof Error){const n=r.toString();try{i=await e.text(),i=`${i} ${n}`}catch{i=n}throw new Gr(t,e.status,i)}throw new Gr(t,e.status,JSON.stringify(r))}}}(t,e)}catch(o){if(o instanceof Vr)h?.abort();else{if(o instanceof Gr)throw o;if(r===l)throw new zr(r,i,e)}if(r===l)throw o;const s=qr(r,d);return new Promise((i=>{setTimeout((()=>{i(Kr(e,t,r+1,n))}),s)}))}}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.UNAUTHORIZED=401]="UNAUTHORIZED"}($r||($r={}));const Qr=function(e,t){return Kr(e,{...t,method:"POST"})};var Xr,Jr,Zr,en,tn,rn,nn,on,sn,an,cn,un,ln,dn,hn,pn,fn;r(8836),r(3944),r(6708),r(7368),r(4069),r(4112),r(5940),function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(Xr||(Xr={}));class gn extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;t.length>0&&(r=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(r),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,gn.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}class mn extends gn{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,mn.prototype)}}class vn extends gn{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,vn.prototype)}}class yn extends gn{constructor(){super("The Payment 'locationId' option is not in the correct format."),this.name="InvalidLocationIdError",Object.setPrototypeOf(this,yn.prototype)}}class En extends gn{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,En.prototype)}}class _n extends gn{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,_n.prototype)}}class Sn extends gn{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,Sn.prototype)}}class In extends gn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,In.prototype)}}class An extends gn{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,An.prototype)}}class On extends gn{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,On.prototype)}}class Cn extends gn{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,Cn.prototype)}}class bn extends gn{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,bn.prototype)}}class Tn extends gn{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,Tn.prototype)}toJSON(){return{name:this.name,errors:this.errors.map((e=>{var t={};return["name","message","type","code","token"].forEach((function(r){r in e&&(t[r]=e[r])})),t}))}}}class wn extends gn{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,wn.prototype)}}class Rn extends gn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(e)),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,Rn.prototype)}}class Pn extends gn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,Pn.prototype)}}class Nn extends gn{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,Nn.prototype)}}class Dn extends gn{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,Dn.prototype)}}r(7890),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(Jr||(Jr={})),function(e){e.CARD_NUMBER="cardNumber",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.POSTAL_CODE="postalCode"}(Zr||(Zr={})),function(e){e.CARD_INPUT="input",e.CARD_INPUT_FOCUS="input.is-focus",e.CARD_INPUT_PLACEHOLDER="input::placeholder",e.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",e.CARD_INPUT_ERROR="input.is-error",e.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",e.CARD_COMPONENT=".input-container",e.CARD_COMPONENT_FOCUS=".input-container.is-focus",e.CARD_COMPONENT_ERROR=".input-container.is-error",e.CARD_INPUT_HELPER_TEXT=".message-text",e.CARD_INPUT_HELPER_ICON=".message-icon",e.CARD_INPUT_ERROR_TEXT=".message-text.is-error",e.CARD_INPUT_ERROR_ICON=".message-icon.is-error"}(en||(en={})),function(e){e.GIFT_CARD_NUMBER="giftCardNumber"}(tn||(tn={})),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(rn||(rn={})),function(e){e.UNKNOWN="Unknown"}(nn||(nn={})),function(e){e.GIFT="Gift"}(on||(on={}));class Ln extends gn{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(Zr),...Object.values(tn)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,Ln.prototype)}}class xn extends gn{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,xn.prototype)}}class kn extends gn{constructor(e,t,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,kn.prototype)}}class Mn extends gn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,Mn.prototype)}}class Un extends gn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'accepted property: "'.concat(t,'" values are "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,Un.prototype)}}class jn extends gn{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,jn.prototype)}}class Hn extends gn{constructor(){super("A redirect url is always required for requests. This must also be a secure link."),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,Hn.prototype)}}class Bn extends gn{constructor(){super("Non function passed as shouldTokenize checker"),this.name="CashAppPayInvalidShouldTokenizeError",Object.setPrototypeOf(this,Bn.prototype)}}class Fn extends gn{constructor(e,t){super("amount '".concat(e,"' in ").concat(t," is not expressed in a valid format")),this.name="InvalidCurrencyFormatError",Object.setPrototypeOf(this,Fn.prototype)}}class qn extends gn{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,qn.prototype)}}class Vn extends gn{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,Vn.prototype)}}class Gn extends gn{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,Gn.prototype)}}class zn extends gn{constructor(e,t){var r=t||(null==e?void 0:e.field);super("Method unsupported: ".concat(null==e?void 0:e.message).concat(r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,zn.prototype)}}class $n extends gn{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,$n.prototype)}}class Yn extends gn{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before you can call this method.")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,Yn.prototype)}}class Wn extends gn{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,Wn.prototype)}}class Kn extends gn{constructor(e,t){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,Kn.prototype)}}class Qn extends gn{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,Qn.prototype)}}class Xn extends gn{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,Xn.prototype)}}class Jn extends gn{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Jn.prototype)}}class Zn extends gn{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,Zn.prototype)}}class ei extends gn{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,ei.prototype)}}class ti extends gn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,ti.prototype)}}class ri extends gn{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,ri.prototype)}}!function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(sn||(sn={})),function(e){e.BLACK="black",e.GREEN="mint",e.MINT="mint"}(an||(an={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}(cn||(cn={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(un||(un={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(ln||(ln={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}(dn||(dn={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(hn||(hn={})),function(e){e.MINT="mint",e.WHITE="white"}(pn||(pn={})),function(e){e.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",e.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(fn||(fn={}));var ni,ii,oi,si,ai,ci,ui,li,di,hi,pi,fi,gi,mi,vi,yi=["borderColor","borderRadius","borderWidth"],Ei=["borderColor","borderWidth"],_i=["color"],Si=["color"];!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(ni||(ni={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(ii||(ii={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(oi||(oi={})),function(e){e.ROUND="round",e.SEMIROUND="semiround"}(si||(si={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(ai||(ai={})),function(e){e.DARK="dark",e.LIGHT="light"}(ci||(ci={})),function(e){e.FULL="full",e.STATIC="static"}(ui||(ui={})),function(e){e.ONTOKENIZATION="ontokenization",e.CUSTOMER_INTERACTION="customerInteraction",e.CUSTOMER_DISMISSED="customerDismissed"}(li||(li={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(di||(di={})),function(e){e.STATIC="static",e.FILL="fill"}(hi||(hi={})),function(e){e.LONG="long",e.SHORT="short"}(pi||(pi={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(fi||(fi={})),function(e){e.APPLE_PAY="Apple Pay",e.AFTERPAY_CLEARPAY="AfterpayClearpay",e.CARD="Card",e.GOOGLE_PAY="Google Pay",e.GIFT_CARD="Gift Card",e.ACH="ACH",e.CASH_APP_PAY="Cash App Pay"}(gi||(gi={})),function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(mi||(mi={}));class Ii{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}function Ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(t).map((e=>{var[t,r]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))})).join("&");return encodeURI(e)+(r.length>0?"?".concat(r):"")}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(vi||(vi={}));var Oi=new RegExp(/^[\w.-]+$/i),Ci=new RegExp(/sq0at/i);function bi(e){return Hr.env===e}function Ti(){return bi(xr.production)}var wi=Pi(60),Ri=Ni(60);function Pi(e){return 1e3*e}function Ni(e){return e*wi}var Di=function(e){return e*Ri},Li=/^_/g,xi=/(?!^)([A-Z])/g,ki=/[\s_]+(?=[A-Za-z])/g;function Mi(e){return"JPY"===e.toUpperCase()?0:2}var Ui,ji,Hi,Bi,Fi={convertLocaleToUnderscore:function(e){return e.replace(/-/,"_")},cssProperty:function(e){return e.replace(Li,"-").replace(xi," $1").replace(ki,"-").toLowerCase()},delay:function(e){return new Promise((t=>setTimeout(t,e)))},decimalPlaces:Mi,formatCSSKeyValuePair:function(e,t){return"".concat(e,": ").concat(t,";")},enumValues:function(e){return Object.keys(e).map((t=>e[t])).filter((function(e){return"string"==typeof e}))},isInstanceOf:function(e,t){return t.some((function(t){return e instanceof t}))},isStaging:function(){return bi(xr.staging)},isProduction:Ti,isValidUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},requestId:function(){return Date.now()+Number.parseFloat(Math.random().toFixed(8))},url:Ai,versionedUrl:function(e){return Ai(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},paymentRequestAmountToMoneyAmount:function(e,t){var r=Mi(t),n="^(-?[0-9]+)";r>0&&(n="".concat(n,"(?:\\.([0-9]{1,").concat(r,"})[0-9]*)?")),n="".concat(n,"$");var i=e.match(n);if(!i)throw new Fn(e,t);var o=i[1];if(r>0){var s=i[2]||"";o=o+s+"0".repeat(r-s.length)}return Number(o)},moneyAmountToPaymentRequestAmount:function(e,t){var r=Mi(t);return(e/Math.pow(10,r)).toFixed(r)},moneyAmountToInternationalizedCurrency:function(e,t,r){var n=Mi(t),i=e/Math.pow(10,n);return new Intl.NumberFormat(r,{currency:t,style:"currency"}).format(i)}};!function(e){e.CanUseOverrideStrings="can_use_override_strings",e.CanUseInterac="can_use_interac",e.CanUseAchAuth="can_use_ach_auth",e.ClientLogLevel="client_log_level",e.RecordErrorMetrics="record_error_metrics"}(Ui||(Ui={})),function(e){e.Control="C",e.TreatmentA="T1"}(ji||(ji={})),function(e){e.NoSupport="NO_SUPPORT",e.Supported="SUPPORTED",e.Required="REQUIRED",e.Legacy="LEGACY"}(Hi||(Hi={})),function(e){e.None="NONE",e.Debug="DEBUG"}(Bi||(Bi={}));var qi,Vi,Gi=Hr.SENTRY_DSN;class zi{constructor(e){var t;t=e.useGlobalHandlers?new Qt.GlobalHandlers:new Qt.GlobalHandlers({onerror:!1,onunhandledrejection:!1});var r=[new J,new q,new Qt.TryCatch,new Qt.Breadcrumbs,t,new Qt.LinkedErrors,new Qt.HttpContext],n="web-payments-sdk@".concat(Hr.VERSION),i={beforeSend:(t,r)=>{var n;if(!Hr.ENABLE_ERROR_LOGGING)return console.error(t.exception),null!==(n=t.exception)&&void 0!==n&&n.values&&t.exception.values.forEach((e=>{console.error(e)})),null;if(!r)return t;var i=r.originalException;if(void 0!==this.featureFlagHandler&&this.featureFlagHandler.isActive(Ui.RecordErrorMetrics)){var o=null==i?void 0:i.toString();i instanceof Error&&(o=i.stack);var s="applicationID: ".concat(e.applicationId,", url: ").concat(e.applicationUrl,", source: ").concat(e.sourceName,", error: ").concat(o);Qr(Hr.METRICS_ERROR_URL,{body:{sdk_version:Hr.VERSION,error_message:s||""}}).catch((()=>{}))}return t},dsn:Gi,dist:"".concat(Hr.VERSION,"-").concat(Hr.env),environment:Hr.env,integrations:r,release:n,stackParser:ir,transport:e.transport||Or},o=new Mr(i);this.hub=new _e(o),this.hub.configureScope((t=>{t.setTag("applicationId",e.applicationId),t.setTag("applicationUrl",e.applicationUrl),t.setTag("source",e.sourceName),t.setTag("version",Hr.VERSION)})),e.useGlobalHandlers&&Ie(this.hub)}setFeatureFlagHandler(e){this.featureFlagHandler=e}setAvt(e){this.hub.setUser({id:e}),this.hub.configureScope((t=>{t.setTag("avt",e)}))}setSessionId(e){this.hub.configureScope((t=>{t.setTag("sessionId",e)}))}setInstanceId(e){this.hub.configureScope((t=>{t.setTag("instanceId",e)}))}captureException(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fi.isInstanceOf(e,[zr,Vr])||(e instanceof Gr&&this.hub.addBreadcrumb({category:"invalid json error message",message:e.originalErrorMessage,level:"info"}),this.hub.withScope((r=>{Object.entries(t).forEach((e=>{var[t,n]=e;r.setTag(t,n)})),this.hub.captureException(e)})))}}!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(qi||(qi={})),function(e){e.UNKNOWN="UNKNOWN"}(Vi||(Vi={}));var $i,Yi={[Vi.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}};!function(e){e.EXPIRED_PLAID_SESSION="EXPIRED_PLAID_SESSION",e.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID="INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID",e.UNKNOWN="UNKNOWN"}($i||($i={}));var Wi,Ki,Qi={EXPIRED_PLAID_SESSION:{message:"The plaid session was expired. Please try again.",type:"EXPIRED_PLAID_SESSION"},INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID:{message:"Invalid plaid bank account id selected",type:"INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"}},Xi={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(Wi||(Wi={}));class Ji extends gn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,Ji.prototype)}}function Zi(){return new ti([Xi.UNKNOWN])}!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(Ki||(Ki={}));var eo={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},to={message:"The requested resource was not found.",type:"NOT_FOUND"},ro={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},no={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},io={message:"Request not authorized.",type:"UNAUTHORIZED"},oo={message:"An unknown error has occurred",type:"UNKNOWN"};class so extends gn{constructor(e){super(e),this.name="InternalError",Object.setPrototypeOf(this,so.prototype)}}class ao extends gn{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){switch(e){case $r.UNAUTHORIZED:return io;case $r.NOT_FOUND:return to;case $r.TOO_MANY_REQUESTS:return no;case $r.INTERNAL_SERVER_ERROR:return eo;case $r.SERVICE_UNAVAILABLE:return ro;default:return oo}}(t);super("".concat(i.message," (message=").concat(r,"; url=").concat(e,")"),n),this.name="InternalHttpError",Object.setPrototypeOf(this,ao.prototype)}}class co extends gn{constructor(e,t){super("".concat(e," (payment_method=").concat(t,")")),this.name="InternalPaymentMethodError",Object.setPrototypeOf(this,co.prototype)}}class uo extends gn{constructor(e,t,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,uo.prototype)}}function lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ho(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var po={HttpRequestTimeoutError:Vr,HttpRequestInvalidJsonError:Gr,HttpRequestNetworkError:zr,InternalError:so,InternalHttpError:ao,InternalPaymentMethodError:co,InternalTimeoutError:uo,InternalValidationError:Ji};function fo(e){return Object.values(po).some((t=>e instanceof t))}var go,mo,vo,yo,Eo,_o,So,Io,Ao,Oo={AfterpayAmountOutsideLimitsError:An,AfterpayMerchantError:Cn,AfterpayRequestError:In,AfterpayUnsupportedCurrencyError:On,BrowserNotSupportedError:Vn,ElementNotFoundError:wn,InvalidCurrencyFormatError:Fn,InvalidElementTypeError:Kn,InvalidEventListenerCallbackError:Nn,InvalidOptionError:Dn,InvalidPaymentRequestError:Rn,InvalidPaymentRequestUpdateError:Pn,PaymentMethodUnsupportedError:zn,PlaidMissingNameError:En,TokenizationError:ti,UnexpectedError:ri,VerifyBuyerError:Tn,WebSdkEmbedError:Gn},Co=ho(ho(ho({},Oo),po),{},{AfterpayInvalidPaymentRequestError:bn,AfterpayOnTokenizeListenerError:_n,InvalidApplicationIdError:mn,InvalidInputStylePropertyError:Xn,InvalidInputStyleValueError:Jn,InvalidStylesError:ei,PaymentMethodAlreadyAttachedError:$n,PaymentMethodAlreadyDestroyedError:Wn,PaymentMethodMissingListener:Sn,PaymentMethodNotAttachedError:Yn,SqError:gn}),bo=/[$()*+.?[\\\]^{|}]/g,To=new RegExp(bo.source),wo=function(e){return e&&To.test(e)?e.replace(bo,"\\$&"):e||""};!function(e){e.AttachStart="ATTACH:START",e.AttachOK="ATTACH:OK",e.AttachError="ATTACH:ERROR",e.BuildStart="BUILD:START",e.BuildOK="BUILD:OK",e.BuildError="BUILD:ERROR",e.ACHAuthStart="ACH_AUTH:START",e.ACHAuthOk="ACH_AUTH:OK",e.ACHAuthError="ACH_AUTH:ERROR",e.ACHAuthCanceled="ACH_AUTH:CANCEL",e.CashAppPayClickValidating="CASH_APP_PAY_CLICK:VALIDATING",e.CashAppPayClickInvalid="CASH_APP_PAY_CLICK:INVALID",e.CashAppPayClickError="CASH_APP_PAY_CLICK:ERROR",e.CashAppPayAuthStart="CASH_APP_PAY_AUTH:START",e.FirstInteraction="FIRST_INTERACTION:OK",e.GetProductInformationStart="GET_PRODUCT_INFORMATION:START",e.GetProductInformationOK="GET_PRODUCT_INFORMATION:OK",e.GetProductInformationError="GET_PRODUCT_INFORMATION:ERROR",e.InitializeStart="INITIALIZATION:START",e.InitializeOK="INITIALIZATION:OK",e.InitializeError="INITIALIZATION:ERROR",e.LoadOK="LOAD:OK",e.MainIframeOK="MAIN_IFRAME:OK",e.NonceStart="NONCE:START",e.NonceOK="NONCE:OK",e.NonceError="NONCE:ERROR",e.VerificationStart="VERIFICATION:START",e.VerificationOK="VERIFICATION:OK",e.VerificationError="VERIFICATION:ERROR",e.AchMissingRequiredOAuthParameters="ACH_MISSING_REQUIRED_OAUTH_PARAMETERS",e.VisibilityHidden="VISIBILITY:HIDDEN",e.VisibilityVisible="VISIBILITY:VISIBLE"}(go||(go={})),function(e){e.ExternalSessionStart="EXTERNAL_SESSION:START",e.ExternalSessionOK="EXTERNAL_SESSION:OK",e.ExternalSessionError="EXTERNAL_SESSION:ERROR",e.ExternalSessionCancel="EXTERNAL_SESSION:CANCEL",e.ShippingAddressChangeOK="SHIPPING_ADDRESS_CHANGE:OK",e.ShippingOptionChangeOK="SHIPPING_OPTION_CHANGE:OK",e.AfterpayCreateCheckoutStart="AFTERPAY_CREATE_CHECKOUT:START",e.AfterpayCreateCheckoutOK="AFTERPAY_CREATE_CHECKOUT:OK",e.AfterpayCreateCheckoutError="AFTERPAY_CREATE_CHECKOUT:ERROR"}(mo||(mo={})),function(e){e.Clear="CLEAR",e.ConfigUpdated="CONFIG_UPDATED",e.Configured="CONFIGURED",e.Destroyed="DESTROYED",e.Detached="DETACHED",e.EventListenerAdded="EVENT_LISTENER_ADDED",e.EventListenerOnCompleteResponse="EVENT_LISTENER_ON_COMPLETE_RESPONSE",e.Focused="FOCUSED",e.OverrideStrings="OVERRIDE_STRINGS",e.RecalculatedSize="RECALCULATED_SIZE",e.SetLocale="SET_LOCALE",e.SetError="SET_ERROR"}(vo||(vo={})),function(e){e.IframeMessengerTimeoutError="IFRAME_MESSENGER_TIMEOUT_ERROR",e.InvalidRedirectURI="INVALID_REDIRECT_URI"}(yo||(yo={})),function(e){e.ExperimentInteraction="EXPERIMENT_INTERACTION"}(Eo||(Eo={})),function(e){e.GET_PRODUCT_INFORMATION="GET_PRODUCT_INFORMATION",e.LOAD="LOAD",e.MAIN_IFRAME="MAIN_IFRAME",e.NONCE="NONCE"}(_o||(_o={})),function(e){e.ATTACH="ATTACH",e.BUILD="BUILD",e.INITIALIZATION="INITIALIZATION"}(So||(So={})),function(e){e.START="START",e.OK="OK",e.ERROR="ERROR"}(Io||(Io={})),function(e){e.Ach="ACH",e.Afterpay="Afterpay",e.App="WebSDK",e.ApplePay="Apple Pay",e.Card="Card",e.CashApp="Cash App",e.CashAppPayV1="Cash App Pay V1",e.GooglePay="Google Pay",e.Masterpass="Masterpass",e.GiftCard="Gift Card",e.Fields="Fields",e.PaymentRequest="Payment Request"}(Ao||(Ao={}));var Ro,Po={CARD_NONCE_ENDPOINT:new RegExp(wo(Hr.CARD_NONCE_ENDPOINT)),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(wo(Hr.GET_PRODUCT_INFORMATION_ENDPOINT)),LIBRARY_RESOURCE:new RegExp("".concat(wo(Hr.ASSET_BASE_URL),"/([\\w\\d.-]*/)?square\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(wo(Hr.ASSET_URL),"/main-iframe"))};!function(e){e.navigation="navigation",e.fetch="fetch",e.iframe="iframe",e.script="script"}(Ro||(Ro={}));var No=new Set(Object.values(vo)),Do=new Set([go.InitializeOK,Eo.ExperimentInteraction,yo.IframeMessengerTimeoutError]);r(4908);var Lo,xo,ko,Mo,Uo={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:"",toString:()=>""};function jo(){if(s.windowLocation===s.windowParentLocation)return s.windowLocation;var e=s.documentReferrer;return e&&0!==e.length?(Lo||(Lo=document.createElement("a")),Lo.href="".concat(e),{hash:Lo.hash,host:Lo.host,hostname:Lo.hostname,href:Lo.href,origin:Lo.origin,pathname:Lo.pathname,port:Lo.port,protocol:Lo.protocol,search:Lo.search,toString(){return this.href}}):Uo}function Ho(e,t){var r={};return Object.keys(e).forEach((n=>{"object"==typeof e[n]&&!Array.isArray(e[n])&&t[n]?r[n]=Ho(e[n],t[n]):r[n]=t[n]||e[n]})),r}!function(e){e.CA="CA",e.GB="GB",e.US="US"}(xo||(xo={})),function(e){e.en="en",e.ja="ja",e.fr="fr",e.es="es"}(ko||(ko={})),function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES"}(Mo||(Mo={}));var Bo={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta regalo válido."},helperText:{giftCardNumber:"Introduce el número de tu tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte-cadeau valide."},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte-cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},placeholderText:{cardNumber:"Numéro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"無利息の4回払い",today:"今日",weeks:"週間"}},cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},helperText:{giftCardNumber:"ギフトカード番号を入力してください"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},Fo={en:Mo.enUS,es:Mo.esES,fr:Mo.frFR,ja:Mo.jaJP},qo=Fo[ko.en];class Vo{constructor(e){this.currentLocale=qo,this.currentTranslations=Bo[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=this.getLanguageFromLocale(e),r=this.getRegionFromLocale(e),n=this.currentLocale;if(Bo[e])this.currentLocale=e;else{if(!ko[t])return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:n};this.currentLocale=Fo[t]}this.currentTranslations=Bo[this.currentLocale];var i=this.getRegionFromLocale(this.currentLocale);return r&&i&&r.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:n}:{newLocale:this.currentLocale,previousLocale:n}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?Ho(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var Go="INVALID_VALUE",zo="SANITIZED",$o=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),Yo=new Set(["error","shippingErrors","lineItems","total","shippingOptions","taxLineItems","shippingLineItems","discounts"]),Wo=new Set([...Yo.values(),"eventName"]),Ko=new Set(["includeInputLabels","postalCode","style"]),Qo=new Set(["includeInputLabels","style"]),Xo=new Set(["lineItems","total","shippingOptions","shippingContact"]),Jo=new Set(["buttonColor","buttonSizeMode","buttonType"]),Zo=new Set(["shape","size","values","theme","width"]),es=fs(sn),ts=fs(Jr),rs=fs(rn),ns=fs(mi),is=fs(Zr),os=fs(tn),ss=fs(Mo),as=fs(di),cs=fs(hi),us=fs(pi),ls=fs(ai),ds=fs(si),hs=fs(ci),ps=fs(ui);function fs(e){return new Set(Object.values(e))}function gs(e){return JSON.stringify({value:e})}function ms(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,s]=e;if(t.has(o)){var a=s;r.has(o)?a=zo:n[o]&&(a=n[o].has(s)?s:Go),i[o]=a}})),JSON.stringify(i)}function vs(e){return ms(e,Zo,void 0,{shape:ds,size:ls,values:hs,theme:hs,width:ps})}var ys=function(e,t,r){switch(e){case vo.Configured:case vo.ConfigUpdated:return function(e,t){switch(e){case Ao.Card:case Ao.GiftCard:return function(e,t){return ms(t,e===Ao.Card?Ko:Qo)}(e,t);case Ao.GooglePay:return function(e){return ms(e,Jo,void 0,{buttonColor:as,buttonSizeMode:cs,buttonType:us})}(t);case Ao.PaymentRequest:return function(e){return ms(e,$o,Xo)}(t);case Ao.CashAppPayV1:return vs(t)}return Go}(t,r);case vo.Focused:return gs(function(e,t){if("string"!=typeof t)return Go;switch(e){case Ao.Card:if(is.has(t))return t;break;case Ao.GiftCard:if(os.has(t))return t}return Go}(t,r));case vo.SetLocale:return gs(function(e){return"string"!=typeof e?Go:ss.has(e)?e:Go}(r));case vo.EventListenerAdded:return gs(function(e,t){if("string"!=typeof t)return Go;switch(e){case Ao.Ach:if(es.has(t))return t;break;case Ao.Card:if(ts.has(t))return t;break;case Ao.GiftCard:if(rs.has(t))return t;break;case Ao.PaymentRequest:if(ns.has(t))return t}return Go}(t,r));case vo.EventListenerOnCompleteResponse:return function(e,t){return e===Ao.PaymentRequest?function(e){return ms(e,Wo,Yo,{eventName:ns})}(t):Go}(t,r);default:return""}};function Es(e,t){return null!==e.document.body&&void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function _s(e,t){return Boolean(e.querySelector(t))}function Ss(e,t){return void 0!==e[t]}r(1804);var Is=function(e){var t,r=Ss(e,"angular"),n=_s(e.document,"[ng-version]")||Ss(e,"getAllAngularRootElements")||Ss(e,"getAngularVersion"),i=Ss(e,"bootstrap"),o=Ss(e,"Ember"),s=Ss(e,"jQuery"),a=_s(e.document,'form[action*="paypal.com"]'),c=function(e){return Es(e,(function(e){return e.__k||e._component||e.__c?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=_s(e.document,"*[data-reactroot]");if(t)return t;return Es(e,(function(e){return e._reactRootContainer?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=Ss(e,"__NUXT__")||Ss(e,"$nuxt"),r=Ss(e,"__VUE__");if(r||t)return r||t;return Es(e,(function(e){return e.__vue__?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:n,angularJS:r,bootstrap:i,ember:o,jquery:s,nextJS:Ss(e,"__NEXT_DATA__")&&void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:a,preact:c,react:u,vue:l};return Object.fromEntries(Object.entries(d).filter((e=>{var[t,r]=e;return!0===r})))};function As(e,t){var r=s.windowPerformance;if(!r||"function"!=typeof r.getEntriesByType)return null;var n=function(e,t,r){var n=e.filter((e=>e.initiatorType===t&&r.test(e.name)));return n[n.length-1]}([...r.getEntriesByType("resource"),...r.getEntriesByType("navigation")],e,t);return n?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(n)):null}var Os=function(e){switch(e){case _o.GET_PRODUCT_INFORMATION:return As(Ro.fetch,Po.GET_PRODUCT_INFORMATION_ENDPOINT);case _o.MAIN_IFRAME:return As(Ro.navigation,Po.MAIN_IFRAME_RESOURCE);case _o.LOAD:return As(Ro.script,Po.LIBRARY_RESOURCE);case _o.NONCE:return As(Ro.fetch,Po.CARD_NONCE_ENDPOINT);default:return null}};function Cs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ts,ws=Hr.METRICS_URL,Rs=Hr.METRICS_V2_URL;class Ps{constructor(e,t){this.sdkVersion=Hr.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1,this.logVisibilityEvent=this.logVisibilityEvent.bind(this),this.flushAllMetrics=this.flushAllMetrics.bind(this)}setAvt(e){this.avt=e}logEvent(e,t,r,n){try{var i=this.getMetricsLoggerBody(e,t,r,n);if(this.session=i.session,this.disableBeacon||!s.windowNavigationBeacon||!s.documentVisibilityState)return void Qr(ws,{body:i}).catch((e=>{this.errorLogger.captureException(e)}));this.metricsBuffer.push(i),e.event!==go.NonceOK&&e.event!==vo.Destroyed||this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",this.logVisibilityEvent),document.addEventListener("visibilitychange",this.flushAllMetrics),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))}catch(e){this.errorLogger.captureException(e)}}clearEventListener(){document.removeEventListener("visibilitychange",this.logVisibilityEvent),document.removeEventListener("visibilitychange",this.flushAllMetrics)}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(Is(window))),this.jsFramework}eventDuration(e,t){var[r,n]=e.event.split(":");if(r in So){var i;if(r===So.INITIALIZATION?i=r:t&&(i="".concat(r,":").concat(t)),!i)return null;if(n===Io.START){var o=Date.now();return this.manualTelemetryStarts[i]=o,null}if(n===Io.OK||n===Io.ERROR){var s=this.manualTelemetryStarts[i];return void 0===s?null:(delete this.manualTelemetryStarts[i],Date.now()-s)}}return n!==Io.START&&r in _o?Os(r):null}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(Rs,e)}catch(e){e instanceof TypeError&&"Illegal invocation"===e.message||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Qr(Rs,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t,r){var n=bs(bs({},this.applicationData),{},{instanceId:e,sessionId:t});return r&&(n.paymentMethodTrackingId=r),n}getMetricsLoggerBody(e,t,r,n){var i,o={origin:jo().origin},a={innerHeight:s.windowInnerHeight,innerWidth:s.windowInnerWidth,language:s.windowNavigationLanguage},c=this.eventDuration(e,n),{event:u,eventSource:l,eventConfigurationValues:d,internalConfigurationValues:h}=e,p=this.sdkVersion,f=this.metricsSession(t,r,n),g={appLocation:o,avt:this.avt,browserData:a,event:u,eventSource:l,paymentMethodTrackingId:n,sdkVersion:p,session:f};return void 0!==d&&(i=u,No.has(i))&&(g.eventConfigurationValues=ys(u,l,d)),void 0!==h&&function(e){return Do.has(e)}(u)&&(g.internalConfigurationValues=JSON.stringify(h)),c&&(g.duration=c),u===go.InitializeOK&&(g.jsFramework=this.getJSFrameworkValue()),g}logVisibilityEvent(){var e={event:"visible"===s.documentVisibilityState?go.VisibilityVisible:go.VisibilityHidden,eventSource:Ao.App},t=this.getMetricsLoggerBody(e,this.session.instanceId,this.session.sessionId,this.session.paymentMethodTrackingId);this.metricsBuffer.push(t)}flushAllMetrics(){"hidden"===s.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)}}r(2356),function(e){e.ACH="ACH",e.AFTERPAY="AFTERPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP_PAY_V1="CASH_APP_PAY_V1",e.GOOGLE_PAY="GOOGLE_PAY"}(Ts||(Ts={})),Hr.HYDRATION_ENDPOINT;var Ns="UPDATE_SESSION";class Ds{constructor(e,t){this.errorLogger=e,this.messenger=t}}var Ls={[Ui.CanUseInterac]:{false:ji.Control,true:ji.TreatmentA},[Ui.CanUseOverrideStrings]:{false:ji.Control,true:ji.TreatmentA},[Ui.RecordErrorMetrics]:{false:ji.Control,true:ji.TreatmentA},[Ui.CanUseAchAuth]:{[Hi.NoSupport]:ji.Control,[Hi.Supported]:ji.TreatmentA,[Hi.Required]:ji.TreatmentA},[Ui.ClientLogLevel]:{[Bi.None]:ji.Control,[Bi.Debug]:ji.TreatmentA}};class xs{constructor(e){this.featureFlagValues=e}isActive(e){return this.experimentGroup(e)!==ji.Control}experimentGroup(e){return this.featureFlagValueExperimentGroup(e)}featureFlagValueExperimentGroup(e){var t=this.featureFlagValues[e];return Ls[e][t]||ji.Control}}function ks(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ms(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ks(o,n,i,s,a,"next",e)}function a(e){ks(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Us,js="LOCALE_CHANGED_EVENT";class Hs extends Ds{constructor(e,t,r,n,i,o,s,a,c,u){super(e,t),this.session=n,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=r,this.eventTarget=s,this.featureFlagHandler=new xs(a),this.featureFlagValues=a,this.isTestMerchant=c,this.analyticsManager=u}addLocaleChangedListener(e){this.eventTarget.addEventListener(js,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(js,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(js,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(Ns,{session:this.session.serialize()})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(js,r),this.messenger.sendOneWayMessage(Ns,{session:this.session.serialize()}),t}updateSession(e){var t=this;return Ms((function*(){t.session.setSessionId(e),t.errorLogger.setSessionId(e),t.analyticsManager.beginGenerateToken(),yield t.messenger.sendOneWayMessage(Ns,{session:t.session.serialize()})}))()}refreshWithCurrentAnalyticsToken(){var e=this;return Ms((function*(){try{var t=yield e.analyticsManager.retrieveCurrentToken();t&&(e.session.setAnalyticsToken(t),yield e.messenger.sendOneWayMessage(Ns,{session:e.session.serialize()}))}catch(t){e.session.locationId&&e.errorLogger.captureException(t)}}))()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.INVALID_CONFIG="INVALID_CONFIG",e.UNKNOWN="UNKNOWN",e.UNABLE_TO_LOAD="UNABLE_TO_LOAD"}(Us||(Us={}));var Bs,Fs={message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},qs={message:"Device does not support Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions",type:"DEVICE_NOT_SUPPORTED"},Vs={message:"Browser does not support Google Pay. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},Gs={message:"Configuration is invalid.",type:"INVALID_CONFIG"},zs={message:"Temporarily unable to register the payment method.",type:"UNABLE_TO_LOAD"},$s={message:"An unknown error has occurred.",type:"UNKNOWN"};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.NOT_ONBOARDED="NOT_ONBOARDED",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(Bs||(Bs={}));var Ys={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: https://developer.squareup.com/reference/sdks/web/payments/objects/Payments",type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#production-configuration",type:"DOMAIN_NOT_REGISTERED"}};class Ws extends gn{constructor(e,t,r){var n="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");r&&(n+=" and must be a(n) ".concat(r)),super("".concat(n,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,Ws.prototype)}}class Ks extends gn{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,Ks.prototype)}}class Qs{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0;n<r.length;n++)r[n]===t&&(r.splice(n,1),n--)}dispatchEvent(e,t){if(e in this.listeners)for(var r=new Ii(e,t),n=[...this.listeners[e]],i=0,o=n.length;i<o;i++)try{n[i](r)}catch(e){console.error(e)}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var Xs=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};class Js{constructor(e,t,r,n){this.metricsLogger=e,this.eventSource=r,this.session=t,this.paymentMethodTrackingId=n}logEvent(e,t,r){var n={event:e,eventSource:this.eventSource};t&&(n.eventConfigurationValues=t),r&&(n.internalConfigurationValues=r);var{instanceId:i,sessionId:o}=this.session.serialize();return this.metricsLogger.logEvent(n,i,o,this.paymentMethodTrackingId)}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}}var Zs,ea=Di(2);r(5794),function(e){e[e.DETACHED=0]="DETACHED",e[e.ATTACHED=1]="ATTACHED",e[e.DESTROYED=2]="DESTROYED"}(Zs||(Zs={}));var ta=[$n,Wn,Yn,ti];function ra(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function na(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ra(o,n,i,s,a,"next",e)}function a(e){ra(o,n,i,s,a,"throw",e)}s(void 0)}))}}class ia{constructor(e){this.status=Zs.DETACHED,this.eventTarget=new Qs,this.eventBuffer={},this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}get featureFlagHandler(){return this.context.featureFlagHandler}static withErrorCapture(e,t,r){return na((function*(){try{return yield Promise.resolve(e(...arguments))}catch(e){throw Fi.isInstanceOf(e,ta)?e:(t.captureException(e),new ri("using ".concat(r)))}}))}addEventListener(e,t){this.eventTarget.addEventListener(e,t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((t=>this.eventTarget.dispatchEvent(e,t))),this.eventBuffer[e]=[])}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve(!0)}detach(){return Promise.resolve(!0)}dispatchEvent(e,t){this.hasEventListener(e)?this.eventTarget.dispatchEvent(e,t):(e in this.eventBuffer||(this.eventBuffer[e]=[]),this.eventBuffer[e].push(t))}throwIfDestroyed(){if(this.status===Zs.DESTROYED)throw new Wn(this.methodType)}throwIfDestroyedOrAlreadyAttached(){if(this.throwIfDestroyed(),this.status===Zs.ATTACHED)throw new $n(this.methodType)}throwIfDestroyedOrNotAttached(){if(this.throwIfDestroyed(),this.status!==Zs.ATTACHED)throw new Yn(this.methodType)}}var oa,sa={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};class aa{constructor(e){this.id=Xs(),this.context=e}request(e,t){return this.context.messenger.request(e,{featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession(),body:t})}initializeMessageBus(e){var t=this,r=function(e){t.context.messenger.onMessage({listener(t){e(t)},messageType:"".concat(n,":").concat(t.id)})};for(var[n,i]of Object.entries(e))r(i)}}function ca(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}!function(e){e.CREATE_OAUTH_PLAID_LINK_SESSION="CREATE_OAUTH_PLAID_LINK_SESSION",e.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"}(oa||(oa={}));var ua=new Set(["ITEM_ERROR"]),la=new Set(["en","es"]),da=["US"];r(3108);class ha extends Error{constructor(e,t,r){super(`error loading script ${e}: ${t} ${r?r.toString():""}`),this.name="ScriptLoaderError",Object.setPrototypeOf(this,ha.prototype)}}const pa={};function fa(e){delete pa[e],document.getElementById(e)?.remove()}function ga(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ma(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function va(){var e;return e=function*(e,t,r,n){try{var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ga(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"square-payments-".concat(e,"-script")},t);return yield function(e,t){const r=t();if(void 0!==r)return Promise.resolve(r);if(e.id in pa)return pa[e.id];const n=document.createElement("script");for(const t in e){const r=e[t];void 0!==r&&n.setAttribute(t,r)}return pa[e.id]=new Promise(((r,i)=>{n.onload=()=>{const n=t();void 0===n?(fa(e.id),i(new ha(e.src,"location returned undefined"))):r(n)},n.onerror=(t,r,n,o,s)=>{fa(e.id),i(new ha(e.src,"Unknown error occurred",s))}})),document.body.appendChild(n),pa[e.id]}(i,(()=>r.split(".").reduce(((e,t)=>null==e?void 0:e[t]),window)))}catch(e){throw n.captureException(e),new zn(zs)}},va=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ma(o,n,i,s,a,"next",e)}function a(e){ma(o,n,i,s,a,"throw",e)}s(void 0)}))},va.apply(this,arguments)}var ya={load:function(e,t,r,n){return va.apply(this,arguments)}};function Ea(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function _a(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ea(o,n,i,s,a,"next",e)}function a(e){Ea(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Sa=(e,t)=>_a((function*(){var r=new aa(e),n=function(e,t,r,n){var i;function o(){var a;return a=function*(){var o=yield function(e,t){var r=e.getSession();if(!r.locationId)throw new ri("locationId not defined when creating OAuth Plaid Link Session");var n=s.windowNavigationLanguage.slice(0,2),i={createOAuthPlaidLinkSessionRequest:{clientId:r.applicationId,locationId:r.locationId,redirectUri:"",languageCode:n}};return t.request(oa.CREATE_OAUTH_PLAID_LINK_SESSION,i)}(t,r);return function(r){return new Promise(((o,a)=>{var c=s.windowNavigationLanguage.split("-")[0];la.has(c)||(c="en");var{errorLogger:u,metricsHandler:l,isTestMerchant:d}=t,h="sandbox";Hr.env!==xr.production||d||(h="production"),i=e.create({clientName:"Square, Inc.",countryCodes:da,env:h,language:c,onEvent:(e,t)=>{e!==sn.ERROR||ua.has(t.error_type)||u.captureException(new co("PlaidErrorEvent: ".concat(JSON.stringify(t)),gi.ACH)),n.onEvent(e,t)},onExit:(e,t)=>{e&&(l.logEvent(mo.ExternalSessionError),ua.has(e.error_type)||u.captureException(new co("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(t),gi.ACH))),o({kind:"canceled"})},onSuccess:(e,t)=>{if(!t||!t.accounts||!t.accounts[0]){l.logEvent(mo.ExternalSessionError);var n=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(t)));return u.captureException(n),void a(n)}l.logEvent(mo.ExternalSessionOK),o({kind:"success",publicToken:e,selectedBankAccountId:t.accounts[0].id,gringottsSessionToken:r.gringottsSessionToken})},product:["auth"],token:r.plaidLinkToken}),l.logEvent(mo.ExternalSessionStart),i.open()}))}(o)},o=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=a.apply(e,t);function o(e){ca(i,r,n,o,s,"next",e)}function s(e){ca(i,r,n,o,s,"throw",e)}o(void 0)}))},o.apply(this,arguments)}return{beginFlow:function(){return o.apply(this,arguments)},destroy:function(){i&&(i.exit({force:!0}),i.destroy(),i=void 0)}}}(yield ya.load("plaid-link",{src:"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},"Plaid",e.errorLogger),e,r,{onEvent:t});function i(){return i=_a((function*(e){var t=yield n.beginFlow();if("success"===t.kind){var r=yield function(e,t,r,n){return o.apply(this,arguments)}(e.accountHolderName,t.publicToken,t.selectedBankAccountId,t.gringottsSessionToken);return r}return{status:vi.CANCEL}})),i.apply(this,arguments)}function o(){return(o=_a((function*(t,n,i,o){yield e.refreshWithCurrentAnalyticsToken();var s=e.getSession(),a={accountHolderName:t,gringottsSessionToken:o,plaidPublicToken:n,selectedPlaidBankAccountId:i},c={bankNonceRequest:{analyticsToken:s.analyticsToken,clientId:s.applicationId,locationId:s.locationId,paymentMethodTrackingId:e.getPaymentMethodTrackingId(),plaidLinkData:a,sessionId:s.sessionId,websdkVersion:Hr.VERSION,websiteUrl:s.sourceUrl}};try{var u=yield r.request(oa.REQUEST_ACH_BANK_NONCE,c);return yield e.updateSession(u.sessionId),e.setPaymentMethodTrackingId(u.paymentMethodTrackingId),{status:vi.OK,bankNonce:u.bankNonce,accountDetails:u.accountDetails}}catch(e){throw e instanceof ti?e:new ti([Qi.UNKNOWN])}}))).apply(this,arguments)}return Object.freeze({run:function(e){return i.apply(this,arguments)},destroy:function(){n.destroy()}})}))();class Ia extends Error{constructor(e){super(e),this.name="InvalidAuthorizationParameter",Object.setPrototypeOf(this,Ia.prototype)}}class Aa extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,Aa.prototype)}}class Oa{constructor(){this.listeners=new Map,this.eventBuffer=new Map}addEventListener(e,t,r={}){if(!0===r.once){const r=t;t=n=>{this.removeEventListener(e,t),r(n)}}if(r.signal){if(r.signal.aborted)return;r.signal.addEventListener("abort",(()=>{this.removeEventListener(e,t)}))}const n=this.listeners.get(e);void 0===n?this.listeners.set(e,[t]):n.push(t);const i=this.eventBuffer.get(e);i&&(i.forEach((e=>{this.dispatchEvent(e)})),this.eventBuffer.set(e,[]))}removeEventListener(e,t){const r=this.listeners.get(e);if(void 0!==r)for(let e=0;e<r.length;e++)r[e]===t&&(r.splice(e,1),e--)}hasEventListener(e){const t=this.listeners.get(e);return void 0!==t&&t.length>0}dispatchEvent(e){if(this.hasEventListener(e.type)){const t=[...this.listeners.get(e.type)];for(const r of t)try{r(e)}catch(t){throw new Aa(e.type,t.message)}}else{const t=this.eventBuffer.get(e.type);void 0===t?this.eventBuffer.set(e.type,[e]):t.push(e)}}}class Ca{constructor(){this.eventTarget=new Oa}addEventListener(e,t){this.eventTarget.addEventListener(e,(e=>{t(e.detail)}))}dispatchEvent(e){this.eventTarget.dispatchEvent(new CustomEvent(e.type,{detail:e}))}}const ba={get IFRAME_NAME(){return"ach_authz"},get TEST_ENV(){return"test"},get DEV_ENV(){return"development"},get SANDBOX_ENV(){return"sandbox"},get PRODUCTION_ENV(){return"production"},getDebitAuthHostname(e){switch(e){case this.PRODUCTION_ENV:return"https://connect.squareup.com";case this.SANDBOX_ENV:return"https://connect.squareupsandbox.com";default:return"https://connect.squareupstaging.com"}},getSDKBaseUrlForEnv(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}},Ta=function(e,t){const r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},r.setAttribute("id","ach-auth-enclave"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("style","position: fixed; inset: 0px; z-index: 2147483647; border-width: 0px; display: block; overflow: hidden auto;"),r.setAttribute("src",`${ba.getSDKBaseUrlForEnv(e)}${"development"===e?"":`/${t}`}/ach-authz-sdk/enclave.html`),document.body.append(r)}))},wa=function(e){e.parentElement?.removeChild(e)};class Ra extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,Ra.prototype)}}class Pa extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,Pa.prototype)}}class Na extends Error{constructor(e,t,r){void 0!==r?(super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${null===document.getElementById(r)?"does not exist":"exists"}`),this.iframeID=r):super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`),this.type=e,this.id=t,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,Na.prototype)}}const Da="channel:connected",La="channel:connecting",xa="channel:close",ka="channel:error";class Ma{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(La):this.handleConnecting(e);break;case this.messageWithName(Da):this.handleConnected();break;case this.messageWithName(xa):this.close();break;case this.messageWithName(ka):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=void 0!==e?`:${e}`:""}set onmessage(e){this.listeners.push(e)}close(){this.port&&(this.postMessage(this.messageWithName(xa)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new Ra("message channel is already connected");if(e){if(void 0===e.origin)throw new Ra("message channel remote.origin must be defined");if(null===e.window)throw new Ra("message channel remote.window cannot be null");const t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(La),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new Ra("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),e.ports[0]&&(this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(Da)),this.connectionEstablished())}handleConnected(){if(this.connected)throw new Ra("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(ka)),this.errorHandler&&this.errorHandler(new Ra("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}function Ua(){return`${Date.now()}${Math.floor(8e3*Math.random())}`}var ja,Ha;!function(e){e.ACK="ack",e.OK="ok",e.ERROR="error"}(ja||(ja={}));class Ba{constructor(e={}){this.messageListeners=new Map,this.channel=new Ma(e.name),this.channel.onmessage=this.handleMessage.bind(this),void 0!==e.payloadSerializer&&(this.payloadSerializer=e.payloadSerializer),void 0!==e.errorSerializer&&(this.errorSerializer=e.errorSerializer)}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Ua(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Ua(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Ua(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,t){const r=`${e.type}:${ja.OK}`;let n=t;return void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.postResponse(r,e,n)}reject(e,t){const r=`${e.type}:${ja.ERROR}`;let n=t;return void 0!==this.errorSerializer&&(n=this.errorSerializer.serialize(t)),this.postResponse(r,e,n)}onMessage(e,t=Ua()){return this.addMessageEventListener(e,t),t}connect(e,t){void 0!==t&&(this.iframeID=t),this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){const t=this.messageListeners.get(e.data.type);void 0!==e.data.type&&"undefined"!==e.data.type?t?(e.data.mustAcknowledge&&this.acknowledge(e.data),t.forEach((t=>{t.forEach((t=>{t(e)}))}))):this.errorHandler&&this.errorHandler(new Ra(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `),e):void 0!==this.errorHandler&&this.errorHandler(new Pa("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){const t=new Na(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){const{errorSerializer:t}=this,{payloadSerializer:r}=this;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let n;const i=()=>{[ja.ACK,ja.OK,ja.ERROR].forEach((t=>{const r=this.messageListeners.get(`${e.type}:${t}`);void 0!==r&&r.delete(n)}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((s,a)=>{n=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),s({}))},messageType:`${e.type}:${ja.ACK}`}),this.onMessage({listener(e){i();const{payload:t}=e.data;if(void 0===r)s(t);else{const e=r.deserialize(t);s(e)}},messageType:`${e.type}:${ja.OK}`},n),this.onMessage({listener(e){i();const{payload:r}=e.data;if(void 0===t)a(r);else{const e=t.deserialize(r);a(e)}},messageType:`${e.type}:${ja.ERROR}`},n)}))}acknowledge(e){const t=`${e.type}:${ja.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,payload:void 0,type:t})}postResponse(e,t,r){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){const t=this.handleMessageContract(e);return e.type&&"undefined"!==e.type||void 0===this.errorHandler||this.errorHandler(new Pa("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){const{messageType:r,listener:n}=e,i=this.messageListeners.get(r);if(i){const e=i.get(t);e?e.push(n):i.set(t,[n])}else this.messageListeners.set(r,new Map([[t,[n]]]))}}!function(e){e.CAPTURE_AUTHORIZATION="CAPTURE_AUTHORIZATION"}(Ha||(Ha={}));const Fa=function(){const e={name:ba.IFRAME_NAME};return new Ba(e)},qa=async function(e,t,r){const n=ba.getSDKBaseUrlForEnv(r);e.connect({origin:n,window:t.contentWindow},t.id),await e.sendMessage("INITIALIZE",{env:r})},Va={build(e,t){const r=Fa(),n=new Ca;return Promise.resolve(Object.freeze({captureAuthorization:async function(i){let o;try{!function(e){if(!e.idempotencyKey)throw new Ia("idempotencyKey is invalid");if(!e.applicationId)throw new Ia("applicationId is invalid");if(!e.locationId)throw new Ia("locationId is invalid");if(!e.total)throw new Ia("total needs to be provided");if("number"!=typeof e.total.amount)throw new Ia("amount needs to be a number");if(!e.total.currencyCode)throw new Ia("total needs to be valid");if("CHARGE"===e.intent){if(!e.bankNonce&&!e.bankAccountId)throw new Ia("one of bankNonce or bankAccountId needs to be provided");if(e.bankNonce&&e.bankAccountId)throw new Ia("only one of bankNonce or bankAccountId needs to be provided")}else if("RECURRING_CHARGE"===e.intent){if(!e.bankAccountId)throw new Ia("bankAccountId needs to be provided for recurring payments");if("WEEKLY"!==e.cadence&&"MONTHLY"!==e.cadence)throw new Ia("Unsupported cadence. Must be one of: WEEKLY, MONTHLY");if(!e.startDate)throw new Ia("Invalid startDate")}}(i),o=await Ta(e,t),await qa(r,o,e);const s=await r.request(Ha.CAPTURE_AUTHORIZATION,i);"success"===s.kind?n.dispatchEvent({type:"signed",token:s.token}):n.dispatchEvent({type:"canceled"})}catch(e){n.dispatchEvent({type:"error",error:e})}o&&wa(o)},addEventListener:function(e,t){n.addEventListener(e,t)}}))}};var Ga=["bankAccountDetails"];function za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $a(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Ya={build(e){var{env:t,transactionId:r,session:n,context:i,onSigned:o,onCanceled:s,onError:a}=e;function c(){var e;return e=function*(e){var c=yield Va.build(t,Hr.VERSION);i.metricsHandler.logEvent(go.ACHAuthStart);var{bankAccountDetails:u}=e,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Ga);c.addEventListener("signed",(function(e){o(e.token,u),i.metricsHandler.logEvent(go.ACHAuthOk)})),c.addEventListener("canceled",(function(){i.metricsHandler.logEvent(go.ACHAuthCanceled),s()})),c.addEventListener("error",(function(e){var t=e.error;a(t instanceof Ia?new Dn(t.message):new ri("authorizing the payment")),i.metricsHandler.logEvent(go.ACHAuthError),i.errorLogger.captureException(t)})),yield c.captureAuthorization(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?za(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):za(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({idempotencyKey:r,applicationId:n.applicationId,locationId:n.locationId},l))},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){$a(o,n,i,s,a,"next",e)}function a(e){$a(o,n,i,s,a,"throw",e)}s(void 0)}))},c.apply(this,arguments)}return Object.freeze({run:function(e){return c.apply(this,arguments)}})}},Wa=function(){var e=document.createElement("div");return e.setAttribute("style","position:fixed; top: 0; left: 0; width: 100vw; height: 100%; z-index: 3; background-color: ".concat("rgba(0, 0, 0, 0.8)","; opacity: 0;")),document.body.appendChild(e),e.style.transition="opacity ".concat("cubic-bezier(0.26, 0.1, 0.48, 1)"," ").concat("0.24s"),setTimeout((function(){e.style.opacity="1"})),new Promise((function(t){setTimeout((function(){t(e)}),240)}))},Ka=function(e){e&&(e.style.transition="opacity ".concat("cubic-bezier(0.52, 0, 0.74, 0)"," ").concat("0.16s"),setTimeout((function(){e.style.opacity="0"})),setTimeout((function(){e.remove()}),160))};function Qa(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Xa(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Qa(o,n,i,s,a,"next",e)}function a(e){Qa(o,n,i,s,a,"throw",e)}s(void 0)}))}}class Ja extends ia{constructor(e,t){super(e),this.methodType=gi.ACH,this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1;try{!function(e){if(e&&e.length>0){var t;try{t=new URL(e)}catch(t){throw new kn("redirectURI",e,"Must be a valid URI")}if([...t.searchParams.values()].length>0)throw new kn("redirectURI",e,"URI must not contain query parameters");return!0}throw new kn("redirectURI","".concat(e),"Must be a valid URI")}(null==t?void 0:t.redirectURI)}catch(e){this.metricsHandler.logEvent(yo.InvalidRedirectURI,void 0,e.message),console.warn(e.message)}try{!function(e){if(e&&e.length>0){if(e.length>50)throw new kn("transactionId",e,"String must be between 1 and 50 characters");return!0}throw new kn("transactionId","".concat(e),"String must be between 1 and 50 characters")}(null==t?void 0:t.transactionId)}catch(e){console.warn(e.message)}this.transactionId=(null==t?void 0:t.transactionId)||Xs()}initialize(){var e=this;return Xa((function*(){var t=e.dispatchPlaidEvent.bind(e);e.plaidNonceFlow=yield Sa(e.context,t),e.achAuthFlow=Ya.build({env:Hr.env,transactionId:e.transactionId,session:e.session,context:e.context,onSigned:e.dispatchSuccessfulTokenResult.bind(e),onCanceled:e.dispatchCancelResult.bind(e),onError:e.dispatchError.bind(e)})}))()}tokenize(e){var t=this;return Xa((function*(){try{if(t.throwIfDestroyed(),t.tokenizeInProgress)throw new ti([sa]);if(!e||!e.accountHolderName.trim())throw new En;var r=t.context.getFeatureFlagValues()[Ui.CanUseAchAuth];if(!function(e,t){switch(t){case Hi.NoSupport:return ec(e);case Hi.Supported:return!0;case Hi.Required:return!ec(e);case Hi.Legacy:return!0;default:return!1}}(e,r))throw new Dn("Invalid parameter format for ACH tokenize");if(!t.hasEventListener(sn.ON_TOKENIZATION)){var n="Add event listener for '".concat(sn.ON_TOKENIZATION,"' before calling tokenize.");console.error("".concat(n," This will result in an error when using the Plaid OAuth flow."))}if(void 0===t.achAuthFlow||void 0===t.plaidNonceFlow)throw new ri("Must call initialize() before tokenize() call");if(t.tokenizeInProgress=!0,t.handleFirstInteraction(),function(e){return Za(e)&&"RECURRING_CHARGE"===e.intent}(e))return t.veil=yield Wa(),void(yield t.achAuthFlow.run({intent:e.intent,bankAccountId:e.bankAccountId,total:e.total,cadence:e.cadence,startDate:e.startDate}));if(function(e){return Za(e)&&"CHARGE"===e.intent}(e)&&e.bankAccountId)return t.veil=yield Wa(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,total:e.total,intent:e.intent}));ec(e)||(t.veil=yield Wa());var i=yield t.plaidNonceFlow.run(e);if(ec(e)||r===Hi.Legacy)switch(i.status){case vi.OK:var o=t.buildSuccessfulTokenResult(i.bankNonce,i.accountDetails);return t.dispatchTokenizationEvent(o),t.resetFirstInteraction(),o;case vi.CANCEL:var s=t.buildCancelTokenResult();return t.dispatchTokenizationEvent(s),s;default:throw new ri("Unexpected tokenize flow status")}return void(yield t.runAchAuthFlowBasedOnPlaidResult(i,e))}catch(e){throw t.dispatchError(e),e}finally{t.tokenizeInProgress=!1,Ka(t.veil)}}))()}destroy(){var e;return this.status=Zs.DESTROYED,this.metricsHandler.logEvent(vo.Destroyed),null===(e=this.plaidNonceFlow)||void 0===e||e.destroy(),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(vo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}runAchAuthFlowBasedOnPlaidResult(e,t){var r=this;return Xa((function*(){if(e.status===vi.CANCEL)r.dispatchTokenizationEvent(r.buildCancelTokenResult());else switch(t.intent){case"CHARGE":yield r.achAuthFlow.run({intent:t.intent,bankNonce:e.bankNonce,total:t.total,bankAccountDetails:e.accountDetails});break;case"STORE":r.dispatchSuccessfulTokenResult(e.bankNonce,e.accountDetails);break;default:throw new Dn("Unsupported intent ".concat(t.intent,". Must be one of: CHARGE, STORE, RECURRING_CHARGE"))}}))()}resetFirstInteraction(){this.wasFirstInteractionCalled=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(go.FirstInteraction))}buildCancelTokenResult(){return{status:vi.CANCEL}}buildSuccessfulTokenResult(e,t){var r={status:vi.OK,token:e};return t&&(r.details={bankAccount:t,method:gi.ACH}),r}dispatchCancelResult(){this.dispatchTokenizationEvent(this.buildCancelTokenResult())}dispatchSuccessfulTokenResult(e,t){this.resetFirstInteraction();var r=this.buildSuccessfulTokenResult(e,t);this.dispatchTokenizationEvent(r)}dispatchError(e){this.dispatchEvent(sn.ON_TOKENIZATION,{error:e})}dispatchPlaidEvent(e,t){this.dispatchEvent(e,t)}dispatchTokenizationEvent(e){this.dispatchEvent(sn.ON_TOKENIZATION,{tokenResult:e})}}function Za(e){return"intent"in e}function ec(e){return!("intent"in e)}r(9529),r(1235);var tc,rc,nc=[Xn,Jn,Zn,ei,$n,Wn,ri],ic=[Yn,Zn,Xn,Jn,ei],oc=[ti,Yn],sc=function(e,t){var r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},Object.entries(e).forEach((e=>{var[t,n]=e;r.setAttribute(t,n)})),t?t.appendChild(r):document.body.appendChild(r)}))},ac=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};!function(e){e.CONFIGURE="configure",e.DESTROY="destroy",e.LOAD_CARDS_FORM="loadCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",e.SET_FOCUS="setFocus",e.CLEAR="clear",e.SET_ERROR="setError"}(tc||(tc={})),function(e){e.CARD_BRAND_CHANGED="cardBrandChanged",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.SET_POSTAL_COUNTRY="setPostalCountry",e.ESCAPE="escape",e.SUBMIT="submit"}(rc||(rc={}));var cc=new Set(["DIV","SPAN"]),uc=new Set(["DIV","SPAN"]),lc=new Set(["DIV","SPAN","BUTTON"]);function dc(e,t){var r;if(function(e){return"string"==typeof e}(e)){var n=document.querySelector(e);if(!n)throw new wn(e);r=n}else{if(!(e instanceof HTMLElement))throw new Kn(e,t);if(r=e,!document.contains(r))throw new wn(r)}if(!t.has(r.nodeName))throw new Kn(r,t);return r}function hc(e){return dc(e,cc)}function pc(e){return dc(e,lc)}var fc=["top","right","bottom","left"],gc="sq-focus",mc="sq-error",vc=".".concat(gc),yc=".".concat(mc),Ec=(r(8319),{ASPECT_RATIO:/^\d+\/\d+$/,HEX:/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,NEGATIVE_EM:/^-\d*\.?\d+em$/,NEGATIVE_PERCENT:/^\d*\.?\d+%$/,NEGATIVE_PT:/^-\d*\.?\d+pt$/,NEGATIVE_PX:/^-\d*\.?\d+px$/,POSITIVE_EM:/^\d*\.?\d+em$/,POSITIVE_PERCENT:/^\d*\.?\d+%$/,POSITIVE_PT:/^\d*\.?\d+pt$/,POSITIVE_PX:/^\d*\.?\d+px$/,POSITIVE_RESOLUTION:/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,RGB:/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,RGBA:/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/}),_c=/\s(?![^(]*\))/,Sc=new Set(["screen","all","print","speech"]),Ic=new Set(["and"]),Ac=new Set(["not","only"]),Oc=new Set(["portrait","landscape"]),Cc=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),bc=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),Tc=new Set([100,200,300,400,500,600,700,800,900]),wc=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),Rc=new Set(["normal"]),Pc=new Set(["smaller","larger"]),Nc=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),Dc=new Set(["none","antialiased","subpixel-antialiased"]),Lc=new Set(["grayscale","auto"]),xc=new Set(["none"]);function kc(e){return null!=e&&e.split(/, ?(?![^(]*\))/).every((e=>function(e){if(null==e)return!1;if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),r=0;if("inset"===t[0]&&(t.shift(),r++),"inset"===t[t.length-1]){if(r>0)return!1;t.pop()}for(var n=0;n<2;n++){var i=t.shift();if(void 0===i||!Fc(i))return!1}switch(t.length){case 0:return!0;case 1:return Gc(t[0])||Vc(t[0]);case 2:return Vc(t[0])&&(Gc(t[1])||qc(t[1]));case 3:return Vc(t[0])&&qc(t[1])&&Gc(t[2]);default:return!1}}(e)))}function Mc(e){return["border-box","content-box"].includes(e)}function Uc(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||ru(e)||ou(e)}(e)))}function jc(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(Hc)}function Hc(e){return 0===Number(e)||ru(e)||ou(e)}function Bc(e){return 0===Number(e)||ru(e)||ou(e)||nu(e)||su(e)}function Fc(e){return 0===Number(e)||tu(e)||iu(e)}function qc(e){return 0===Number(e)||tu(e)||iu(e)}function Vc(e){return 0===Number(e)||ru(e)||ou(e)}function Gc(e){return null!=e&&(function(e){return bc.has(e.toLowerCase())}(e)||function(e){return Ec.HEX.test(e)}(e)||function(e){return Ec.RGB.test(e)}(e)||function(e){return Ec.RGBA.test(e)}(e))}function zc(e){return null!=e&&(function(e){return Cc.has(e.toLowerCase())}(e)||function(e){return Pc.has(e.toLowerCase())}(e)||ru(e)||au(e)||ou(e)||cu(e))}function $c(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),Nc.has(t);var t}))}function Yc(e){var t=Number(e);return Number.isNaN(t)?wc.has(e.toLowerCase()):Tc.has(t)}function Wc(e){return"normal"===e||iu(e)||function(e){return au(e)||function(e){return Ec.NEGATIVE_PT.test(e)}(e)}(e)||tu(e)}function Kc(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||Rc.has(e)||ou(e)||ru(e)||au(e)||cu(e)}function Qc(e){return Dc.has(e)}function Xc(e){return Lc.has(e)}function Jc(e){return xc.has(e)}function Zc(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return ru(e)||ou(e)||cu(e)||0===Number(e)}(e)))}function eu(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[r,n]=t.split(/: */);switch(r){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return ru(n)||ou(n)||cu(n);case"resolution":case"min-resolution":case"max-resolution":return function(e){return Ec.POSITIVE_RESOLUTION.test(e)}(n);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return Ec.ASPECT_RATIO.test(e)}(n);case"color":case"color-index":case"monochrome":return void 0===n;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(n);case"orientation":return function(e){return Oc.has(e)}(n);default:return!1}}function tu(e){return ru(e)||nu(e)}function ru(e){return Ec.POSITIVE_PX.test(e)}function nu(e){return Ec.NEGATIVE_PX.test(e)}function iu(e){return ou(e)||su(e)}function ou(e){return Ec.POSITIVE_EM.test(e)}function su(e){return Ec.NEGATIVE_EM.test(e)}function au(e){return Ec.POSITIVE_PT.test(e)}function cu(e){return Ec.POSITIVE_PERCENT.test(e)}var uu={sanitizeDeclarationValue:function(e,t){var r=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return Gc;case"-webkit-box-shadow":case"box-shadow":return kc;case"box-sizing":return Mc;case"font-family":return $c;case"font-size":return zc;case"font-weight":return Yc;case"letter-spacing":return Wc;case"line-height":return Kc;case"padding":return Zc;case"-webkit-font-smoothing":return Qc;case"-moz-osx-font-smoothing":return Xc;case"display":return Jc;case"border-radius":return Uc;case"border-width":return jc;case"top":case"bottom":case"left":case"right":return Bc;case"width":return function(e){return e};default:return}})(e);return r&&r(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t)?t:""},validateMediaQuery:function(e){return!!(t=e).startsWith("@media")&&t.slice(7,t.length).split(/, */).every((e=>{var t=e.split(_c);if(0===t.length)return!1;var r=0;if(!t[0].startsWith("(")){var n=0;if(Ac.has(t[0])&&(n=1),t.length===n+1)return Sc.has(t[n]);if(!Sc.has(t[n])||!Ic.has(t[n+1]))return!1;r=2+n}if((t.length-r)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(r)))if(!(Number(i)%2==0?eu(o):Ic.has(o)))return!1;return!0}));var t}};function lu(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r.length>0&&!r.includes(e))throw new Xn(e);var i=Fi.cssProperty(e),o=uu.sanitizeDeclarationValue(i,t);if(0===o.length)throw new Jn(e,t);return n&&(o+=" !important"),Fi.formatCSSKeyValuePair(i,o)}function du(e,t,r){var n=[],i=[],o=new Set(e.excludeProperties||[]);for(var[s,a]of Object.entries(t))if(!o.has(s)){var c=a||"";try{n.push(lu(s,c,r))}catch(e){i.push(e)}}if(i.length>0)throw new ei(i);return Object.fromEntries(e.toSelectors.map((function(e){return[e,n]})))}function hu(e,t,r){var n={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:s,toProperty:a,toSelectors:c,transformPropertyValue:u}=e,l=t[o];if(l){var d=u?u(l):l;try{var h=lu(null!=a?a:o,d,a?[...r,a]:r,s);c.forEach((e=>{n[e]||(n[e]=[]),n[e].push(h)}))}catch(e){i.push(e)}}})),i.length>0)throw new ei(i);return n}var pu={borderChainToDirectionValue:function(e,t){var r=t.split(" ");switch(r.length){case 1:return r[0];case 2:switch(e){case"top":case"bottom":return r[0];default:return r[1]}case 3:switch(e){case"top":return r[0];case"bottom":return r[2];default:return r[1]}case 4:switch(e){case"top":return r[0];case"right":return r[1];case"bottom":return r[2];case"left":return r[3];default:return""}default:return""}},compileStyleString:function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],s=[...Object.keys(r.selectorMappings),...Object.keys(r.selectorPropertyMappings||{})],a=new Set(s),c=new Set(Object.values(n));Object.keys(t).forEach((e=>{c.has(e)||function(e,t){return!t&&uu.validateMediaQuery(e)}(e,i)||o.push(new Zn(e))}));var u={};function l(e){for(var[t,r]of Object.entries(e))u[t]||(u[t]=[]),u[t].push(...r)}for(var d of a){var h,p=t[d],f=r.allowedAttributes[d]||[],g=r.selectorMappings[d]||[],m=(null==r||null===(h=r.selectorPropertyMappings)||void 0===h?void 0:h[d])||[];if(p){try{l(du(g,p,f))}catch(e){e instanceof ei&&o.push(...e.errors)}try{l(hu(m,p,f))}catch(e){e instanceof ei&&o.push(...e.errors)}}}if(Object.keys(t).filter((e=>!a.has(e)&&uu.validateMediaQuery(e))).forEach((i=>{try{var s=e(t[i],r,n,!0);u[i]=[s]}catch(e){o.push(...e.errors)}})),o.length>0)throw new ei(o);return function(e){var t=[];for(var[r,n]of Object.entries(e))n&&n.length>0&&t.push("\n      ".concat(r," { ").concat(n.join(" ")," }\n      "));return t.join("")}(u)}},fu="sq-card-iframe-container",gu="sq-card-wrapper",mu="sq-card-component",vu="sq-card-message",yu="sq-card-message-error",Eu="sq-card-message-no-error",_u="sq-visible",Su=".".concat(gu),Iu=".".concat(mu),Au=".".concat(fu),Ou="".concat(Su).concat(vc),Cu="".concat(Su).concat(yc),bu="".concat(Su," ").concat(Iu),Tu="".concat(Su," ").concat(Au),wu="".concat(Ou," ").concat(Au),Ru="".concat(Cu," ").concat(Au),Pu=".sq-card-message-error",Nu=".sq-card-message-error::before",Du=".sq-card-message-no-error",Lu=".sq-card-message-no-error::before",xu="".concat(Au).concat("::before"),ku=["borderWidth"];function Mu(e){var t=["".concat(e).concat(yc," ").concat(xu),"".concat(e).concat(vc," ").concat(xu)];return fc.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(r=e,function(e){var t=pu.borderChainToDirectionValue(r,e);return"0"===t[0]?t:"-".concat(t)})};var r}))}function Uu(e,t){return pu.compileStyleString(e,function(e){var t="#".concat(e);return{allowedAttributes:{[en.CARD_COMPONENT]:yi,[en.CARD_COMPONENT_FOCUS]:Ei,[en.CARD_COMPONENT_ERROR]:Ei,[en.CARD_INPUT_HELPER_TEXT]:_i,[en.CARD_INPUT_HELPER_ICON]:Si,[en.CARD_INPUT_ERROR_TEXT]:_i,[en.CARD_INPUT_ERROR_ICON]:Si},selectorMappings:{[en.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(Tu)]},[en.CARD_COMPONENT_FOCUS]:{excludeProperties:ku,toSelectors:["".concat(t).concat(wu)]},[en.CARD_COMPONENT_ERROR]:{excludeProperties:ku,toSelectors:["".concat(t).concat(Ru)]},[en.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(Du)]},[en.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(Lu)]},[en.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(Pu)]},[en.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(Nu)]}},selectorPropertyMappings:{[en.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(Tu)]}],[en.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(xu),"".concat(t).concat(bu)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(Tu)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var r=pu.borderChainToDirectionValue(t,e);return"0"===r&&(r="0px"),r})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...Mu(t)],[en.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(yc," ").concat(xu)]},{property:"borderWidth",toSelectors:["".concat(t).concat(yc," ").concat(xu)]}],[en.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(vc," ").concat(xu)]},{property:"borderWidth",toSelectors:["".concat(t).concat(vc," ").concat(xu)]}],[en.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Nu)]}],[en.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Lu)]}]}}}(t),en)}var ju={addStyleElement:function(e,t,r,n){Hu(e,t,document.head).then(r).catch(n)},addStyleElementToTarget:Hu,hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}};function Hu(e,t,r){return new Promise(((n,i)=>{if(ju.hasExistingStyleElement(t))n();else{var o=document.createElement("link");o.onload=()=>{n()},o.onerror=()=>{i(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))},o.href=e,o.rel="stylesheet",o.type="text/css",o.id=t,r.appendChild(o)}}))}var Bu=ju;function Fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Gu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Vu(o,n,i,s,a,"next",e)}function a(e){Vu(o,n,i,s,a,"throw",e)}s(void 0)}))}}var zu="single-card-wrapper",$u="emptyMessage",Yu=[Zr.CARD_NUMBER,Zr.EXPIRATION_DATE,Zr.CVV,Zr.POSTAL_CODE];function Wu(e){return"".concat(zu,"-").concat(e)}function Ku(e,t){var r=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=Uu(e,Wu(t))}var Qu,Xu=class extends ia{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=gi.CARD,this.postalCountry=xo.US,this.onResize=this.onResize.bind(this),this.id=Xs(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new aa(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return Gu((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.throwIfDestroyedOrNotAttached(),t.validateOptions(r),t.metricsHandler.logEvent(vo.ConfigUpdated,r),void 0!==r.includeInputLabels&&(t.inputLabelsIncluded=Boolean(r.includeInputLabels),t.onResize()),void 0!==r.style&&Ku(r.style,t.id);try{yield t.paymentMessenger.request(tc.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,postalCode:r.postalCode,style:r.style,type:t.methodType})}catch(e){if(Fi.isInstanceOf(e,ic))throw e;throw t.errorLogger.captureException(e),new ri("configuring the Card Element")}}))()}attach(e){var t=this;return Gu((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=Zs.ATTACHED,t.metricsHandler.logEvent(go.AttachStart),t.metricsHandler.logEvent(vo.Configured,t.initialOptions);try{r=hc(e)}catch(e){throw t.metricsHandler.logEvent(go.AttachError),t.status===Zs.ATTACHED&&(t.status=Zs.DETACHED),e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent(go.AttachOK)}catch(e){if(t.status===Zs.ATTACHED&&(t.status=Zs.DETACHED),t.metricsHandler.logEvent(go.AttachError),Fi.isInstanceOf(e,nc))throw e;throw t.errorLogger.captureException(e),new ri("attaching the Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(Zs.DETACHED,vo.Detached)}destroy(){var e=this;return Gu((function*(){if(e.status===Zs.DESTROYED)return!1;var t=yield e.detachElement(Zs.DESTROYED,vo.Destroyed);return e.context.removeLocaleChangedListener(e.updateCardDetailText),t}))()}focus(e){var t=this;return Gu((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Zr).includes(e))throw new Ln(e);t.metricsHandler.logEvent(vo.Focused,e);try{return yield t.paymentMessenger.request(tc.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return Gu((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(tc.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent(vo.Clear),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent(vo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return Gu((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new ti([sa]);e.tokenizeInProcess=!0,yield e.context.refreshWithCurrentAnalyticsToken();try{var t=yield e.paymentMessenger.request(tc.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,billingContact:r,cardNonce:n}=e;return{details:{card:t,method:gi.CARD,billing:r},status:vi.OK,token:n}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Ji)return{errors:t.errors,status:vi.INVALID};throw Fi.isInstanceOf(t,oc)?t:(e.errorLogger.captureException(t),Zi())}}))()}recalculateSize(){this.throwIfDestroyedOrNotAttached(),this.metricsHandler.logEvent(vo.RecalculatedSize),this.onResize()}setError(e){var t=this;return Gu((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Zr).includes(e))throw new Ln(e);t.metricsHandler.logEvent(vo.SetError,e);try{return yield t.paymentMessenger.request(tc.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return Gu((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(tc.LOAD_CARDS_FORM,{configuration:qu(qu({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new xn(r);if(t[r]&&!t[r](n))throw new kn(r,n)}))}buildErrorMessage(e){switch(e){case Zr.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case Zr.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case Zr.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case Zr.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(e){switch(e){case Zr.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case Zr.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case Zr.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case Zr.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:$u,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(yu),this.cardDetail.classList.add(Eu)):(e=Yu.find((e=>this.errorList.has(e)))||$u,t=this.buildErrorMessage(e),this.cardDetail.classList.add(yu),this.cardDetail.classList.remove(Eu)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(_u):this.cardDetail.classList.remove(_u))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(gc)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(mc))}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case Jr.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(mc);break;case Jr.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case Jr.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(gc);break;case Jr.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.body.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),r={[rc.SET_POSTAL_COUNTRY]:t,[rc.FOCUS_CLASS_ADDED]:e,[rc.FOCUS_CLASS_REMOVED]:e,[rc.ERROR_CLASS_ADDED]:e,[rc.ERROR_CLASS_REMOVED]:e,[rc.CARD_BRAND_CHANGED]:e,[rc.POSTAL_CODE_CHANGED]:e,[rc.SUBMIT]:e,[rc.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(r)}buildCardIframe(e){return sc({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:Hr.SINGLE_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(e){var t=this;return Gu((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Wu(t.id),t.wrapperElement.classList.add(gu),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(vu),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(fu),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(mu),t.wrapperElement.appendChild(t.cardDetail),Bu.addStyleElement(Hr.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Ku(t.initialOptions.style,t.id)}))()}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,!this.currentResizeTimeout)){var t=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};t(this.lastResizeWidth||0),this.currentResizeTimeout=window.setTimeout((()=>{t(this.lastResizeWidth||0),this.currentResizeTimeout=void 0}),100)}}detachElement(e,t){var r=this;return Gu((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(tc.DESTROY);return r.element&&(ac(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}},Ju=[Xn,Jn,Zn,ei,$n,ri];function Zu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function rl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){tl(o,n,i,s,a,"next",e)}function a(e){tl(o,n,i,s,a,"throw",e)}s(void 0)}))}}!function(e){e.CLEAR="giftCardClear",e.CONFIGURE="giftCardConfigure",e.DESTROY="giftCardDestroy",e.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",e.SET_FOCUS="giftCardSetFocus",e.SET_ERROR="giftCardSetError"}(Qu||(Qu={}));var nl,il="gift-card-wrapper",ol=[tn.GIFT_CARD_NUMBER];class sl extends ia{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=gi.GIFT_CARD,this.onResize=this.onResize.bind(this),this.id=Xs(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new aa(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(null==t?void 0:t.includeInputLabels),this.initializeMessageBus(),this.validateOptions(t),this.initialOptions=t||{},this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return rl((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=Zs.ATTACHED,t.metricsHandler.logEvent(go.AttachStart),t.metricsHandler.logEvent(vo.Configured,t.initialOptions);try{r=hc(e)}catch(e){throw t.metricsHandler.logEvent(go.AttachError),t.status===Zs.ATTACHED&&(t.status=Zs.DETACHED),e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent(go.AttachOK)}catch(e){if(t.status===Zs.ATTACHED&&(t.status=Zs.DETACHED),t.metricsHandler.logEvent(go.AttachError),Fi.isInstanceOf(e,Ju))throw e;throw t.errorLogger.captureException(e),new ri("attaching the Gift Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(Zs.DETACHED,vo.Detached)}destroy(){return this.status===Zs.DESTROYED?Promise.resolve(!1):this.detachElement(Zs.DESTROYED,vo.Destroyed)}configure(e){var t=this;return rl((function*(){t.throwIfDestroyedOrNotAttached(),t.validateOptions(e),void 0!==(null==e?void 0:e.includeInputLabels)&&(t.inputLabelsIncluded=Boolean(null==e?void 0:e.includeInputLabels),t.onResize()),void 0!==e.style&&cl(e.style,t.id),t.metricsHandler.logEvent(vo.ConfigUpdated,e);try{yield t.paymentMessenger.request(Qu.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:t.methodType})}catch(e){if(Fi.isInstanceOf(e,ic))throw e;throw t.errorLogger.captureException(e),new ri("configuring the Gift Card Element")}}))()}focus(e){var t=this;return rl((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(tn).includes(e))throw new Ln(e);t.metricsHandler.logEvent(vo.Focused,e);try{return yield t.paymentMessenger.request(Qu.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return rl((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(Qu.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent(vo.Clear),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent(vo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return rl((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new ti([sa]);e.tokenizeInProcess=!0,yield e.context.refreshWithCurrentAnalyticsToken();try{var t=yield e.paymentMessenger.request(Qu.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,cardNonce:r}=e;return{details:{giftCard:t,method:gi.GIFT_CARD},status:vi.OK,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Ji)return{errors:t.errors,status:vi.INVALID};throw Fi.isInstanceOf(t,oc)?t:(e.errorLogger.captureException(t),Zi())}}))()}setError(e){var t=this;return rl((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(tn).includes(e))throw new Ln(e);t.metricsHandler.logEvent(vo.SetError,e);try{return yield t.paymentMessenger.request(Qu.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return rl((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(Qu.LOAD_GIFT_CARDS_FORM,{configuration:el(el({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new xn(r);if(t[r]&&!t[r](n))throw new kn(r,n)}))}buildCardElement(e){var t=this;return rl((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=al(t.id),t.wrapperElement.classList.add(gu),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(vu),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(fu),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(mu),t.wrapperElement.appendChild(t.cardDetail),Bu.addStyleElement(Hr.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&cl(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return sc({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:Hr.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&!this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:"emptyMessage",t=this.buildHelperMessage(e),this.cardDetail.classList.remove(yu),this.cardDetail.classList.add(Eu)):(e=ol.find((e=>this.errorList.has(e)))||ol[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(yu),this.cardDetail.classList.remove(Eu)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(_u):this.cardDetail.classList.remove(_u))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case rn.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(mc);break;case rn.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case rn.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(gc);break;case rn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(gc)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(mc))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={[rc.FOCUS_CLASS_ADDED]:e,[rc.FOCUS_CLASS_REMOVED]:e,[rc.ERROR_CLASS_ADDED]:e,[rc.ERROR_CLASS_REMOVED]:e,[rc.CARD_BRAND_CHANGED]:e,[rc.SUBMIT]:e,[rc.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){return e===tn.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===tn.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}detachElement(e,t){var r=this;return rl((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(Qu.DESTROY);return r.element&&(ac(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}}function al(e){return"".concat(il,"-").concat(e)}function cl(e,t){var r=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=Uu(e,al(t))}r(3105),function(e){e.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",e.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}(nl||(nl={}));class ul extends gn{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,ul.prototype)}}function ll(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}class dl extends Qs{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,r){var n,i=this;return(n=function*(){if(e in i.listeners)for(var n=new Ii(e,t),o=[...i.listeners[e]],s=function*(){var t,i;try{t=o[a](n)}catch(t){throw new Nn(e,t.message)}if(t instanceof Promise)try{i=yield Fr((()=>t),3e4,new ul(e))}catch(t){if(t instanceof ul)throw t;throw new Nn(e,t.message)}else i=t;r&&r(i)},a=0,c=o.length;a<c;a++)yield*s()},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){ll(o,r,i,s,a,"next",e)}function a(e){ll(o,r,i,s,a,"throw",e)}s(void 0)}))})()}}function hl(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var r=[];return{isValid:Object.entries(t).map((n=>{var[i,o]=n;if("object"==typeof o){var{isValid:s,missingFields:a}=hl("object"==typeof e[i]?e[i]:{},t[i]);return a.forEach((e=>{var[t,n]=e;r.push(["".concat(i,".").concat(t),n])})),s}return i in e&&typeof e[i]===o||(r.push([i,o]),!1)})).every(Boolean),missingFields:r}}function pl(e,t,r){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var n=e.reduce(((e,n)=>{var i=hl({[t]:n},{[t]:r}),o=Object.fromEntries(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Object.assign({},e.missingFieldsMap,o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:n.isValid,missingFields:Object.entries(n.missingFieldsMap)}}var fl,gl,ml,vl,yl,El,_l,Sl,Il={amount:"string",label:"string"},Al={amount:"string",id:"string",label:"string"},Ol={amount:"string",label:"string"},Cl={};function bl(e,t){var{lineItems:r,taxLineItems:n,discounts:i,shippingLineItems:o}=e,s=!1,a=[],c=r,u=n,l=o,d=Tl(i);return void 0===t||void 0===r&&void 0===n&&void 0===o&&void 0===d||(c||(c=t.lineItems),u||(u=t.taxLineItems),d||(d=Tl(t.discounts)),l||(l=t.shippingLineItems)),[c,u,d,l].forEach((e=>{void 0!==e&&(s=!0,a.push(...e))})),s?a:void 0}function Tl(e){return void 0===e?e:e.map((e=>Object.assign({},e,{amount:"-".concat(e.amount)})))}function wl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Rl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){wl(o,n,i,s,a,"next",e)}function a(e){wl(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Pl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}!function(e){e.UPDATE="update"}(fl||(fl={}));class Nl{constructor(e,t,r){this.eventTarget=new dl,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r;var{isValid:n,missingFields:i}=Ll(this);if(!n)throw new Rn(i)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,lineItems:this.lineItems,shippingLineItems:this.shippingLineItems,taxLineItems:this.taxLineItems,discounts:this.discounts,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingOptions:this.shippingOptions,total:this.total},e),r=new Nl(t,this.localeStrings,this.updateLock),{isValid:n,missingFields:i}=Ll(r);if(!n)throw new Rn(i);return!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),e.countryCode&&(this._countryCode=e.countryCode),e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(fl.UPDATE,r),this.logMetrics(vo.ConfigUpdated,t),!0)}addEventListener(e,t){switch(Fi.enumValues(mi).includes(e)&&this.logMetrics(vo.EventListenerAdded,e),e){case mi.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case mi.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case fl.UPDATE:this.updateEventListener(t);break;case fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case fn.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new Ws("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,r){return this.eventTarget.dispatchEvent(e,t,(t=>{if(Fi.enumValues(fn).includes(e)){var n=function(e){if(void 0!==e.error)return{isValid:!0,missingFields:[]};if(void 0!==e.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===e.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var t=pl(e.shippingOptions,"shippingOptions",{id:"string",label:"string",amount:"string",total:"object"});if(!t.isValid)return t;for(var r of e.shippingOptions){if(!(t=hl({"shippingOptions.total":r.total},{"shippingOptions.total":Ol})).isValid)return t;if(void 0!==r.taxLineItems&&!(t=pl(r.taxLineItems,"shippingOptions.taxLineItems",Il)).isValid)return t}return{isValid:!0,missingFields:[]}}(t);if(!n.isValid)throw new Pn(n.missingFields);r(t)}else{var i=function(e){var{lineItems:t,discounts:r,taxLineItems:n,shippingLineItems:i,shippingErrors:o,shippingOptions:s,error:a,total:c}=e;if(t){var u=pl(t,"lineItem",Il);if(!u.isValid)return u}if(r){var l=pl(r,"discounts",Il);if(!l.isValid)return l}if(n){var d=pl(n,"taxLineItems",Il);if(!d.isValid)return d}if(i){var h=pl(i,"shippingLineItems",Il);if(!h.isValid)return h}if(s){var p=pl(s,"shippingOption",Al);if(!p.isValid)return p}if(c){var f=hl({total:c},{total:Ol});if(!f.isValid)return f}if(a&&"string"!=typeof a)return{isValid:!1,missingFields:[["error","string"]]};if(o){var g=hl(o,Cl);if(!g.isValid)return g}return{isValid:!0,missingFields:[]}}(t);if(!i.isValid)throw new Pn(i.missingFields);r(t)}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setMetricsHandler(e){this.metricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[r,n]=t;e.logEvent(r,n)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(mi.SHIPPING_CONTACT_CHANGED,function(){var r=Rl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(mi.SHIPPING_OPTION_CHANGED,function(){var r=Rl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var r=Rl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("AfterpayShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(fn.AFTERPAY_SHIPPING_OPTION_CHANGED,(t=>{e(t.detail.contactOrOption)}))}updateEventListener(e){this.eventTarget.addEventListener(fl.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){this.metricsHandler?this.metricsHandler.logEvent(e,t):this.metricsBuffer.push([e,t])}}function Dl(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function Ll(e){return hl(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}})}function xl(e,t){return Intl.NumberFormat(s.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(gl||(gl={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(ml||(ml={})),function(e){e.FULL="FULL",e.MIN="MIN"}(vl||(vl={})),function(e){e.CARD="CARD"}(yl||(yl={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(El||(El={})),function(e){e.SUCCESS="SUCCESS"}(_l||(_l={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(Sl||(Sl={}));var kl=["PAN_ONLY","CRYPTOGRAM_3DS"],Ml=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"],Ul="LINE_ITEM";function jl(e){return{label:e.label,price:e.amount,status:e.pending?gl.Estimated:gl.Final,type:Ul}}function Hl(e,t){var r=null!=t?t:e;return r?r.map((e=>jl(e))):[]}function Bl(e,t){return t.map((t=>function(e,t){return{description:xl(t.amount,e),id:t.id,label:t.label}}(e,t)))}function Fl(e,t,r,n){var i=null!=n?n:r;if(i&&i.length>0){var o={shippingOptions:Bl(e,i)};return i.some((e=>(null==e?void 0:e.id)===t))&&(o.defaultSelectedOptionId=t),o}}function ql(e,t){return null==t?void 0:t.find((t=>t.id===e))}function Vl(e,t,r,n,i,o){var{countryCode:s,currencyCode:a,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:h,requestShippingContact:p,shippingOptions:f}=t,g=Dl(t),m=Boolean(p||g),v=Object.assign({},e,{emailRequired:Boolean(h),merchantInfo:i,shippingAddressRequired:m,shippingOptionRequired:g,transactionInfo:{countryCode:s,currencyCode:a,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:n}});if(u&&u.length>0&&(v.transactionInfo.displayItems=Hl([],bl({lineItems:u,taxLineItems:l,discounts:d},t))),m&&(v.shippingAddressParameters={phoneNumberRequired:!0}),g){var y=Fl(a,o,[],f);y&&(v.shippingOptionParameters=y)}return r.length>0&&(v.callbackIntents=r),v}function Gl(e,t){var r=[];return e.error&&r.push({intent:t,message:e.error,reason:fi.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[n,i]=e;r.push({intent:t,message:"".concat(n,": ").concat(i),reason:fi.SHIPPING_ADDRESS_INVALID})})),r}function zl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Wl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Yl(o,n,i,s,a,"next",e)}function a(e){Yl(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Kl=["#google"];class Ql extends ia{constructor(e,t,r,n,i){var o;super(r),this.methodType=gi.GOOGLE_PAY,this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=n,this.element=null,this.paymentMethodMessenger=new aa(r),Dl(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var r=[],n=Dl(e)&&t.includes(mi.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(mi.SHIPPING_CONTACT_CHANGED);return n?r.push(ml.SHIPPING_ADDRESS,ml.SHIPPING_OPTION):i&&r.push(ml.SHIPPING_ADDRESS),(!s.isAndroid()||n||i)&&r.push(ml.PAYMENT_AUTHORIZATION),r}(this.req,this.handlers);var a,c,u,l,d=function(e,t,r,n){var i=Sl.TEST;Hr.env!==xr.production||e.isTestMerchant||(i=Sl.PRODUCTION);var o={environment:i,merchantInfo:n},a=t.includes(ml.SHIPPING_OPTION)||t.includes(ml.SHIPPING_ADDRESS);if(!s.isAndroid()||a){var c={onPaymentAuthorized:()=>({transactionState:_l.SUCCESS})};a&&(c.onPaymentDataChanged=r),o.paymentDataCallbacks=c}return o}(r,this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(d),this.isReadyToPayRequest=(a=this.session.applicationId,c=this.req.requestBillingContact,u=this.featureFlagHandler,l=[...Ml],null!=u&&u.isActive(Ui.CanUseInterac)&&l.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:kl,allowedCardNetworks:l,billingAddressParameters:{format:c?vl.FULL:vl.MIN,phoneNumberRequired:Boolean(c)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:a},type:El.PAYMENT_GATEWAY},type:yl.CARD}],apiVersion:2,apiVersionMinor:0})}get handlers(){var e=[];return this.req.hasEventListener(mi.SHIPPING_OPTION_CHANGED)&&e.push(mi.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(mi.SHIPPING_CONTACT_CHANGED)&&e.push(mi.SHIPPING_CONTACT_CHANGED),e}attach(e,t){var r=this;return Wl((function*(){var n,i,o;r.throwIfDestroyedOrAlreadyAttached(),r.status=Zs.ATTACHED;var s=null!==(n=null==t?void 0:t.buttonColor)&&void 0!==n?n:di.DEFAULT,a=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:hi.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:pi.LONG;r.metricsHandler.logEvent(go.AttachStart),r.metricsHandler.logEvent(vo.Configured,t);try{r.element=pc(e)}catch(e){throw r.status===Zs.ATTACHED&&(r.status=Zs.DETACHED),r.metricsHandler.logEvent(go.AttachError),e}r.isReadyToPay=yield r.checkIfReadyToPay(go.AttachError);try{var u=r.googlePayClient.createButton({buttonColor:s,buttonSizeMode:a,buttonType:c,onClick:()=>{}});r.element.appendChild(u),r.metricsHandler.logEvent(go.AttachOK)}catch(e){throw r.status===Zs.ATTACHED&&(r.status=Zs.DETACHED),r.errorLogger.captureException(e),r.metricsHandler.logEvent(go.AttachError),r.status=Zs.DETACHED,new zn($s,e)}}))()}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Zs.DETACHED,vo.Detached),Promise.resolve(!0)}destroy(){return this.status===Zs.DESTROYED?Promise.resolve(!1):(this.detachElement(Zs.DESTROYED,vo.Destroyed),Promise.resolve(!0))}tokenize(){var e=this;return Wl((function*(){var t;e.throwIfDestroyed(),e.handleFirstInteraction(),e.metricsHandler.logEvent(mo.ExternalSessionStart),e.isReadyToPay=e.isReadyToPay||(yield e.checkIfReadyToPay(mo.ExternalSessionError)),e.paymentRequestLockController.lock(e);try{t=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent(mo.ExternalSessionOK)}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===t.statusCode)return e.metricsHandler.logEvent(mo.ExternalSessionCancel),{status:vi.CANCEL};if(e.metricsHandler.logEvent(mo.ExternalSessionError),t instanceof Error)throw e.errorLogger.captureException(t),t;throw e.errorLogger.captureException(new co(JSON.stringify(t),e.methodType)),new ri("tokenizing Google Pay.")}var{token:r,details:n}=yield e.requestGooglePayCardNonce(t);return{details:n,status:vi.OK,token:r}}))()}validateConfiguration(){var e=Kl.join(", ");if(document.querySelectorAll(e).length>0)throw new Qn(this.methodType,e)}checkIfReadyToPay(e){var t=this;return Wl((function*(){var r=!1;try{var{result:n}=yield t.googlePayClient.isReadyToPay(t.isReadyToPayRequest);r=n}catch(r){if("SecurityError"===r.name)throw t.metricsHandler.logEvent(e),r;t.errorLogger.captureException(r)}if(r){var i=t.callbackIntents.length>0?gl.Unknown:gl.Final;return t.googlePayClient.prefetchPaymentData(Vl(t.isReadyToPayRequest,t.req,t.callbackIntents,i,t.merchantInfo,t.selectedShippingOptionId)),r}throw t.metricsHandler.logEvent(e),new zn(Vs)}))()}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(Vl(this.isReadyToPayRequest,this.req,this.callbackIntents,gl.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case ml.INITIALIZE:case ml.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case ml.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new co("Unknown callbackTrigger: ".concat(e.callbackTrigger),gi.GOOGLE_PAY)),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return Wl((function*(){var r;t.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:n,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(n,i)}))()}dispatchShippingOptionChanged(e,t){var r=this,n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(mi.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var i=ql(e,t);return i?this.status===Zs.DESTROYED?Promise.resolve({optionErrors:[{intent:ml.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:fi.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(mi.SHIPPING_OPTION_CHANGED,{contactOrOption:i},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.metricsHandler.logEvent(vo.EventListenerOnCompleteResponse,$l($l({},t),{},{eventName:mi.SHIPPING_OPTION_CHANGED})),r.metricsHandler.logEvent(mo.ShippingOptionChangeOK),e({optionErrors:Gl(t,ml.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return Wl((function*(){var{updatedContactRequest:r,contactErrors:n}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(r,n);var i,o=t.shippingOptions;r.shippingOptions?(o=r.shippingOptions,t.selectedShippingOptionId=r.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:s,optionErrors:a}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=Object.assign({},r,s),u=[...n,...a];return t.paymentDataChangedComplete(c,u)}))()}dispatchShippingContactChanged(e){var t=this,r={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var i;void 0!==e.shippingAddress&&this.handlers.includes(mi.SHIPPING_CONTACT_CHANGED)?this.status!==Zs.DESTROYED?this.req.dispatchEvent(mi.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.metricsHandler.logEvent(vo.EventListenerOnCompleteResponse,$l($l({},e),{},{eventName:mi.SHIPPING_CONTACT_CHANGED})),t.metricsHandler.logEvent(mo.ShippingAddressChangeOK),n({contactErrors:Gl(e,ml.SHIPPING_ADDRESS),updatedContactRequest:e})})):n({contactErrors:[{intent:ml.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:fi.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):n(r)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(e,t,r,n){var i,{total:o,countryCode:s,currencyCode:a}=t,c=r,u=jl(null!==(i=e.total)&&void 0!==i?i:o),l={totalPrice:u.price,totalPriceLabel:u.label,totalPriceStatus:u.status},d=Object.assign({},{countryCode:s,currencyCode:a},l),h=Hl(bl(t),bl(e,t));h.length>0&&(d.displayItems=h);var p={newTransactionInfo:d},f=Fl(a,n,c,e.shippingOptions);return f&&(p.newShippingOptionParameters=f),p}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(r.error=t[0]),r}requestGooglePayCardNonce(e){var t=this;return Wl((function*(){var r=ql(t.selectedShippingOptionId,t.shippingOptions);yield t.context.refreshWithCurrentAnalyticsToken();try{var n=yield t.paymentMethodMessenger.request(nl.REQUEST_GOOGLE_PAY_CARD_NONCE,e);return t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),yield t.context.updateSession(n.sessionId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:gi.GOOGLE_PAY},token:n};return i&&(s.details.shipping={contact:i},t&&(s.details.shipping.option=t)),o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(n,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof ti||t.errorLogger.captureException(e),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(go.FirstInteraction))}detachElement(e,t){this.element&&(this.element.innerHTML=""),this.status=e,this.metricsHandler.logEvent(t)}}function Xl(){return Xl=Wl((function*(e,t){return{authJwt:(yield e.request(nl.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{session:t})).token,merchantId:"05498866192997955200",merchantName:t.merchantName}})),Xl.apply(this,arguments)}var Jl,Zl,ed=function(e){var t=function(e,t){return Xl.apply(this,arguments)}(e.messenger,e.getSession()),r=ya.load("google-link",{src:"https://pay.google.com/gp/p/js/pay.js"},"google.payments",e.errorLogger);return Promise.all([r,t])};class td{constructor(){this.lockSet=new Set}get isLocked(){return this.lockSet.size>0}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}}!function(e){e.REQUEST_HYDRATION="REQUEST_HYDRATION"}(Jl||(Jl={})),function(e){e.ANALYTICS_TOKEN="_analyticsToken",e.LOCALE="_locale",e.SESSION_ID="_sessionId",e.TRANSLATION_OVERRIDES="_translationOverrides"}(Zl||(Zl={}));class rd{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:r,merchantName:n,applicationId:i,avt:o,hostname:s,locationId:a,instanceId:c,sessionId:u,sourceUrl:l,locale:d}=e;this.applicationId=i,this.locationId=a,this._sessionId=u,this.instanceId=c,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=r,this.merchantName=n,this.hostname=s,this.sourceUrl=l,this._locale=d,this.avt=o}get analyticsToken(){return this._analyticsToken}get sessionId(){return this._sessionId}setSessionId(e){this.setAttribute(Zl.SESSION_ID,e)}setTranslationOverrides(e){this.setAttribute(Zl.TRANSLATION_OVERRIDES,e)}setLocale(e){this.setAttribute(Zl.LOCALE,e)}setAnalyticsToken(e){this.setAttribute(Zl.ANALYTICS_TOKEN,e)}serialize(){return this.serialized||(this.serialized={applePayMerchantIdentifier:this.applePayMerchantIdentifier||"",cashAppPayMerchantIdentifier:this.cashAppPayMerchantIdentifier||"",merchantName:this.merchantName,applicationId:this.applicationId,avt:this.avt,hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,sessionId:this._sessionId,sourceUrl:this.sourceUrl},this._analyticsToken&&(this.serialized.analyticsToken=this._analyticsToken),this._translationOverrides&&(this.serialized.translationOverrides=this._translationOverrides)),this.serialized}setAttribute(e,t){(this.isValueString(t)||e===Zl.TRANSLATION_OVERRIDES)&&(this[e]=t),this.serialized=void 0}isValueString(e){return"string"==typeof e}}var nd=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URL(Hr.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[r,n]=e;t.searchParams.set(r,n)})),t.toString()}(e);return sc({frameborder:"0",height:"0",scrolling:"no",src:t,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"})},id=function(e){var t=new(Co[e.name]||gn);return t.fromSerializedError(e),t},od=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class sd extends Ba{constructor(e){super({name:e,errorSerializer:{serialize:e=>e instanceof gn?od(e):e,deserialize:e=>e instanceof Error?e:id(e)}})}setErrorLogger(e,t){this.setErrorHandler((function(r,n){var i,o,s,a;void 0!==n&&(i=null===(s=n.data.payload)||void 0===s||null===(s=s.session)||void 0===s?void 0:s.instanceId,o=null===(a=n.data.payload)||void 0===a||null===(a=a.session)||void 0===a?void 0:a.sessionId),r instanceof Na?t.logEvent({event:yo.IframeMessengerTimeoutError,eventSource:Ao.App,internalConfigurationValues:r.message},i,o):e.captureException(r)}))}}function ad(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function cd(){var e;return e=function*(e,t,r,n,i){var o=new sd(i);return o.setErrorLogger(t,r),o.connect({origin:Hr.ASSET_URL,window:e.contentWindow},e.id),yield o.sendMessage("INITIALIZE",n),o},cd=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ad(o,n,i,s,a,"next",e)}function a(e){ad(o,n,i,s,a,"throw",e)}s(void 0)}))},cd.apply(this,arguments)}var ud={build:function(e,t,r,n,i){return cd.apply(this,arguments)}};function ld(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function dd(){var e;return e=function*(e,t,r,n){var{applicationId:i,locationId:o,hostname:s,sourceUrl:a}=e;t.logEvent({event:go.InitializeStart,eventSource:Ao.App});var c,u=n.getCurrentLocale();try{var l=yield nd({applicationId:i,hostname:s});c=yield ud.build(l,r,t,{applicationId:i,hostname:s,locale:u,locationId:o})}catch(e){if(t.logEvent({event:go.InitializeError,eventSource:Ao.App}),r.captureException(e),fo(e))throw new ri("initializing the payment method");throw e}try{var{avt:d,sessionId:h,applePartnerInternalMerchantIdentifier:p,cashAppPayMerchantIdentifier:f,merchantName:g,instanceId:m,paymentMethodSupportDetail:v,featureFlagValues:y,isTestMerchant:E}=yield c.request(Jl.REQUEST_HYDRATION,{body:{applicationId:i,hostname:s,locationId:o}});t.setAvt(d);var _=new rd({applePayMerchantIdentifier:p,cashAppPayMerchantIdentifier:f,merchantName:g,applicationId:i,avt:d,hostname:s,instanceId:m,locale:u,locationId:o,sessionId:h,sourceUrl:a});return t.logEvent({event:go.InitializeOK,eventSource:Ao.App,internalConfigurationValues:y},m,h),{featureFlagValues:y,localeStrings:n,messenger:c,paymentMethodSupportDetail:v,session:_,isTestMerchant:E}}catch(e){if(t.logEvent({event:go.InitializeError,eventSource:Ao.App}),fo(e))throw new ri("initializing the payment method");throw e}},dd=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ld(o,n,i,s,a,"next",e)}function a(e){ld(o,n,i,s,a,"throw",e)}s(void 0)}))},dd.apply(this,arguments)}var hd,pd,fd={initializePayment:function(e,t,r,n){return dd.apply(this,arguments)},validateVerificationDetails:function(e,t){var r=[];return e.billingContact&&"object"==typeof e.billingContact||r.push(new Ws(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE","CHARGE_AND_STORE"].includes(e.intent)||r.push(new Ws(t,"details.intent","string")),"CHARGE"!==e.intent&&"CHARGE_AND_STORE"!==e.intent||(e.amount&&"string"==typeof e.amount||r.push(new Ws(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||r.push(new Ws(t,"details.currencyCode","string"))),r}};!function(e){e.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(hd||(hd={})),function(e){e.SUCCESS="SUCCESS",e.CANCEL="CANCEL"}(pd||(pd={}));var gd,md={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function vd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.PENDING="pending",e.FINAL="final"}(gd||(gd={}));var Ed,_d,Sd,Id,Ad={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},Od=["visa","masterCard","jcb","discover","amex"];function Cd(e){return{amount:e.amount,label:e.label,type:e.pending?gd.PENDING:gd.FINAL}}function bd(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function Td(e,t){return t?Cd(t):e}function wd(e,t){return t?t.map(Cd):e}function Rd(e,t){return t?t.map(bd):e}function Pd(){for(var e=3;e>0&&!window.ApplePaySession.supportsVersion(e);)e--;return e}function Nd(e){var{addressLines:t,locality:r,administrativeArea:n,postalCode:i,countryCode:o,givenName:s,familyName:a,emailAddress:c,phoneNumber:u}=e;return{addressLines:t,city:r,countryCode:o&&o.toUpperCase(),email:c,familyName:a,givenName:s,phone:u,postalCode:i,state:n}}function Dd(e){var{amount:t,identifier:r,label:n}=e;return{amount:t,id:r,label:n}}function Ld(e,t,r){return{errors:(n=e,i=[],n.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var[t,r]=e,n=Ad[t]||"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",n,r))})),i),newLineItems:wd(t.lineItems,bl(e,r)),newShippingMethods:Rd(t.shippingMethods,e.shippingOptions),newTotal:Td(t.total,e.total)};var n,i}function xd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xd(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Md(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ud(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Md(o,n,i,s,a,"next",e)}function a(e){Md(o,n,i,s,a,"throw",e)}s(void 0)}))}}class jd extends ia{constructor(e,t,r){if(super(t),this.methodType=gi.APPLE_PAY,this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new aa(this.context),this.paymentRequestLockController=r,this.req=e,void 0===window.ApplePaySession)throw new zn(Fs);if(!window.ApplePaySession.canMakePayments())throw new zn(qs);this.validateConfiguration()}get applePaySession(){if(!this.sessionHandler)throw new ri("Apple Pay Session is expected to exist when it does not.");return this.sessionHandler}set applePaySession(e){this.sessionHandler=e}tokenize(){var e=this;return Ud((function*(){var t=ia.withErrorCapture(e.tokenizeWrapped.bind(e),e.errorLogger,"Apple Pay");return yield t()}))()}tokenizeWrapped(){var e=this;return Ud((function*(){if(e.handleFirstInteraction(),e.throwIfDestroyed(),e.sessionInProgress)throw new ti([sa]);e.applePayPaymentRequest=function(e,t){var r=[...Od];null!=t&&t.isActive(Ui.CanUseInterac)&&r.push("interac");var n,i={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:wd([],bl(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:Rd([],e.shippingOptions),supportedNetworks:r,total:Cd(e.total)};return e.shippingContact&&(i.shippingContact={addressLines:(n=e.shippingContact).addressLines,administrativeArea:n.state,country:md[n.countryCode],countryCode:n.countryCode,emailAddress:n.email,familyName:n.familyName,givenName:n.givenName,locality:n.city,phoneNumber:n.phone,postalCode:n.postalCode}),e.requestBillingContact&&(i.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(i.requiredShippingContactFields=["postalAddress","name","email","phone"]),i}(e.req,e.featureFlagHandler),e.applePaySession=new window.ApplePaySession(Pd(),e.applePayPaymentRequest);var t=e.shippingContactChanged.bind(e);e.applePaySession.onshippingcontactselected=r=>{t(r.shippingContact,e.applePayPaymentRequest)};var r=e.shippingOptionChanged.bind(e);e.applePaySession.onshippingmethodselected=t=>{r(t.shippingMethod,e.applePayPaymentRequest)};var n=new Promise((t=>{e.applePaySession.oncancel=function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.metricsHandler.logEvent(mo.ExternalSessionCancel,JSON.stringify(n)),e.deleteApplePaySession(),t({status:pd.CANCEL})}})),i=new Promise(((t,r)=>{e.applePaySession.onvalidatemerchant=function(){var n=Ud((function*(n){try{var i=yield e.requestApplePayMerchantValidity(n.validationURL,e.applePayPaymentRequest);t(i)}catch(e){r(e)}}));return function(e){return n.apply(this,arguments)}}()})),o=new Promise(((t,r)=>{e.applePaySession.onpaymentauthorized=function(){var n=Ud((function*(n){try{var i=yield e.requestApplePayCardNonce(n);e.deleteApplePaySession(),t(i)}catch(t){e.deleteApplePaySession(),r(t)}}));return function(e){return n.apply(this,arguments)}}()}));e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent(mo.ExternalSessionStart),e.applePaySession.begin();try{var s=yield i;e.applePaySession.completeMerchantValidation(s);var{status:a,token:c,details:u}=yield Promise.race([o,n]);return e.metricsHandler.logEvent(mo.ExternalSessionOK),a===pd.SUCCESS?{details:u,status:vi.OK,token:c}:{status:vi.CANCEL}}catch(t){throw e.metricsHandler.logEvent(mo.ExternalSessionError),t}}))()}destroy(){return this.sessionHandler&&(this.sessionHandler.abort(),this.deleteApplePaySession()),this.status=Zs.DESTROYED,this.metricsHandler.logEvent(vo.Destroyed),Promise.resolve(!0)}validateConfiguration(){var e=this.session;if(!e.applePayMerchantIdentifier)throw new zn(Gs,"applePayMerchantIdentifier");if(!e.locationId)throw new zn(Gs,"locationId")}requestApplePayCardNonce(e){var t=this;return Ud((function*(){yield t.context.refreshWithCurrentAnalyticsToken();var r={applepayData:e.payment},n=t.selectedShippingMethod||t.getDefaultShippingMethod();try{var i=yield t.paymentMethodMessenger.request(hd.REQUEST_APPLE_PAY_CARD_NONCE,r);return t.applePaySession.completePayment(window.ApplePaySession.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,yield t.context.updateSession(i.sessionId),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:gi.APPLE_PAY},status:pd.SUCCESS,token:n};if(i){var a={contact:i};t&&(a.option=Dd(t)),s.details.shipping=a}return o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(i,n)}catch(e){throw t.applePaySession.completePayment(window.ApplePaySession.STATUS_FAILURE),e}}))()}requestApplePayMerchantValidity(e,t){var r=this;return Ud((function*(){var n,i=t&&t.total?t.total.label:null,o=r.session,s={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{n=yield r.paymentMethodMessenger.request(hd.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,s)}catch(e){throw r.applePaySession.abort(),r.deleteApplePaySession(),e}try{return JSON.parse(n.session)}catch(e){throw r.applePaySession.abort(),r.deleteApplePaySession(),e}}))()}shippingContactChanged(e,t){var r=Pd()>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(mi.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(mi.SHIPPING_CONTACT_CHANGED,{contactOrOption:Nd(e)},(e=>{this.metricsHandler.logEvent(vo.EventListenerOnCompleteResponse,kd(kd({},e),{},{eventName:mi.SHIPPING_CONTACT_CHANGED})),this.handleShippingContactUpdate(r,e)})):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===(t=r.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===n&&null!==i&&(n=Dd(i)),void 0!==n&&this.req.hasEventListener(mi.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=bd(n),this.req.dispatchEvent(mi.SHIPPING_OPTION_CHANGED,{contactOrOption:n},(t=>{this.metricsHandler.logEvent(vo.EventListenerOnCompleteResponse,kd(kd({},t),{},{eventName:mi.SHIPPING_OPTION_CHANGED})),e(Object.assign({},r,t))}))):e(r)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var r=Pd()>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(mi.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(mi.SHIPPING_OPTION_CHANGED,{contactOrOption:Dd(e)},r):r()}updateApplePayPaymentRequest(e){e.newTotal&&(this.applePayPaymentRequest.total=e.newTotal),e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),e.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){var t=this;return function(){var r=Ld(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e,t.req);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(mo.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){var t=this;return function(){var r,n,i,o,s=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,o=Ld(r,n,i),yd({status:window.ApplePaySession.STATUS_SUCCESS},o));t.updateApplePayPaymentRequest(s),t.metricsHandler.logEvent(mo.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(s.status,s.newShippingMethods,s.newTotal,s.newLineItems)}}updateApplePayShippingMethodV3(e){var t=this;return function(){var r,n,i,o=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,{newLineItems:wd(n.lineItems,bl(r,i)),newTotal:Td(n.total,r.total)});t.updateApplePayPaymentRequest(o),t.metricsHandler.logEvent(mo.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(o)}}updateApplePayShippingMethodLegacy(e){var t=this;return function(){var r,n,i,o,s=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,o=Ld(r,n,i),yd({status:window.ApplePaySession.STATUS_SUCCESS},o));t.updateApplePayPaymentRequest(s),t.metricsHandler.logEvent(mo.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(s.status,s.newTotal,s.newLineItems)}}getDefaultShippingMethod(){var e=this.applePayPaymentRequest.shippingMethods;return e&&e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}deleteApplePaySession(){delete this.sessionHandler,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent(go.FirstInteraction),this.wasFirstInteractionCalled=!0)}}!function(e){e.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",e.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(Ed||(Ed={})),function(e){e.BADGE="badge",e.LOCKUP="lockup"}(_d||(_d={})),function(e){e.BLACK="black",e.WHITE="white",e.MINT="mint"}(Sd||(Sd={})),function(e){e.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN="REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",e.REQUEST_AFTERPAY_CHECKOUT_HANDLER="REQUEST_AFTERPAY_CHECKOUT_HANDLER"}(Id||(Id={}));var Hd="".concat(Hr.ASSET_URL,"/afterpay.css"),Bd="sq-afterpay-styles",Fd={[an.BLACK]:{[cn.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[cn.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[cn.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[an.MINT]:{[cn.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[cn.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[cn.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},qd={[an.BLACK]:{[cn.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[cn.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[cn.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[an.MINT]:{[cn.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[cn.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[cn.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},Vd=new Set(["US","CA","AU","NZ"]);function Gd(e,t){var r=0;return e.forEach((e=>{r+=Fi.paymentRequestAmountToMoneyAmount(e,t)})),Fi.moneyAmountToPaymentRequestAmount(r,t)}function zd(e,t){return Gd(e.map((e=>e.amount)),t)}var $d=function(e,t){return e.map((e=>({name:e.label,quantity:1,sku:e.id,price:{amount:e.amount,currency:t},imageUrl:e.imageUrl,pageUrl:e.productUrl})))},Yd=function(e,t){return e.map((e=>({displayName:e.label,amount:{amount:e.amount,currency:t}})))},Wd=function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},Kd=function(e){if(e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0){var t=zd(e.lineItems,e.currencyCode);if(e.discounts)t=Gd([t,(r=e.discounts,n=e.currencyCode,"-".concat(zd(r,n)))],e.currencyCode);return{amount:t,currency:e.currencyCode}}var r,n;return{amount:Gd([e.total.amount],e.currencyCode),currency:e.currencyCode}},Qd=function(e,t){return e.shippingOptions.map((e=>({description:"",id:e.id,name:e.label,shippingAmount:{amount:e.amount,currency:t.currencyCode},orderAmount:{amount:e.total.amount,currency:t.currencyCode},taxAmount:{amount:zd(e.taxLineItems||[],t.currencyCode),currency:t.currencyCode}})))},Xd=function(e){var t,r,n=[];return[e.address1,e.address2].forEach((e=>{void 0!==e&&n.push(e)})),e.name&&([t,r]=e.name.split(/\s(?=\S+$)/)),{givenName:t,familyName:r,city:e.suburb,state:e.state,postalCode:e.postcode,countryCode:e.countryCode,phone:e.phoneNumber,addressLines:n}},Jd=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}};function Zd(e,t){return hl({[t]:e},{[t]:{city:"string",countryCode:"string",addressLines:"object",postalCode:"string",state:"string",givenName:"string",familyName:"string"}})}var eh=function(e){return Zd(e,"shippingContact")};function th(e){var t=e.split("-")[1];return Vd.has(t)}var rh=function(e,t){return th(t)?Fd[e]:qd[e]},nh=function(e){return th(e)?"afterpay-brand.svg":"clearpay-brand.svg"},ih=[ti],oh=[In,An,On,Cn];function sh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var ah=[25,50,75,100];class ch{constructor(e,t){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var r=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.weeks;this.PERIOD_TEXT=[this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.today,"2 ".concat(r),"4 ".concat(r),"6 ".concat(r)],t.addLocaleChangedListener((()=>{this.locale=this.context.getSession().locale,this.update()})),e.addEventListener(fl.UPDATE,(()=>{this.update()}))}attach(e,t){var r,n=this;return(r=function*(){n.element=e,Bu.addStyleElement(Hd,Bd,n.resolveStylePromise,n.rejectStylePromise);try{yield n.stylesLoadedPromise}catch(e){throw new ri("attaching the Afterpay Checkout Widget")}var r=n.buildAmounts().map((e=>Fi.moneyAmountToInternationalizedCurrency(e,n.currencyCode,n.locale))),i=!1;t&&t.includeBranding&&(i=!0);var o=nh(n.locale),s='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(Hr.STATIC_ASSET(o),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,r=2*Math.PI*6,n=r*ah[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(n," ").concat(r,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(n.PERIOD_TEXT[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");n.element.insertAdjacentHTML("afterbegin",s),n.attached=!0},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function s(e){sh(o,n,i,s,a,"next",e)}function a(e){sh(o,n,i,s,a,"throw",e)}s(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=nh(this.locale);e.src=Hr.STATIC_ASSET(t)}this.buildAmounts().map((e=>Fi.moneyAmountToInternationalizedCurrency(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var r,n=null===(r=this.element)||void 0===r?void 0:r.querySelector("#ap-payment-amount-".concat(t));n&&(n.innerHTML=e)}))}}buildAmounts(){var e=Fi.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return uh(t,0);case 1:return uh(t,1);case 2:return uh(t,-2);case 3:return uh(t,-1);default:return[]}}}function uh(e,t){var r=Array.from({length:3}).fill(Math.round(e));return r.push(e+t),r}function lh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function dh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){lh(o,n,i,s,a,"next",e)}function a(e){lh(o,n,i,s,a,"throw",e)}s(void 0)}))}}var hh=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),ph=new Set(["AUD","GBP","USD","CAD","EUR"]),fh={[an.BLACK]:"#000",[an.MINT]:"#b2fce4"};class gh extends ia{constructor(e,t,r,n,i){if(super(n),this.methodType=gi.AFTERPAY_CLEARPAY,this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=r,this.paymentRequestLockController=i,this.paymentMessenger=new aa(this.context),this.total=this.totalMoney(),!this.session.locationId)throw new zn(Gs,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",(()=>{delete this.checkoutTokenResponse,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()}))}attach(e,t){var r=this;return dh((function*(){var n,i;r.throwIfDestroyedOrAlreadyAttached(),r.status=Zs.ATTACHED,r.metricsHandler.logEvent(go.AttachStart),r.metricsHandler.logEvent(vo.Configured,t);try{n=pc(e)}catch(e){throw r.metricsHandler.logEvent(go.AttachError),r.status===Zs.ATTACHED&&(r.status=Zs.DETACHED),e}if(!t||!t.useCustomButton){var o=document.createElement("div");n.appendChild(o);var s=o.attachShadow({mode:"open"});try{yield Bu.addStyleElementToTarget(Hd,Bd,s)}catch(e){throw r.status===Zs.ATTACHED&&(r.status=Zs.DETACHED),new ri("attaching Afterpay")}var a=(null==t?void 0:t.buttonColor)||an.BLACK,c=(null==t?void 0:t.buttonType)||cn.BuyNowWithAfterpay,u=rh(a,r.session.locale);if(!u)throw r.status===Zs.ATTACHED&&(r.status=Zs.DETACHED),new kn("buttonColor",a);var l=u[c];if(!l)throw r.status===Zs.ATTACHED&&(r.status=Zs.DETACHED),new kn("buttonType",c);var d=document.createElement("button");d.setAttribute("type","button"),d.setAttribute("class","sq-ap__button"),d.setAttribute("style","background-color: ".concat(fh[a],"; background-image: url(").concat(Hr.STATIC_ASSET(l),");")),s.append(d)}r.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===un.BUY_NOW,r.initializeAfterpayPopup(n),r.metricsHandler.logEvent(go.AttachOK),r.element=n,r.onTokenizeHandlerAdded&&(null===(i=r.element)||void 0===i||i.addEventListener("click",dh((function*(){yield r.openPaymentModal()}))))}))()}attachMessaging(e,t){return this.throwIfDestroyed(),function(e){dc(e,uc)}(e),this.afterpayMessagingLibrary.createPlacements({targetSelector:e,attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size}}),Promise.resolve()}attachCheckoutWidget(e,t){var r=this;return dh((function*(){if(!ph.has(r.req.currencyCode))throw new bn("Currency is not supported by Afterpay. Valid currencies are: ".concat([...ph].join(", ")));var n=new ch(r.req,r.context),i=pc(e);yield n.attach(i,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Fi.convertLocaleToUnderscore(this.session.locale);hh.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(Object.assign({},e,{locale:t}))}onTokenize(e){var t,r=this;this.throwIfDestroyed(),this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:r}=e;this.emitTokenizationResult(t,r)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",dh((function*(){yield r.openPaymentModal()}))),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return dh((function*(){if(e.throwIfDestroyedOrNotAttached(),e.onTokenizeHandlerAdded)throw new _n;var t,r,n=new Promise(((e,n)=>{t=e,r=n}));return e.onTokenizeCallbacks=[function(e,n){void 0===n?void 0!==e?t(e):r(new ti([Yi.UNKNOWN])):r(n)}],yield e.openPaymentModal(),n}))()}destroy(){return this.status===Zs.DESTROYED?Promise.resolve(!1):(this.detachElement(Zs.DESTROYED,vo.Destroyed),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Zs.DETACHED,vo.Detached),Promise.resolve(!0)}internalSetCheckoutToken(){var e=this;return dh((function*(){try{var t=yield e.paymentMessenger.request(Id.REQUEST_AFTERPAY_CHECKOUT_HANDLER,e.buildCheckoutPayload());return e.checkoutTokenResponse=t,e.checkoutTokenResponse.token}catch(t){var r=t;throw Fi.isInstanceOf(t,[...oh,Fn,Rn,bn])||(e.errorLogger.captureException(t),r=new ri("tokenizing with Afterpay")),r}}))()}commenceCheckout(e){var t=this;return dh((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent(go.FirstInteraction)),t.metricsHandler.logEvent(mo.ExternalSessionStart),t.paymentRequestLockController.lock(t),void 0!==t.checkoutTokenResponse&&new Date(t.checkoutTokenResponse.expires)>new Date)e.resolve(t.checkoutTokenResponse.token);else try{var r=yield t.internalSetCheckoutToken();e.resolve(r)}catch(r){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent(mo.ExternalSessionError),t.emitTokenizationResult(void 0,r),e.reject(r.message)}}))()}completeCheckout(e){var t=this;return dh((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){var r;yield t.context.refreshWithCurrentAnalyticsToken();var n=yield t.paymentMessenger.request(Id.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN,t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.context.updateSession(n.sessionID),t.metricsHandler.logEvent(mo.ExternalSessionOK);var i={details:{method:gi.AFTERPAY_CLEARPAY,shipping:{contact:{email:null==n||null===(r=n.afterpayData)||void 0===r?void 0:r.email}}},status:vi.OK,token:n.token};null!=n&&n.billingContact&&(i.details.billing=null==n?void 0:n.billingContact),null!=n&&n.shippingContact&&(i.details.shipping={contact:null==n?void 0:n.shippingContact}),delete t.checkoutTokenResponse,t.emitTokenizationResult(i)}else t.metricsHandler.logEvent(mo.ExternalSessionCancel),t.emitTokenizationResult({status:vi.CANCEL})}catch(e){var o=e;t.metricsHandler.logEvent(mo.ExternalSessionError),Fi.isInstanceOf(e,ih)||(t.errorLogger.captureException(e),o=new ri("tokenizing Afterpay")),t.emitTokenizationResult(void 0,o)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e){this.metricsHandler.logEvent(mo.ShippingOptionChangeOK),this.total.amount=Fi.paymentRequestAmountToMoneyAmount(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(fn.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:Jd(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new Sn("PaymentRequest",fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject(Ed.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var r=this.req;this.metricsHandler.logEvent(mo.ShippingAddressChangeOK),this.req.dispatchEvent(fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:Xd(e)},(e=>{if(e.error)t.reject(Ed.SHIPPING_ADDRESS_UNSUPPORTED);else if(e.shippingErrors)t.reject(Ed.SHIPPING_ADDRESS_UNRECOGNIZED);else{var n=Qd(e,r);t.resolve(n)}}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({result:e,error:t}):this.onTokenizeCallbacks.forEach((r=>{r(e,t)}))}buildInstantWalletTokenPayload(e,t){return{paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),analyticsToken:this.session.analyticsToken,afterpayData:{afterpayToken:e,buyerAmount:t},clientID:this.session.applicationId,locationID:this.locationID,sessionID:this.session.sessionId,websdkVersion:Hr.VERSION,websiteURL:this.session.sourceUrl,requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact}}buildCheckoutPayload(){var e,t={applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl,amount:Kd(this.req)};if(this.req.lineItems&&(t.items=$d(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=Yd(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact?e=this.req.shippingContact:this.req.pickupContact&&(e=this.req.pickupContact),void 0!==e){var r=eh(e);if(!r.isValid)throw new Rn(r.missingFields);t.shipping=Wd(e)}return t}totalMoney(){return{amount:Fi.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return dh((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,r)=>{e.commenceCheckout({resolve:t,reject:r})}));e.afterpayLibrary.transfer(Object.assign({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),n=document.createElement("div");n.id="sq-afterpay-dummy-element-".concat(Xs()),n.style.visibility="hidden",e.appendChild(n),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact},this.req.requestShippingContact||this.req.pickupContact||(this.transferOptions.addressMode="NO_ADDRESS");var i,o,s={countryCode:this.req.countryCode,onCommenceCheckout:(o=dh((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=dh((function*(e){var{data:t}=e;yield r(t)})),function(e){return i.apply(this,arguments)}),target:"#".concat(n.id),shippingOptionRequired:this.req.requestShippingContact,addressMode:this.transferOptions.addressMode};this.req.requestShippingContact?(s.onShippingAddressChange=this.onShippingAddressChange.bind(this),s.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.req.pickupContact&&(this.transferOptions.pickup=!0),this.afterpayLibrary.initializeForPopup(s),e.removeChild(n)}detachElement(e,t){this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.element=null,this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],this.status=e,this.metricsHandler.logEvent(t)}}var mh,vh,yh=function(e){var t="b8a38183b2e5959390488e48f9b109f6a73fd53c",r="https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(t);return Hr.env===xr.staging&&(r="https://portal.stage.afterpay-beta.com/afterpay.js?merchant_key=".concat(t)),Hr.env!==xr.production||e.isTestMerchant||(r="https://portal.afterpay.com/afterpay.js?merchant_key=".concat(t)),Promise.all([ya.load("afterpay",{src:r},"AfterPay",e.errorLogger),ya.load("afterpay-messaging",{src:"https://js.afterpay.com/afterpay-1.x.js"},"Afterpay",e.errorLogger)])};!function(e){e.CUSTOMER_INTERACTION="CUSTOMER_INTERACTION",e.CUSTOMER_DISMISSED="CUSTOMER_DISMISSED",e.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",e.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",e.CUSTOMER_REQUEST_FAILED="CUSTOMER_REQUEST_FAILED"}(mh||(mh={})),function(e){e.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN="REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN"}(vh||(vh={}));class Eh extends gn{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,Eh.prototype)}}function _h(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Sh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){_h(o,n,i,s,a,"next",e)}function a(e){_h(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ah(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ih(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ih(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oh=new Set(["USD"]),Ch="cash_app_pay_v1_element";class bh extends ia{constructor(e,t,r,n,i){if(super(n),this.methodType=gi.CASH_APP_PAY,this.wasFirstInteractionCalled=!1,this.isMobile=!1,this.CashAppPayInstance=e,this.req=t,this.context=n,this.paymentRequestLockController=i,this.paymentMessenger=new aa(this.context),this.tokenizeValidator=function(){return Promise.resolve(!0)},this.clickEventHandler=()=>{this.beginAuthorizationFlow()},!this.session.locationId)throw new zn(Gs,"locationId");if(!this.session.cashAppPayMerchantIdentifier)throw new zn(Gs,"merchantId");if(!Oh.has(this.req.currencyCode))throw new jn("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...Oh].join(", ")));var o=Fi.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode);if(o<1)throw new jn("".concat(this.req.total.amount," is an invalid payment amount. Total amount should be greater than 0"));if(!r.redirectURL)throw new Hn;var s=Ah({actions:{payment:{amount:{currency:this.req.currencyCode,value:o},scopeId:this.session.cashAppPayMerchantIdentifier}}},r);e.customerRequest(s).catch((e=>{this.errorLogger.captureException(e),this.customerRequestFailedEvent()})),this.cashAppEventHandler={[mh.CUSTOMER_INTERACTION]:e=>this.registerExternalEventStart(e),[mh.CUSTOMER_DISMISSED]:()=>{this.dispatchEvent("customerDismissed",null)},[mh.CUSTOMER_REQUEST_APPROVED]:e=>this.customerRequestApprovedEvent(e),[mh.CUSTOMER_REQUEST_DECLINED]:()=>this.customerRequestDeclinedEvent(),[mh.CUSTOMER_REQUEST_FAILED]:()=>this.customerRequestFailedEvent()},Object.keys(mh).forEach((e=>this.CashAppPayInstance.addEventListener(e,this.cashAppEventHandler[e]))),this.paymentRequestLockController.lock(this)}attach(e,t,r){var n=this;return Sh((function*(){n.throwIfDestroyedOrAlreadyAttached();var i=t,o=!1===i;i&&i.values&&(i.theme||(i.theme=i.values));var s=function(e){if(void 0===e||!1===e)return{isValid:!0,missingFields:[]};var t={};return Object.keys(e).forEach((function(e){Zo.has(e)&&(t[e]="string")})),hl(e,t)}(i);if(!s.isValid)throw new Mn(s.missingFields);var a=function(e){var t=[],r=!0;if(void 0===e||!1===e)return{isValid:r,missingFields:t};var n={shape:ds,size:ls,theme:hs,width:ps},i=JSON.parse(vs(e));return Object.entries(i).forEach((function(e){var[i,o]=e;o===Go&&(r=!1,t.push([i,[...n[i]].join(",")]))})),{isValid:r,missingFields:t}}(i);if(!a.isValid)throw new Un(a.missingFields);if(r&&(n.tokenizeValidator=r),"function"!=typeof n.tokenizeValidator)throw new Bn;n.metricsHandler.logEvent(go.AttachStart),i&&n.metricsHandler.logEvent(vo.Configured,i),n.status=Zs.ATTACHED,n.element=o?pc(e):hc(e);try{var c=document.createElement("div");c.id=Ch,o?n.element.before(c):n.element.appendChild(c);var u="#".concat(Ch);n.renderController=yield n.CashAppPayInstance.render(u,{button:i,manage:!1}),n.element.addEventListener("click",n.clickEventHandler),n.metricsHandler.logEvent(go.AttachOK)}catch(e){throw n.metricsHandler.logEvent(go.AttachError),n.status===Zs.ATTACHED&&(n.status=Zs.DETACHED),e}}))()}destroy(){return this.status===Zs.DESTROYED?Promise.resolve(!1):(this.detachElement(Zs.DESTROYED,vo.Destroyed),this.paymentRequestLockController.unlock(this),this.CashAppPayInstance.restart(),Object.keys(mh).forEach((e=>this.CashAppPayInstance.removeEventListener(e,this.cashAppEventHandler[e]))),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(Zs.DETACHED,vo.Detached),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(vo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}customerRequestApprovedEvent(e){var t=this;return Sh((function*(){var r=yield t.createNonce(e);t.dispatchEvent("ontokenization",{tokenResult:r})}))()}customerRequestDeclinedEvent(){var e={status:vi.CANCEL};this.metricsHandler.logEvent(mo.ExternalSessionCancel),this.dispatchEvent("ontokenization",{tokenResult:e})}customerRequestFailedEvent(){var e={status:vi.ERROR,errors:[new ri("tokenizing Cash App Pay")]};this.metricsHandler.logEvent(mo.ExternalSessionError),this.dispatchEvent("ontokenization",{tokenResult:e})}createNonce(e){var t=this;return Sh((function*(){var{customerProfile:r,grants:n,referenceId:i}=e,o=r.cashtag,s=n.payment,a=t.req.total.amount,c=t.req.currencyCode;try{if(!s)throw new Eh;yield t.context.refreshWithCurrentAnalyticsToken();var u=yield t.paymentMessenger.request(vh.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN,{paymentMethodTrackingID:t.context.getPaymentMethodTrackingId(),analyticsToken:t.session.analyticsToken,clientID:t.session.applicationId,locationID:t.session.locationId,sessionID:t.session.sessionId,websdkVersion:Hr.VERSION,websiteURL:t.session.sourceUrl,requestBillingContact:t.req.requestBillingContact,requestShippingContact:t.req.requestShippingContact,applicationId:t.session.applicationId,cashAppPayData:{referenceId:i,grantId:s.grantId,cashtag:o,totalAmount:{amount:a,currency:c},isMobile:t.isMobile}});return t.context.updateSession(u.sessionID),t.metricsHandler.logEvent(mo.ExternalSessionOK),{details:{cashAppPay:{cashtag:o,referenceId:i},method:gi.CASH_APP_PAY},status:vi.OK,token:u.token}}catch(e){var l=e;return t.metricsHandler.logEvent(mo.ExternalSessionError),Fi.isInstanceOf(e,[ti])||(t.errorLogger.captureException(e),l=new ri("tokenizing CashAppPay")),{status:vi.ERROR,errors:[l]}}}))()}beginAuthorizationFlow(){var e=this;return Sh((function*(){if(e.throwIfDestroyedOrNotAttached(),!e.renderController)throw new ri("Could not begin Cash App Pay authorization flow");e.metricsHandler.logEvent(go.CashAppPayClickValidating);try{(yield e.tokenizeValidator())?(e.renderController.begin(),e.metricsHandler.logEvent(go.CashAppPayAuthStart)):e.metricsHandler.logEvent(go.CashAppPayClickInvalid)}catch(t){throw e.metricsHandler.logEvent(go.CashAppPayClickError),t}}))()}registerExternalEventStart(e){this.metricsHandler.logEvent(mo.ExternalSessionStart),this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(go.FirstInteraction)),this.isMobile=e.isMobile,this.dispatchEvent("customerInteraction",Ah({},e))}detachElement(e,t){this.renderController&&this.renderController.destroy();var r=document.getElementById(Ch);r&&r.remove(),this.element&&this.element.removeEventListener("click",this.clickEventHandler),this.status=e,this.metricsHandler.logEvent(t)}}function Th(){return(Th=Sh((function*(e){var t="https://sandbox.kit.cash.app/v1/pay.js";Hr.env!==xr.production||e.isTestMerchant||(t="https://kit.cash.app/v1/pay.js");var r=yield ya.load("cash-app-pay",{src:t},"CashApp",e.errorLogger),n="CAS-CI_SQ_SELLER_STAGING";return Hr.env===xr.sandbox||Hr.env===xr.production&&e.isTestMerchant?n="CAS-CI_SQ_SELLER_SANDBOX":Hr.env===xr.production&&(n="CA-CI_SQ_SELLER"),r.pay({clientId:n})}))).apply(this,arguments)}var wh={initialize:function(e){return Th.apply(this,arguments)}},Rh=function(e,t,r,n,i){return new gh(e,t,r,n,i)},Ph=function(e,t,r){return new jd(e,t,r)},Nh=function(e,t,r,n,i){return new bh(e,t,r,n,i)},Dh=function(e,t,r,n,i){return new Ql(e,t,r,n,i)};function Lh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var xh={build(e,t){var r,n,i;function o(){r=e.generateFreshToken().catch((e=>("UnexpectedAnalyticsClientError"!==e.name&&t.captureException(e),void 0!==n&&(clearInterval(n),n=void 0),i)))}function s(){var e;return e=function*(){return void 0===r?null:i=yield r},s=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Lh(o,n,i,s,a,"next",e)}function a(e){Lh(o,n,i,s,a,"throw",e)}s(void 0)}))},s.apply(this,arguments)}return Object.freeze({beginGenerateToken:o,retrieveCurrentToken:function(){return s.apply(this,arguments)},setupAutoRefresh:function(){void 0===n&&(n=setInterval((()=>{o()}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea))},verifyBuyer:function(t,r){return e.verifyBuyer(t,r)}})}};const kh=[new J,new q,new ut,new Mt,new nt,new qt,new Gt,new Vt];class Mh{constructor(e){const t={debug:e.debug??!1,dist:`${e.release.split("@")[1]}-${e.environment}`,dsn:e.dsn,environment:e.environment,integrations:[...kh,new Qt.GlobalHandlers({onerror:e.useGlobalHandlers??!1,onunhandledrejection:e.useGlobalHandlers??!1})],release:e.release,stackParser:ir,transport:e.transport??Or},r=new Mr(t),n=new me;e.initialScope&&n.update(e.initialScope),this.hub=new _e(r,n),!0===e.useGlobalHandlers&&Ie(this.hub)}captureException(e,t){this.hub.captureException(e,t)}addBreadcrumb(e,t){this.hub.addBreadcrumb(e,t)}}function Uh(e,t,r){const n=new Error(void 0!==r?`${e}\nSee: ${r}`:e);return n.name=t,n}const jh={message:"The verification was not successful",type:"VERIFICATION_NOT_SUCCESSFUL"},Hh={message:"A verification request is already in place",type:"VERIFICATION_IN_PROGRESS"},Bh={message:"The time to complete the verification has expired",type:"VERIFICATION_TIMEOUT"},Fh={analyticsParametersRequiredError:function(){return Uh("The Analytics library must be initialized with analyticsParameters to call verifyBuyer.","AnalyticsParametersRequiredError")},buildError:Uh,invalidArgumentError:function(e,t){return Uh(`The Analytics '${e}' argument must be of type '${t}'`,"InvalidArgumentError")},invalidElementTypeError:function(e,t){return Uh(`An element with selector ${e} must be of type '${t}'`,"InvalidElementTypeError")},invalidFunctionArgumentError:function(e,t,r){return Uh(`The '${e}' function '${t}' argument must be of type '${r}'.`,"InvalidFunctionArgumentError")},invalidFunctionCallbackError:function(e,t){return Uh(`The '${e}' '${t}' callback must be a function.`,"InvalidFunctionCallbackError")},missingArgumentError:function(e){return Uh(`The Analytics '${e}' argument is required.`,"MissingArgumentError")},missingChargeVerificationArgumentError:function(e,t){return Uh(`The '${e}' '${t}' is required when verificationDetails.intent is 'CHARGE'.`,"MissingChargeVerificationArgumentError")},missingElementAttributeError:function(e,t){return Uh(`An element with selector '${e}' attribute '${t}' is required`,"MissingElementAttributeError")},missingElementError:function(e){return Uh(`An element with selector '${e}' cannot be found.`,"MissingElementError")},missingFunctionArgumentError:function(e,t){return Uh(`The '${e}' '${t}' argument is required.`,"MissingFunctionArgumentError")},missingFunctionCallbackError:function(e,t){return Uh(`The '${e}' '${t}' callback is required.`,"MissingFunctionCallbackError")},noIdsError:function(){return Uh("One of analyticsParameters.locationId or analyticsParameters.accountId must be specified.","NoIdsError")},outOfRangeArgumentError:function(e,t,r,n,i=!1){return Uh(`The '${e}' function '${t}' argument must be within range: ${r} and ${n} (${(i?"inclusive":"exclusive")+" of upper limit"}).`,"OutOfRangeArgumentError")},tooManyIdsError:function(){return Uh("Only one of analyticsParameters.locationId or analyticsParameters.accountId can be specified.","TooManyIdsError")},unexpectedAnalyticsClientError:function(){return Uh("An unknown error has occurred","UnexpectedAnalyticsClientError")}},qh={get documentVisibilityState(){return document.visibilityState},windowLocationHref:()=>window.location.href,get windowLocationOrigin(){return window.location.origin},get windowNavigationBeacon(){return window.navigator.sendBeacon.bind(window.navigator)}};let Vh;const Gh=[],zh={};let $h,Yh=e=>{Gh.push(e)};function Wh(e){if(e.origin!==Vh)return;const t=e.data;if("object"==typeof t&&"string"==typeof t.instanceId){const e=zh[t.instanceId];"function"==typeof e&&e(t)}}function Kh(e){$h?.contentWindow&&$h.contentWindow.postMessage(e,Vh)}function Qh(){let e;for(window.addEventListener("message",Wh,!1);e=Gh.shift();)Kh(e);Yh=Kh}function Xh(){$h=document.createElement("iframe"),$h.setAttribute("width","0"),$h.setAttribute("height","0"),$h.setAttribute("src",`${Vh}/payments/data/frame.html?referer=${encodeURIComponent(qh.windowLocationHref())}`),$h.setAttribute("style","border: none !important; display: block !important; visibility: hidden !important"),$h.setAttribute("sandbox","allow-scripts allow-same-origin"),$h.addEventListener("load",Qh),document.body.appendChild($h)}var Jh,Zh,ep={init(e){Vh=e,void 0===$h&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",Xh):Xh())},listenFor(e,t){zh[e]=t},reset(){$h&&(window.removeEventListener("message",Wh),$h.removeEventListener("load",Qh),$h.remove(),$h=void 0),Gh.length=0;for(const e in zh)delete zh[e];document.removeEventListener("DOMContentLoaded",Xh)},send(e){Yh(e)}};!function(e){e.AUTHENTICATED="Y",e.AUTHENTICATION_ATTEMPTED="A",e.CHALLENGE_REQUIRED="C",e.DECOUPLED_CHALLENGE_REQUIRED="D",e.NOT_AUTHENTICATED="N",e.AUTHENTICATION_COULD_NOT_BE_PERFORMED="U",e.INFORMATIONAL_ONLY="I",e.REJECTED="R"}(Jh||(Jh={})),function(e){e._250X400="01",e._390X400="02",e._500X600="03",e._600X400="04",e.FULL_SCREEN="05"}(Zh||(Zh={}));class tp{constructor(e){this.iframeInputs=e,this.eventListenerReference=this.handleResponse.bind(this)}async handle(){const e=new Promise(((e,t)=>{this.threeDSPromiseResolve=e,this.threeDSPromiseReject=t}));return this.build(),this.submit(),e}build(){void 0!==this.iframeInputs.iframeSelector&&document.querySelector(this.iframeInputs.iframeSelector)?this.iframe=document.querySelector(this.iframeInputs.iframeSelector):this.buildDefault();const e=`${this.iframeInputs.baseID}-form`;if(document.getElementById(e))this.form=document.getElementById(e);else{this.form=document.createElement("form"),this.form.setAttribute("id",e),this.form.setAttribute("name",`${this.iframeInputs.baseName}Form`),this.form.setAttribute("method","POST"),this.form.setAttribute("action",this.iframeInputs.notificationURL),this.form.setAttribute("target",this.iframe.name);const t=document.createElement("input");t.setAttribute("name",this.iframeInputs.notificationData.name),t.setAttribute("value",this.iframeInputs.notificationData.data),t.setAttribute("type","hidden"),this.form.appendChild(t),document.body.appendChild(this.form)}window.addEventListener("message",this.eventListenerReference)}buildDefault(){const e=`${this.iframeInputs.baseID}-modal`;document.getElementById(e)?this.modal=document.getElementById(e):(this.modal=document.createElement("div"),this.modal.id=e,this.modal.classList.add("square_threeds_modal"),document.body.appendChild(this.modal));const t=`${this.iframeInputs.baseID}-iframe`,r=document.getElementById(t);r&&this.modal.contains(r)?this.iframe=document.getElementById(t):(this.iframe=document.createElement("iframe"),this.iframe.id=t,this.iframe.name=`${this.iframeInputs.baseName}Iframe`,this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("width",this.iframeInputs.width),this.iframe.setAttribute("height",this.iframeInputs.height),this.iframe.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-pointer-lock"),this.iframe.setAttribute("style","visibility: hidden"),this.iframe.setAttribute("allowpaymentrequest","false"),this.iframe.setAttribute("allowfullscreen","false"),this.iframe.setAttribute("allow","payment *;publickey-credentials-get *"),this.iframe.classList.add("square_threeds_iframe"),this.modal.appendChild(this.iframe))}handleResponse(e){const t=e.data;if("object"==typeof t&&t.type===this.iframeInputs.listenerMessageType){this.destroy();const e=this.iframeInputs.validateMessage(t);if(e.isValid)this.threeDSPromiseResolve(t);else{const r={message:e.message??`Square 3DS Iframe received event: ${JSON.stringify(t)}`,type:e.type??"THREEDS_IFRAME_INVALID_RESPONSE_MESSAGE"};this.threeDSPromiseReject(r)}}}submit(){this.form.isConnected?(this.form.submit(),void 0!==this.iframeInputs.onShow&&this.iframeInputs.onShow(this.iframe,this.modal),void 0!==this.iframeInputs.timeoutSeconds&&(this.timeoutID=window.setTimeout(this.timedOut.bind(this),1e3*this.iframeInputs.timeoutSeconds))):(this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_FORM_DISCONNECTED")))}timedOut(){this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_TIMEOUT"))}destroy(){void 0!==this.timeoutID&&window.clearTimeout(this.timeoutID),window.removeEventListener("message",this.eventListenerReference),void 0!==this.iframeInputs.onDestroy&&this.iframeInputs.onDestroy(this.iframe),this.form.isConnected&&this.form.remove(),void 0!==this.modal&&this.modal.isConnected&&(this.iframe.isConnected&&this.iframe.remove(),this.modal.remove())}}function rp(e){switch(e){case"SQUARE_3DS_IFRAME_TIMEOUT":return{message:"Three ds method timed out while waiting for a response.",type:"THREEDS_METHOD_TIMEOUT"};case"SQUARE_3DS_IFRAME_FORM_DISCONNECTED":return{message:"Form is no longer connected.",type:"THREEDS_METHOD_FORM_DISCONNECTED"};default:return{message:`Three ds method failed with unexpected error: ${e}`,type:"THREEDS_METHOD_FAILED"}}}class np{constructor(e){if(void 0===e.threeDsMethodUrl||void 0===e.threeDsMethodNotificationUrl)throw new Error(`Cannot complete 3DS method flow, one or more of threeDSMethodUrl and threeDSMethodNotificationUrl are undefined. Transaction data: ${JSON.stringify(e)}`);this.threeDsMethodUrl=e.threeDsMethodUrl,this.threeDSMethodData={threeDSMethodNotificationURL:e.threeDsMethodNotificationUrl,threeDSServerTransID:e.threeDSServerTransId},this.square3DSMethodIframe=new tp({baseID:"sq-threeds-3ds-method",baseName:"3DSMethod",getErrorMessage:rp,height:"10",listenerMessageType:"threeDsMethodResponse",notificationData:{data:btoa(JSON.stringify(this.threeDSMethodData)),name:"threeDSMethodData"},notificationURL:this.threeDsMethodUrl,timeoutSeconds:11,validateMessage:this.validateMessage.bind(this),width:"10"})}async handle3DSMethod(){return this.square3DSMethodIframe.handle()}validateMessage(e){return e.threeDsServerTransId===this.threeDSMethodData.threeDSServerTransID?{isValid:!0}:{isValid:!1,message:`Received 3DS method response with transaction ID ${e.threeDsServerTransId}, expected ${this.threeDSMethodData.threeDSServerTransID}`,type:"THREEDS_METHOD_INCORRECT_TRANSACTION_ID"}}}const ip="data-challenge-displayed",op="VISIBLE";function sp(e){return"SQUARE_3DS_IFRAME_FORM_DISCONNECTED"===e?{message:"Form is no longer connected.",type:"CHALLENGE_FLOW_FORM_DISCONNECTED"}:{message:`Challenge flow failed with error: ${e}`,type:"CHALLENGE_FLOW_FAILED"}}class ap{constructor(e,t,r,n){if(this.errorLogger=t,this.esLogger=r,void 0===e.acsUrl||void 0===e.encodedCReq)throw new Error(`Cannot complete Challenge flow, acsUrl or encodedCReq is undefined. Transaction data: ${JSON.stringify(e)}`);this.acsUrl=e.acsUrl,this.challengeFlowData={encodedCReq:e.encodedCReq,threeDSServerTransID:e.threeDSServerTransId};const i=this.decodeChallengeWindowSize();void 0!==n&&({challengeDisplayedCallback:this.challengeDisplayedCallback,challengeHiddenCallback:this.challengeHiddenCallback,elementSelector:this.iframeSelector}=n);const o={baseID:"sq-threeds-challenge-flow",baseName:"3DSChallengeFlow",getErrorMessage:sp,height:`${i.height}`,listenerMessageType:"challengeResponse",notificationData:{data:this.challengeFlowData.encodedCReq,name:"creq"},notificationURL:this.acsUrl,onDestroy:this.onDestroy.bind(this),onShow:this.onShow.bind(this),timeoutSeconds:610,validateMessage:this.validateMessage.bind(this),width:`${i.width}`};void 0!==this.iframeSelector&&(o.iframeSelector=this.iframeSelector),this.squareChallengeFlowIframe=new tp(o)}async handleChallengeFlow(){const e=this.decodeCReq(this.challengeFlowData.encodedCReq);return e&&this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_req",tds_analyticsjs_c_req_message_version:e.messageVersion,tds_base_three_ds_server_trans_id:e.threeDsServerTransId||this.challengeFlowData.threeDSServerTransID}),this.squareChallengeFlowIframe.handle().then((e=>(this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_res",tds_analyticsjs_c_res_message_version:e.messageVersion,tds_analyticsjs_c_res_trans_status:e.transStatus,tds_base_three_ds_server_trans_id:e.threeDsServerTransId}),e)))}onShow(e,t){e.setAttribute(ip,op),e.setAttribute("style","visibility: visible"),void 0!==this.challengeDisplayedCallback&&this.challengeDisplayedCallback(),t&&t.classList.add("square_threeds_modal__show")}onDestroy(e){const t=e.getAttribute(ip)===op;e.setAttribute(ip,"REMOVED"),void 0!==this.challengeHiddenCallback&&t&&this.challengeHiddenCallback()}validateMessage(e){return e.threeDsServerTransId===this.challengeFlowData.threeDSServerTransID?{isValid:!0}:{isValid:!1,message:`Received Challenge response with transaction ID ${e.threeDsServerTransId}, expected ${this.challengeFlowData.threeDSServerTransID}`,type:"CHALLENGE_RESPONSE_INCORRECT_TRANSACTION_ID"}}decodeChallengeWindowSize(){let e=Zh._250X400;try{const t=JSON.parse(atob(this.challengeFlowData.encodedCReq));null!==t&&"object"==typeof t&&"challengeWindowSize"in t&&(e=t.challengeWindowSize)}catch(e){this.errorLogger.captureException(e)}switch(e){case Zh._390X400:return{height:400,width:390};case Zh._500X600:return{height:600,width:500};case Zh._600X400:return{height:400,width:600};case Zh.FULL_SCREEN:return{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};case Zh._250X400:default:return{height:400,width:250}}}decodeCReq(e){try{return JSON.parse(atob(e))}catch(t){return this.errorLogger.addBreadcrumb({data:{encodedCReq:e},message:"Unable to parse JSON for challenge request message",type:"error"}),this.errorLogger.captureException(t),null}}}var cp;!function(e){e.COMPLETED="COMPLETED",e.ERROR="ERROR"}(cp||(cp={}));class up{constructor(e,t){this.userChallenged=!1,this.esLogger=e,this.errorLogger=t}async execute3dsAuthentication(e,t){this.configuration=e,this.threeDsTransactionData=t,await this.handle3DSMethodFlow();try{const e=await this.authenticate();await this.handleAuthenticateResponse(e)}catch(e){this.handleError(e)}}async handle3DSMethodFlow(){if(void 0!==this.threeDsTransactionData?.threeDsMethodUrl)try{const e=new np(this.threeDsTransactionData);await e.handle3DSMethod()}catch(e){this.errorLogger.captureException(e)}}async handleChallengeFlow(e){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"buyer_challenged",analyticsjsverification_challenge_type:"3DS",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken});const t={threeDSServerTransId:e.three_ds_server_trans_id};return void 0!==e.encoded_creq&&(t.encodedCReq=e.encoded_creq),void 0!==e.challenge_acs_url&&(t.acsUrl=e.challenge_acs_url),new ap(t,this.errorLogger,this.esLogger,this.configuration.verifyBuyerCustomElement).handleChallengeFlow()}authenticate(){const e={browser_info:{color_depth:window.screen.colorDepth,java_enabled:window.navigator.javaEnabled(),screen_height:window.innerHeight,screen_width:window.innerWidth},client_id:"",token:this.threeDsTransactionData.verificationToken};return this.configuration.callbacks.postAuthenticate(e)}async handleAuthenticateResponse(e){if(void 0===e.errors)if(e.three_ds_trans_status===Jh.CHALLENGE_REQUIRED)try{this.userChallenged=!0,await this.handleChallengeFlow(e),this.configuration.callbacks.onComplete({status:cp.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:!0})}catch(e){this.handleError(e)}else this.configuration.callbacks.onComplete({status:cp.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged});else this.configuration.callbacks.onComplete({status:cp.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}handleError(e){this.errorLogger.captureException(e),this.configuration.callbacks.onComplete({status:cp.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}}class lp{constructor(e,t,r){this.callback=e,this.onError=r,this.called=!1,this.callback=e,this.timeout=window.setTimeout((()=>this.timedOut()),t),this.onError=r}invoke(...e){this.called?this.callback(...this.onError):(clearTimeout(this.timeout),this.called=!0,this.callback(...e))}timedOut(){this.invoke(...this.onError)}}function dp(e){return"type"in e&&"message"in e}class hp{constructor(e,t,r,n,i){this.instanceId=e,this.applicationId=t,this.analyticsParameters=r,this.esLogger=n,this.errorLogger=i,this.challengeUpdatesQueue=[],this.verificationUpdatePending=!1,this.userChallenged=!1,(()=>{this.pendingVerifyBuyerCall&&this.verifyBuyer(this.pendingVerifyBuyerCall.verificationId,this.pendingVerifyBuyerCall.source,this.pendingVerifyBuyerCall.details,this.pendingVerifyBuyerCall.callback,this.pendingVerifyBuyerCall.verifyBuyerCustomElement)})()}verifyBuyer(e,t,r,n,i){void 0===this.verifyBuyerCallback?(this.squareThreeds=new up(this.esLogger,this.errorLogger),this.verifyBuyerCallback=new lp(((e,t)=>{n(e,t),delete this.verifyBuyerCallback}),9e5,[Bh]),this.getVerification(e,t,r)):n(Hh,null)}updateVerification(e,t){const r=t.some((e=>{if("SQUARE_THREEDS"===e.type){const t=e.square_threeds_verification?.status;return function(e){return"CANCELED"===e||"REJECTED"===e||"AUTHENTICATED"===e||"COMPLETED"===e}(t)||"ERROR"===t}return!1})),n={challengeUpdates:t,token:this.token},i={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:n,instanceId:this.instanceId,type:"requestVerificationUpdate",verificationId:e,version:2};!this.verificationUpdatePending||r?(ep.send(i),this.verificationUpdatePending=!r):this.challengeUpdatesQueue.push(t)}handleThreeDsAuthenticate(e,t){dp(t)?this.threeDsAuthenticatePromiseReject(t):this.threeDsAuthenticatePromiseResolve(t)}handleChallenges(e,t){if(void 0===this.verifyBuyerCallback)return;const r=this.challengeUpdatesQueue.shift();if(void 0!==r?this.updateVerification(e,r):this.verificationUpdatePending=!1,dp(t))return void this.verifyBuyerCallback.invoke(t,null);this.token=t.token;const n={token:this.token,userChallenged:this.userChallenged};switch(t.status){case"COMPLETED":this.verifyBuyerCallback.invoke(null,n);break;case"CANCELED":this.verifyBuyerCallback.invoke({...jh,token:t.token},null);break;case"PENDING":for(const r of t.challenges)if("SQUARE_THREEDS"===r.type){if(this.squareThreedsConfiguration={callbacks:{onComplete:t=>{this.handleSquareThreeDsComplete(t,e)},postAuthenticate:t=>this.handlePostAuthenticate(t,e)}},!this.isValidSquareThreeDsChallenge(r))return;this.squareThreeDsTransactionData={directoryServerId:r.square_three_ds_verification.directory_server_id,messageVersion:r.square_three_ds_verification.message_version,threeDSServerTransId:r.square_three_ds_verification.three_ds_server_transaction_id,threeDsMethodNotificationUrl:r.square_three_ds_verification?.three_ds_method_notification_url,threeDsMethodUrl:r.square_three_ds_verification?.three_ds_method_url,verificationId:e,verificationToken:this.token},this.squareThreeds.execute3dsAuthentication(this.squareThreedsConfiguration,this.squareThreeDsTransactionData)}break;default:this.errorLogger.captureException(Fh.buildError(`Invalid verification response status: ${t.status}`,"UNKNOWN_ERROR"))}}isValidSquareThreeDsChallenge(e){return void 0!==e.square_three_ds_verification?.three_ds_server_transaction_id}getVerification(e,t,r){const n={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:{source:t,verificationDetails:r},instanceId:this.instanceId,type:"requestVerification",verificationId:e,version:2};ep.send(n)}handleSquareThreeDsComplete(e,t){this.userChallenged=e.userChallenged;const r={square_threeds_verification:{directory_server_id:this.squareThreeDsTransactionData.directoryServerId,message_version:this.squareThreeDsTransactionData.messageVersion,status:e.status===cp.COMPLETED?cp.COMPLETED:cp.ERROR,three_ds_server_transaction_id:e.threeDsServerTransId},type:"SQUARE_THREEDS"};this.updateVerification(t,[r])}handlePostAuthenticate(e,t){const r=new Promise(((e,t)=>{this.threeDsAuthenticatePromiseResolve=e,this.threeDsAuthenticatePromiseReject=t}));return ep.send({analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:{...e,client_id:this.applicationId},instanceId:this.instanceId,type:"requestThreeDsAuthenticate",verificationId:t,version:3}),r}}function pp(e,t){if(!e)throw Fh.missingFunctionCallbackError("IframeCustomElement",t);if("function"!=typeof e)throw Fh.invalidFunctionCallbackError("IframeCustomElement",t)}function fp(e){if("object"!=typeof e||!e)return"";const t=[];return"string"==typeof e.familyName&&e.familyName&&t.push("familyName"),"string"==typeof e.givenName&&e.givenName&&t.push("givenName"),"string"==typeof e.email&&e.email&&t.push("email"),"string"==typeof e.country&&e.country&&t.push("country"),"string"==typeof e.countryName&&e.countryName&&t.push("countryName"),"string"==typeof e.region&&e.region&&t.push("region"),"string"==typeof e.city&&e.city&&t.push("city"),"object"==typeof e.addressLines&&e.addressLines.join()&&t.push("addressLines"),"string"==typeof e.postalCode&&e.postalCode&&t.push("postalCode"),"string"==typeof e.phone&&e.phone&&t.push("phone"),t.join(",")}class gp{constructor(e,t,r,n){this.applicationId=e,this.esLogger=t,this.errorLogger=r,this.instanceId=`sq-analytics-${(new Date).getMilliseconds()}-${1e5*Math.random()}`,function(e,t){if(!e)throw Fh.missingArgumentError("applicationId");if("string"!=typeof e)throw Fh.invalidArgumentError("applicationId","string");if(t){const e="locationId"in t,r="accountId"in t;if(!e&&!r)throw Fh.noIdsError();if(e&&r)throw Fh.tooManyIdsError();if(e&&"string"!=typeof t.locationId)throw Fh.invalidArgumentError("analyticsParameters.locationId","string");if(r&&"string"!=typeof t.accountId)throw Fh.invalidArgumentError("analyticsParameters.accountId","string")}}(e,n),ep.listenFor(this.instanceId,this.messageReceived.bind(this)),n&&(this.verifier=new hp(this.instanceId,this.applicationId,n,this.esLogger,this.errorLogger),this.analyticsParameters=n)}getToken(e){try{if(void 0!==this.tokenCallback)return;this.tokenCallback=e;const t={applicationId:this.applicationId,instanceId:this.instanceId,type:"requestToken",version:1};ep.send(t)}catch(e){throw this.errorLogger.captureException(e),Fh.unexpectedAnalyticsClientError()}}verifyBuyer(e,t,r,n){const i=t,o=`verify-buyer-${(new Date).getMilliseconds()}-${1e5*Math.random()}`;try{this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_invoked",analyticsjsverification_amount:i.amount,analyticsjsverification_contact_fields:fp(i.billingContact),analyticsjsverification_currency:i.currencyCode,analyticsjsverification_custom_score:null===i.customScore?void 0:i.customScore,analyticsjsverification_id:o,analyticsjsverification_intent:i.intent,analyticsjsverification_source:e,analyticsjsverification_source_prefix:e.substr(0,5),analyticsjsverification_square_product:i.squareProduct})}catch(e){throw this.errorLogger.captureException(e),Fh.unexpectedAnalyticsClientError()}try{!function(e,t,r,n,i){const o="verifyBuyer";if(!e)throw Fh.analyticsParametersRequiredError();if(void 0===t)throw Fh.missingFunctionArgumentError(o,"source");if("string"!=typeof t)throw Fh.invalidFunctionArgumentError(o,"source","string");if(!r)throw Fh.missingFunctionArgumentError(o,"verificationDetails");if("object"!=typeof r)throw Fh.invalidFunctionArgumentError(o,"verificationDetails","object");if(function(e,t){const r="verificationDetails";if("object"!=typeof t.billingContact)throw Fh.invalidFunctionArgumentError(e,`${r}.billingContact`,"object");const{customScore:n}=t;if(null!=n){if("number"!=typeof n||Number.isNaN(n))throw Fh.invalidFunctionArgumentError(e,`${r}.customScore`,"integer");if(n<0||n>1e3)throw Fh.outOfRangeArgumentError(e,`${r}.customScore`,0,1e3,!0)}if("string"!=typeof t.intent)throw Fh.invalidFunctionArgumentError(e,`${r}.intent`,"string");if("CHARGE"===t.intent||"CHARGE_AND_STORE"===t.intent){if(!t.currencyCode)throw Fh.missingChargeVerificationArgumentError(e,`${r}.currencyCode`);if("string"!=typeof t.currencyCode)throw Fh.invalidFunctionArgumentError(e,`${r}.currencyCode`,"string");if(!t.amount)throw Fh.missingChargeVerificationArgumentError(e,`${r}.amount`);if("string"!=typeof t.amount)throw Fh.invalidFunctionArgumentError(e,`${r}.amount`,"string")}}(o,r),!n)throw Fh.missingFunctionCallbackError(o,"verifyBuyerCallback");if("function"!=typeof n)throw Fh.invalidFunctionCallbackError(o,"verifyBuyerCallback");void 0!==i&&(function(e){if("string"!=typeof e)throw Fh.invalidArgumentError("iframeElementSelector","string");const t=document.querySelector(e);if(null===t)throw Fh.missingElementError(e);if(null===t.getAttribute("name"))throw Fh.missingElementAttributeError(e,"name");if("iframe"!==t.tagName.toLowerCase()||null===t.contentDocument&&null===t.contentWindow)throw Fh.invalidElementTypeError(e,"IFrameElement")}(i.elementSelector),pp(i.challengeDisplayedCallback,"elementVisibleCallback"),pp(i.challengeHiddenCallback,"elementRemovedCallback"))}(this.analyticsParameters,e,i,r,n)}catch(t){throw this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_completed",analyticsjsverification_error:t.message,analyticsjsverification_id:o,analyticsjsverification_source:e}),t}try{this.verifier.verifyBuyer(o,e,i,((t,n)=>{const i={analyticsjs_event:"verify_buyer_completed",analyticsjsverification_id:o,analyticsjsverification_source:e};t&&(i.analyticsjsverification_error=t.message),n&&(i.analyticsjsverification_verification_token=n.token),this.esLogger.trackAnalyticsEvent(i),r(t,n)}),n)}catch(e){throw this.errorLogger.captureException(e),Fh.unexpectedAnalyticsClientError()}}messageReceived(e){if("receiveToken"===e.type&&"function"==typeof this.tokenCallback)this.tokenCallback(e.token),delete this.tokenCallback;else if("receiveVerification"===e.type||"receiveVerificationUpdate"===e.type){const t="receiveVerification"===e.type?"receive_verification":"receive_verification_update";this.esLogger.trackAnalyticsEvent({analyticsjs_event:t,analyticsjsverification_id:e.verificationId,analyticsjsverification_verification_token:e.verificationId}),this.verifier.handleChallenges(e.verificationId,e.response)}else"receiveThreeDsAuthenticate"===e.type&&(this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_three_ds_authenticate",analyticsjsverification_id:e.verificationId,analyticsjsverification_verification_token:e.verificationId}),this.verifier.handleThreeDsAuthenticate(e.verificationId,e.response))}}const mp=(e,t,r,n)=>new gp(e,t,r,n),vp=/^https?:\/\//;function yp(e){if(!e)return"";if(!vp.test(e))return"[Not Parsable]";const t=new URL(e);return`${t.protocol}//${t.host}`}const Ep={buyer_challenged:"analyticsjsverification",receive_three_ds_authenticate:"analyticsjsverification",receive_verification:"analyticsjsverification",receive_verification_update:"analyticsjsverification",verify_buyer_completed:"analyticsjsverification",verify_buyer_invoked:"analyticsjsverification"};function _p(e){const t=document.cookie.split(";");for(const r of t){const[t,n]=r.split("=");if(void 0!==t&&t.trim()===e&&void 0!==n)return decodeURIComponent(n)}return null}class Sp{constructor(e,t,r,n){const{locationId:i,avt:o}=r;this.es=e,this.errorLogger=n,this.baseEvent=function(e,t,r){return"accountId"in r?{anonymous_user_token:t,oauth_credential_account_id:r.accountId,oauth_credential_client_id:e}:{anonymous_user_token:t,oauth_credential_client_id:e,oauth_credential_location_id:r.locationId}}(t,o,{locationId:i??""})}trackAnalyticsEvent(e){try{const t={catalog_name:Ep[e.analyticsjs_event],...this.baseEvent,browser_height:window.innerHeight,browser_width:window.innerWidth,device_screen_height:window.screen.height,device_screen_width:window.screen.width,subject_anonymous_token:_p("_savt"),webpage_base_url:qh.windowLocationOrigin,webpage_full_url:yp(qh.windowLocationHref()),webpage_path:"",webpage_referrer:yp(window.document.referrer),webpage_referrer_path:"",webpage_referrer_search:"",webpage_search:"",webpage_title:window.document.title,...e};this.es.trackV2(t)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream Track Error",type:"error"}),this.errorLogger.captureException(t)}}trackTdsEvent(e){try{this.es.trackV2(e)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream TrackTdsEvent Error",type:"error"}),this.errorLogger.captureException(t)}}}class Ip{constructor(e){this.metricsBatchUrl=`${e.pciConnectApiUrl}/payments/mtx/v2`,this.errorLogger=e.errorLogger,this.analyticsClientVersion=e.analyticsClientVersion,this.metricsBuffer=[],this.disableBeacon=!1}trackV2(e){const t={u_library_name:"analytics-client",u_library_version:this.analyticsClientVersion,...e};this.postMetricsEvent(t,!1)}postMetricsEvent(e,t=!1){this.disableBeacon?Qr(this.metricsBatchUrl,{body:{analytics:[e]}}).catch((t=>{this.errorLogger.addBreadcrumb({data:{event:e},message:"Unable to HTTP Post analytics event",type:"error"}),this.errorLogger.captureException(t)})):(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===qh.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=setInterval((()=>{this.buildAndSendBeacon()}),1e3)))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{const e=new Blob([JSON.stringify({analytics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});qh.windowNavigationBeacon(this.metricsBatchUrl,e)}catch(e){this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send beacons for analytics events",type:"error"}),this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Qr(this.metricsBatchUrl,{body:{analytics:this.metricsBuffer}}).catch((e=>{this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send HTTP request for analytics events",type:"error"}),this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}}const Ap={setupClient(e,t){const{connectApiUrl:r,environment:n,hostname:i,locationId:o,pciConnectApiUrl:s,version:a,webSdkV1Version:c}=t;ep.init(r);const u=void 0===a||""===a?`web-payments-sdk@${c}`:`analytics-client@${a}`,l=new Mh({dsn:"https://4197e265423545aba2d849d023e8cd33@o160250.ingest.sentry.io/1516559",environment:n,initialScope:{tags:{applicationId:e,applicationUrl:i,sourceName:"analytics-client",webSdkV1Version:c}},release:u}),d=new Ip({analyticsClientVersion:u,errorLogger:l,pciConnectApiUrl:s}),h=new Sp(d,e,t,l);return void 0===o?mp(e,h,l):mp(e,h,l,{locationId:o})}};function Op(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Op(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Tp="".concat(Hr.ASSET_URL,"/square-threeds-modal.css");class wp{constructor(e,t,r){this.applicationId=e,this.locationId=t&&t.length>0?t:void 0,this.activeTokenPromise=null,this.avt=r}generateFreshToken(){var e,t=this;return(e=function*(){var e=t.getAnalyticsClient(),r=yield t.getTokenPromise(e);return t.activeTokenPromise=null,r},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){bp(o,n,i,s,a,"next",e)}function a(e){bp(o,n,i,s,a,"throw",e)}s(void 0)}))})()}verifyBuyer(e,t){var r,n=this.getAnalyticsClient(),i=Cp(Cp({},t),{},{billingContact:(r=t.billingContact,function(e){return"region"in e||"country"in e||"countryName"in e}(r)?r:{addressLines:r.addressLines,familyName:r.familyName,givenName:r.givenName,email:r.email,country:r.countryCode,phone:r.phone,postalCode:r.postalCode,region:r.state,city:r.city})});return this.verifyBuyerPromise(n,e,i)}getAnalyticsClient(){if(this.analyticsClient)return this.analyticsClient;Bu.addStyleElement(Tp,"sq-threeds-modal-styles");var e=Ap.setupClient(this.applicationId,{avt:this.avt,connectApiUrl:Hr.CONNECT_API_URL,environment:Hr.env,hostname:s.windowLocation.origin,locationId:this.locationId,pciConnectApiUrl:Hr.API_URL,version:Hr.ANALYTICS_CLIENT_VERSION,webSdkV1Version:Hr.VERSION});return this.analyticsClient=e,e}getTokenPromise(e){return this.activeTokenPromise||(this.activeTokenPromise=new Promise((t=>{e.getToken((e=>{t(e)}))}))),this.activeTokenPromise}verifyBuyerPromise(e,t,r){return new Promise(((n,i)=>{e.verifyBuyer(t,r,((e,t)=>{e?i(e):null!==t?n(t):i(new ri("Received null verifyBuyer details without an error object"))}))}))}}function Rp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Pp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Rp(o,n,i,s,a,"next",e)}function a(e){Rp(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Np(e,t){var{paymentMethodSupportDetail:r,metricsHandler:n}=t,i=t.getSession();if(!i.locationId||0===i.locationId.length)throw new zn(Gs,"locationId");if(r&&r[e]&&!r[e].IsSupported){var{UnsupportedReasonType:o}=r[e],s=$s;throw o&&o in Bs&&(s=Ys[o]),n.logEvent(go.BuildError),new zn(s)}}function Dp(e,t){if(!(e instanceof Nl))throw t.metricsHandler.logEvent(go.BuildError),new Rn([["paymentRequest","PaymentRequest"]])}class Lp{constructor(e,t,r){this.localeStrings=new Vo(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap}overrideStrings(e){var t=this;return Pp((function*(){try{var r=yield t.getPaymentContext(Ao.App);if(!r.featureFlagHandler.isActive(Ui.CanUseOverrideStrings))throw new qn("overrideStrings");r.metricsHandler.logEvent(vo.OverrideStrings,e),r.setTranslationOverrides(e)}catch(e){if(fo(e))throw t.errorLogger.captureException(e),new ri("overriding the strings");throw e}}))()}setLocale(e){var t=this;return Pp((function*(){try{var r=yield t.getPaymentContext(Ao.App);return r.metricsHandler.logEvent(vo.SetLocale,e),r.setLocale(e)}catch(e){if(fo(e))throw t.errorLogger.captureException(e),new ri("setting the locale");throw e}}))()}verifyBuyer(e,t){var r=this;return Pp((function*(){var n=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||n.push(new Ws("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||n.push(new Ws("verifyBuyer","source","string")),t&&"object"==typeof t?n.push(...fd.validateVerificationDetails(t,"verifyBuyer")):n.push(new Ws("verifyBuyer","details","object")),n.length>0)throw new Ks(n);var i=yield r.getPaymentContext(Ao.App,!1);try{i.metricsHandler.logEvent(go.VerificationStart);var o=yield i.analyticsManager.verifyBuyer(e,t);return i.metricsHandler.logEvent(go.VerificationOK),o}catch(e){if(i.metricsHandler.logEvent(go.VerificationError),"UnexpectedAnalyticsClientError"===e.name)throw new ri("verifying buyer");throw new Tn(e)}}))()}card(e){var t=this;return Pp((function*(){var r=yield t.getPaymentContext(Ao.Card);r.metricsHandler.logEvent(go.BuildStart);try{var n=new Xu(r,e);return r.metricsHandler.logEvent(go.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(go.BuildError),e}}))()}paymentRequest(e){var t=new td,r=new Nl(e,this.localeStrings,t);return this.paymentRequestLockMap.set(r,t),this.getPaymentContext(Ao.PaymentRequest).then((t=>{var{metricsHandler:n}=t;r.setMetricsHandler(n),n.logEvent(vo.Configured,e)})),r}googlePay(e){var t=this;return Pp((function*(){var r=yield t.getPaymentContext(Ao.GooglePay);r.metricsHandler.logEvent(go.BuildStart),Np(Ts.GOOGLE_PAY,r),function(e){if("undefined"==typeof ShadowRoot)throw e.metricsHandler.logEvent(go.BuildError),new zn(Vs)}(r),Dp(e,r);try{var n=t.getPaymentRequestLock(e),[i,o]=yield ed(r),s=Dh(i,e,r,o,n);return r.metricsHandler.logEvent(go.BuildOK),s}catch(e){throw r.metricsHandler.logEvent(go.BuildError),e}}))()}applePay(e){var t=this;return Pp((function*(){var r=yield t.getPaymentContext(Ao.ApplePay);r.metricsHandler.logEvent(go.BuildStart),Np(Ts.APPLE_PAY,r),Dp(e,r);try{var n=t.getPaymentRequestLock(e),i=Ph(e,r,n);return r.metricsHandler.logEvent(go.BuildOK),i}catch(e){throw r.metricsHandler.logEvent(go.BuildError),e}}))()}ach(e){var t=this;return Pp((function*(){var r=yield t.getPaymentContext(Ao.Ach);r.metricsHandler.logEvent(go.BuildStart),Np(Ts.ACH,r);try{var n=new Ja(r,e);return yield n.initialize(),r.metricsHandler.logEvent(go.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(go.BuildError),e}}))()}giftCard(e){var t=this;return Pp((function*(){var r=yield t.getPaymentContext(Ao.GiftCard);r.metricsHandler.logEvent(go.BuildStart);try{var n=new sl(r,e);return r.metricsHandler.logEvent(go.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(go.BuildError),e}}))()}afterpayClearpay(e){var t=this;return Pp((function*(){var r=yield t.getPaymentContext(Ao.Afterpay);r.metricsHandler.logEvent(go.BuildStart),Np(Ts.AFTERPAY,r),Dp(e,r);try{var n=t.getPaymentRequestLock(e),[i,o]=yield yh(r),s=Rh(i,o,e,r,n);return yield s.internalSetCheckoutToken(),r.metricsHandler.logEvent(go.BuildOK),s}catch(e){throw r.metricsHandler.logEvent(go.BuildError),e}}))()}cashAppPay(e,t){var r=this;return Pp((function*(){var n=yield r.getPaymentContext(Ao.CashAppPayV1);n.metricsHandler.logEvent(go.BuildStart),Np(Ts.CASH_APP_PAY_V1,n),Dp(e,n);try{var i=r.getPaymentRequestLock(e),o=yield wh.initialize(n),s=Nh(o,e,t,n,i);return n.metricsHandler.logEvent(go.BuildOK),s}catch(e){throw n.metricsHandler.logEvent(go.BuildError),e}}))()}getPaymentContext(e){var t=arguments,r=this;return Pp((function*(){var n=!(t.length>1&&void 0!==t[1])||t[1],{featureFlagValues:i,messenger:o,session:s,paymentMethodSupportDetail:a,isTestMerchant:c}=yield r.initializePaymentMethod();s.avt&&r.errorLogger.setAvt(s.avt),s.sessionId&&r.errorLogger.setSessionId(s.sessionId),s.instanceId&&r.errorLogger.setInstanceId(s.instanceId);var u=Xs(),l=new Js(r.metrics,s,e,u);if(r.contextEventTarget||(r.contextEventTarget=new Qs),void 0===r.analyticsManager){var d,h=new wp(s.applicationId,s.locationId,null!==(d=s.avt)&&void 0!==d?d:"");r.analyticsManager=xh.build(h,r.errorLogger),r.analyticsManager.setupAutoRefresh(ea)}var p=new Hs(r.errorLogger,o,l,s,a,r.localeStrings,r.contextEventTarget,i,c,r.analyticsManager);return n&&r.analyticsManager.beginGenerateToken(),r.errorLogger.setFeatureFlagHandler(p.featureFlagHandler),p}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=fd.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var r=new ri("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return t}}function xp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xp(Object(r),!0).forEach((function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mp=new Map;function Up(e,t){var r,n="".concat(e,"-").concat(null!=t?t:"");if(Mp.has(n))return Mp.get(n);if(!(r=s.windowLocation).hostname.endsWith("localhost")&&"https:"!==r.protocol)throw new Gn;if(!s.isSupported())throw new Vn;if(function(e){if(!function(e){return!(e.length<22||e.length>37)&&Oi.test(e)&&!Ci.test(e)}(e))throw new mn;var t=e.match(/^[\w-]{22}$/),r=e.startsWith("sq0idp-"),n=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||r||n||i))throw new mn;if(r&&!Ti())throw new vn(xr.production,Hr.env);if(n&&!bi(xr.sandbox))throw new vn(xr.sandbox,Hr.env)}(e),null!=t&&"string"!=typeof t)throw new yn;var i=new zi({applicationId:e,applicationUrl:window.location.origin,sourceName:"web-payments-sdk-public",useGlobalHandlers:!1}),o=s.windowLocation.hostname,a={applicationId:e,hostname:o,locationId:null!=t?t:"",sourceUrl:s.windowLocation.origin},c=new Ps(i,{applicationId:e,hostname:o,locationId:null!=t?t:""});c.logEvent({event:go.LoadOK,eventSource:Ao.App});var u=new Lp(a,c,i);return Mp.set(n,u),u}window.Square?(window.Square.errors=window.Square.errors?kp(kp({},Oo),window.Square.errors):Oo,window.Square._buildWebSDKV1Payments=Up):window.Square={errors:Oo,_buildWebSDKV1Payments:Up,payments:Up}})()})();